<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="author" content="Mrli"><meta name="renderer" content="webkit"><meta name="copyright" content="Mrli"><meta name="keywords" content="Mrli's Blog"><meta name="description" content="想和你讲，说了会心动 ，缄默会心安。"><meta name="Cache-Control" content="no-cache"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>SpringBoot学习笔记 · Mr.li's Blog</title><link rel="stylesheet" href="/css/style.css?v=2018.7.9"><link rel="stylesheet" href="/css/animation.css?v=2018.7.9"><link rel="icon" href="/img/assets/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.6"><!-- scripts--><script>(function( w ){
  "use strict";
  // rel=preload support test
  if( !w.loadCSS ){
    w.loadCSS = function(){};
  }
  // define on the loadCSS obj
  var rp = loadCSS.relpreload = {};
  // rel=preload feature support test
  // runs once and returns a function for compat purposes
  rp.support = (function(){
    var ret;
    try {
      ret = w.document.createElement( "link" ).relList.supports( "preload" );
    } catch (e) {
      ret = false;
    }
    return function(){
      return ret;
    };
  })();

  // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
  // then change that media back to its intended value on load
  rp.bindMediaToggle = function( link ){
    // remember existing media attr for ultimate state, or default to 'all'
    var finalMedia = link.media || "all";

    function enableStylesheet(){
      link.media = finalMedia;
    }

    // bind load handlers to enable media
    if( link.addEventListener ){
      link.addEventListener( "load", enableStylesheet );
    } else if( link.attachEvent ){
      link.attachEvent( "onload", enableStylesheet );
    }

    // Set rel and non-applicable media type to start an async request
    // note: timeout allows this to happen async to let rendering continue in IE
    setTimeout(function(){
      link.rel = "stylesheet";
      link.media = "only x";
    });
    // also enable media after 3 seconds,
    // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
    setTimeout( enableStylesheet, 3000 );
  };

  // loop through link elements in DOM
  rp.poly = function(){
    // double check this to prevent external calls from running
    if( rp.support() ){
      return;
    }
    var links = w.document.getElementsByTagName( "link" );
    for( var i = 0; i < links.length; i++ ){
      var link = links[ i ];
      // qualify links to those with rel=preload and as=style attrs
      if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
        // prevent rerunning on link
        link.setAttribute( "data-loadcss", true );
        // bind listeners to toggle media back
        rp.bindMediaToggle( link );
      }
    }
  };

  // if unsupported, run the polyfill
  if( !rp.support() ){
    // run once at least
    rp.poly();

    // rerun poly on an interval until onload
    var run = w.setInterval( rp.poly, 500 );
    if( w.addEventListener ){
      w.addEventListener( "load", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    } else if( w.attachEvent ){
      w.attachEvent( "onload", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    }
  }


  // commonjs
  if( typeof exports !== "undefined" ){
    exports.loadCSS = loadCSS;
  }
  else {
    w.loadCSS = loadCSS;
  }
}( typeof global !== "undefined" ? global : this ) );</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" defer></script><script src="/js/main.js?v=2018.7.9" defer></script><!-- fancybox--><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script><!-- busuanzi--><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></head><body><section class="profile-close" id="cxo-profile"><div class="profile-avatar"><i class="fa fa-caret-left"></i><img src="https://avatars1.githubusercontent.com/u/31088082?s=400&amp;u=7a99ff83916afb3f4c5312bd78a1be17fe0e34ed&amp;v=4"></div><!--.profile-saying
  i.fa.fa-comment
  .saying--><div class="cxo-profile-inner"><div class="profile-name">Mrli</div><div class="profile-signature">别装作很努力,<br>因为结局不会陪你演戏。</div><div class="contacts"><div>Contacts:</div><span><a href="http://sighttp.qq.com/msgrd?v=1&amp;uin=1063052964" target="_black">QQ</a></span><span><a href="https://www.cnblogs.com/nymrli/" target="_black">博客园</a></span></div><div class="read-progress"></div></div></section><header id="cxo-intro" style="height: 60vh;background-image: url(/img/intro/index-bg.png);"><nav id="cxo-intro-nav"><section><div class="intro-nav-title"><a href="/">Mr.li's Blog</a></div><div class="intro-nav-label-box"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div><i class="fa fa-bars intro-nav-menu"><div class="intro-nav-drop"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div></i><div class="clear"></div></section></nav><h1 class="post-title">SpringBoot学习笔记</h1><div class="post-intros"><div class="post-intro-meta"><span class="post-intro-time"><i class="post-intro-calendar fa fa-edit"></i><span>2021/11/27</span></span><span class="busuanzi-pv" id="busuanzi_container_page_pv"><i class="post-intro-calendar fa fa-user-o"></i><span id="busuanzi_value_page_pv"></span></span><span class="post-intro-tags"><a class="intro-tag fa fa-tag" href="javascript:void(0)" date-tags="后端"> 后端</a><a class="intro-tag fa fa-tag" href="javascript:void(0)" date-tags="Web"> Web</a><a class="intro-tag fa fa-tag" href="javascript:void(0)" date-tags="Java"> Java</a></span></div><div class="post-intro-read"><span> Word count: <span class="post-count">11,924</span> | Reading time: <span class="post-count">55</span>min</span></div></div></header><article class="cxo-up" id="cxo-content-outer"><section id="cxo-content-inner"><article class="article-entry" id="post"><h1 id="spring-boot"><a class="markdownIt-Anchor" href="#spring-boot"></a> Spring Boot</h1>
<h2 id="springmvc流程图"><a class="markdownIt-Anchor" href="#springmvc流程图"></a> SpringMVC流程图</h2>
<p><img src="https://i.loli.net/2021/08/02/8IVrDswkNTlPjXW.png" alt=""></p>
<h2 id="hello-word"><a class="markdownIt-Anchor" href="#hello-word"></a> hello word</h2>
<p>第一个controller</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * Project Name:demo </span></span><br><span class="line"><span class="comment"> * File Name:HelloController.java </span></span><br><span class="line"><span class="comment"> * Package Name:com.example.demo </span></span><br><span class="line"><span class="comment"> * Date:2019年9月15日下午8:27:56 </span></span><br><span class="line"><span class="comment"> * Copyright (c) 2019, chenzhou1025@126.com All Rights Reserved. </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;cupsize&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String cupsize;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(value=<span class="string">"hello"</span>,method= RequestMethod.GET)</span><br><span class="line"><span class="comment">//  @GetMapping("/hello")</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">say</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cupsize;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>application.yml</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">5000</span></span><br><span class="line"><span class="comment">#  servlet:</span></span><br><span class="line"><span class="comment">#    context-path: /girl</span></span><br><span class="line"><span class="attr">cupsize:</span> <span class="string">B</span></span><br><span class="line"><span class="string">spring.datasource.url:</span> <span class="attr">jdbc:mysql://127.0.0.1:3306/</span></span><br><span class="line"><span class="string">spring.datasource.username:</span> <span class="string">root</span> <span class="string">spring.datasource.password:</span> <span class="number">123456</span></span><br><span class="line"><span class="string">spring.datasource.driver-class-name:</span> <span class="string">com.mysql.jdbc</span></span><br></pre></td></tr></table></figure>
<h2 id="controller的使用"><a class="markdownIt-Anchor" href="#controller的使用"></a> Controller的使用</h2>
<p>@Controller处理http请求Spring4之后新加的注解，原来返回json</p>
<ul>
<li>
<p>需要返回模板,即<code>return “index”;</code></p>
<ul>
<li>
<p>需要在POM.XML中添加spring-boot-starter-thymeleaf的依赖</p>
</li>
<li>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>@RestController等价于&lt;==&gt;@Controller+@ResponseBody</p>
<ul>
<li>可以返回JSON格式</li>
</ul>
<p>@RequestMapping 配置url映射</p>
<ul>
<li>
<p>▲如果没有指定Method那么所有方式都可以</p>
</li>
<li>
<p>给某个方法指定url路由</p>
<p><code>@RequestMapping(value={&quot;/hello&quot;,&quot;/hil&quot;},method=RequestMethod.GET)</code></p>
</li>
<li>
<p>给整个class指定路由</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * Project Name:demo </span></span><br><span class="line"><span class="comment"> * File Name:HelloController.java </span></span><br><span class="line"><span class="comment"> * Package Name:com.example.demo </span></span><br><span class="line"><span class="comment"> * Date:2019年9月15日下午8:27:56 </span></span><br><span class="line"><span class="comment"> * Copyright (c) 2019, chenzhou1025@126.com All Rights Reserved. </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/hello"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Autowired</span></span><br><span class="line">  <span class="keyword">private</span> GirlProperties girlProperties;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@RequestMapping</span>(value = <span class="string">"/say"</span>, method= RequestMethod.GET)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">say</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> girlProperties.getCupSize();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>@RequestMapping(value=xxx,method=RequestMethod.GET)</code>等价于<code>XxxMapping</code></p>
<ul>
<li>GetMapping</li>
<li>PostMapping</li>
</ul>
</li>
<li>
<p>@PathVariable</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/say/&#123;id&#125;"</span>, method= RequestMethod.GET)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">say</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"id:"</span> + id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>@RequestParam</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/say"</span>, method= RequestMethod.GET)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">say</span><span class="params">(@RequestParam(<span class="string">"id"</span>)</span> Integer mid) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"id:"</span> + mid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/say"</span>, method= RequestMethod.GET)</span><br><span class="line">  <span class="comment">// defaultValue值必须为String</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">say</span><span class="params">(@RequestParam(value=<span class="string">"id"</span>, required=<span class="keyword">false</span>, defaultValue=<span class="string">"0"</span>)</span> Integer mid) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"id:"</span> + mid;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="数据库管理"><a class="markdownIt-Anchor" href="#数据库管理"></a> 数据库管理</h2>
<p>JPA（Java Persistence APl）定义了一系列对象持久化的标准，目前实现这一规范的产品有Hibernate、TopLink等。</p>
<h3 id="启用jpa"><a class="markdownIt-Anchor" href="#启用jpa"></a> 启用JPA</h3>
<p>application.yml</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  profiles:</span><br><span class="line">    active: dev</span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql:<span class="comment">//127.0.0.1:3306/dbgirl?characterEncoding=utf-8&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC</span></span><br><span class="line">    username: root</span><br><span class="line">    password: cl123123</span><br><span class="line">  jpa:</span><br><span class="line">    hibernate:</span><br><span class="line">      ddl-auto: create</span><br><span class="line">    show-sql: <span class="keyword">true</span></span><br></pre></td></tr></table></figure>
<h3 id="增删改查curd"><a class="markdownIt-Anchor" href="#增删改查curd"></a> 增删改查CURD</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * Project Name:demo </span></span><br><span class="line"><span class="comment"> * File Name:Girl.java </span></span><br><span class="line"><span class="comment"> * Package Name:com.example.demo </span></span><br><span class="line"><span class="comment"> * Date:2019年9月16日下午6:34:14 </span></span><br><span class="line"><span class="comment"> * Copyright (c) 2019, chenzhou1025@126.com All Rights Reserved. </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Girl</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span> </span><br><span class="line">    <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String cupSize;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Girl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCupSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cupSize;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCupSize</span><span class="params">(String cupSize)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cupSize = cupSize;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&#123;\"id\":\""</span> + id + <span class="string">"\",\"cupSize\":\""</span> + cupSize + <span class="string">"\",\"age\":\""</span> + age + <span class="string">"\"&#125;  "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>GirlControllr.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * Project Name:demo </span></span><br><span class="line"><span class="comment"> * File Name:GirlController.java </span></span><br><span class="line"><span class="comment"> * Package Name:com.example.demo </span></span><br><span class="line"><span class="comment"> * Date:2019年9月17日下午3:44:06 </span></span><br><span class="line"><span class="comment"> * Copyright (c) 2019, chenzhou1025@126.com All Rights Reserved. </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.DeleteMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PutMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GirlController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> GirlRepository girlRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping</span>(value= <span class="string">"/girls"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Girl&gt; <span class="title">girlList</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> girlRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PostMapping</span>(value = <span class="string">"/girls"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Girl <span class="title">addGirl</span><span class="params">(@RequestParam(<span class="string">"cupSize"</span>)</span> String cupSize, </span></span><br><span class="line"><span class="function">            @<span class="title">RequestParam</span><span class="params">(<span class="string">"age"</span>)</span> Integer age) </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"cupsize"</span>+cupSize);</span><br><span class="line">        Girl girl= <span class="keyword">new</span> Girl();</span><br><span class="line">        girl.setCupSize(cupSize);</span><br><span class="line">        girl.setAge(age);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> girlRepository.save(girl);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping</span>(value=<span class="string">"/girls/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Girl <span class="title">girlFindOne</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> girlRepository.findById(id).get();</span><br><span class="line"><span class="comment">//      return girlRepository.getOne(id); 无效，需要实例json</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PutMapping</span>(value=<span class="string">"/girls/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Girl <span class="title">girlUpdate</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id,</span></span><br><span class="line"><span class="function">            @<span class="title">RequestParam</span><span class="params">(<span class="string">"cupSize"</span>)</span> String cupSize, </span></span><br><span class="line"><span class="function">            @<span class="title">RequestParam</span><span class="params">(<span class="string">"age"</span>)</span> Integer age)  </span>&#123;</span><br><span class="line">        Girl girl = <span class="keyword">new</span> Girl();</span><br><span class="line">        girl.setId(id);</span><br><span class="line">        girl.setAge(age);</span><br><span class="line">        girl.setCupSize(cupSize);</span><br><span class="line">        <span class="keyword">return</span> girlRepository.save(girl);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@DeleteMapping</span>(value=<span class="string">"/girls/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">girlDelete</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id) </span>&#123;</span><br><span class="line">        girlRepository.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping</span>(value=<span class="string">"/girls/age/&#123;age&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Girl&gt; <span class="title">girlListByAge</span><span class="params">(@PathVariable(<span class="string">"age"</span>)</span> Integer age)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> girlRepository.findByAge(age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>▲注意.视频中的findOne已经被淘汰，因为springboot版本问题，新的版本不再支持findone(id)方法。</p>
<p>可用<code>findById(id).get()</code>或<code>getOne(id)</code>来替换，区别是前者当参数id为空时返回null，后者直接报异常，因为getOne返回的是对象的引用。</p>
<p>我试了下getOne会报错，据说是要设置json的返回格式？</p>
<h3 id="自定义搜索方式findbyage"><a class="markdownIt-Anchor" href="#自定义搜索方式findbyage"></a> 自定义搜索方式findByAge</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * Project Name:demo </span></span><br><span class="line"><span class="comment"> * File Name:GirlRepository.java </span></span><br><span class="line"><span class="comment"> * Package Name:com.example.demo </span></span><br><span class="line"><span class="comment"> * Date:2019年9月17日下午3:44:33 </span></span><br><span class="line"><span class="comment"> * Copyright (c) 2019, chenzhou1025@126.com All Rights Reserved. </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">GirlRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Girl</span>, <span class="title">Integer</span>&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Girl&gt; <span class="title">findByAge</span><span class="params">(Integer age)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数据库事务管理"><a class="markdownIt-Anchor" href="#数据库事务管理"></a> 数据库事务管理</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * Project Name:demo </span></span><br><span class="line"><span class="comment"> * File Name:GirlController.java </span></span><br><span class="line"><span class="comment"> * Package Name:com.example.demo </span></span><br><span class="line"><span class="comment"> * Date:2019年9月17日下午3:44:06 </span></span><br><span class="line"><span class="comment"> * Copyright (c) 2019, chenzhou1025@126.com All Rights Reserved. </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="meta">@PostMapping</span>(value = <span class="string">"/girls/two"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">girlTwo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        girlService.insertTwo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * Project Name:demo </span></span><br><span class="line"><span class="comment"> * File Name:GirlService.java </span></span><br><span class="line"><span class="comment"> * Package Name:com.example.demo </span></span><br><span class="line"><span class="comment"> * Date:2019年9月17日下午4:39:00 </span></span><br><span class="line"><span class="comment"> * Copyright (c) 2019, chenzhou1025@126.com All Rights Reserved. </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GirlService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> GirlRepository girlRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertTwo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Girl girlA = <span class="keyword">new</span> Girl();</span><br><span class="line">        girlA.setCupSize(<span class="string">"A"</span>);</span><br><span class="line">        girlA.setAge(<span class="number">18</span>);</span><br><span class="line">        girlRepository.save(girlA);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Girl girlB = <span class="keyword">new</span> Girl();</span><br><span class="line">        girlB.setCupSize(<span class="string">"BBBB"</span>);</span><br><span class="line">        girlB.setAge(<span class="number">19</span>);</span><br><span class="line">        girlRepository.save(girlB);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在项目开发过程中，使用了Spring data jpa自动创建表。但是默认情况下，创建出来的表类型为MyISAM。</p>
<p>（MySQL数据库默认的存储引擎类型是MyISAM，这种存储引擎类型不支持事务处理。）改成InnoDB存储引擎会就可以了。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jpa:</span></span><br><span class="line"><span class="attr">    database:</span> <span class="string">MYSQL</span></span><br><span class="line"><span class="attr">    hibernate:</span></span><br><span class="line"><span class="attr">      ddl-auto:</span> <span class="string">update</span></span><br><span class="line"><span class="attr">    show-sql:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    database-platform:</span> <span class="string">org.hibernate.dialect.MySQL5InnoDBDialect</span></span><br></pre></td></tr></table></figure>
<p>在navicat中数据库—&gt;表—&gt;单击表名，在右边可以出现表的所有信息</p>
<p><img src="/2019/09/17/SpringBoot学习笔记/mysq%E5%AD%98%E5%82%A8l%E5%BC%95%E6%93%8E.jpg" alt="mysq存储l引擎"></p>
<p><a href="https://www.imooc.com/video/16357" target="_blank" rel="noopener">Spring Boot 2.0深度实践-初遇Spring Boot</a></p>
<ul>
<li>多模块：web、persistence、mdel</li>
<li>项目打包——多模块重构后</li>
</ul>
<h2 id="运行模式"><a class="markdownIt-Anchor" href="#运行模式"></a> 运行模式</h2>
<p>IDEA: 有图形界面的开发环境</p>
<p>JAR/WAR: 线上、服务器上的生产环境</p>
<ul>
<li>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mvn install </span><br><span class="line">$ <span class="built_in">cd</span> target</span><br><span class="line">$ java -jar</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>MAVEN插件: 无图形界面的开发环境</p>
<ul>
<li><code>mvn spring-boot:run</code></li>
</ul>
<h2 id="热加载"><a class="markdownIt-Anchor" href="#热加载"></a> 热加载：</h2>
<p>pom.xml中加上依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>热部署:</p>
<p>就是容器状态在运行的情况下重新部署整个项目.在这种情况下一般整个内存会清空,重新加载.简单来说就是Tomcat或者其他的web服务器会帮我们重新加载项目.这种方式可能会造成sessin丢失等情况.</p>
<p>热加载:</p>
<p>就是容器状态在运行的情况下重新加载改变编译后的类.在这种情况下内存不会清空,sessin不会丢失,但容易造成内存溢出,或者找不到方法。因为内存无法转变成对像.一般改变类的结构和模型就会有异常，在已经有的变量和方法中改变是不会出问题的</p>
<hr>
<h1 id="2020529"><a class="markdownIt-Anchor" href="#2020529"></a> 2020.5.29</h1>
<blockquote>
<p>春招上岸了, 准备下后端的相关开发知识</p>
</blockquote>
<h2 id="注解含义"><a class="markdownIt-Anchor" href="#注解含义"></a> 注解含义</h2>
<h3 id="springbootapplication内容-configuration配置相关"><a class="markdownIt-Anchor" href="#springbootapplication内容-configuration配置相关"></a> <code>@SpringBootApplication</code>内容-&gt;configuration配置相关</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="comment">// 上述四个为元注解, 不需要看</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span>    <span class="comment">// 表示这是一个配置类, 由原来spring中的configuration封装而成(代替xml)</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span>    <span class="comment">// 允许自动配置</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(             <span class="comment">// 扫描设置: 指定IOC容器扫描的包</span></span><br><span class="line">    excludeFilters = &#123;<span class="meta">@Filter</span>(</span><br><span class="line">    type = FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;TypeExcludeFilter.class&#125;</span><br><span class="line">), <span class="meta">@Filter</span>(</span><br><span class="line">    type = FilterType.CUSTOM,</span><br><span class="line">    classes = &#123;AutoConfigurationExcludeFilter.class&#125;</span><br><span class="line">)&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><code>@EnableAutoConfiguration</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span>                           <span class="comment">// 指定自动配置的包</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;AutoConfigurationImportSelector.class&#125;)    <span class="comment">// Import指定导入某个类</span></span><br><span class="line">                                            <span class="comment">//  AutoConfigurationImportSelector 为导入选择器</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableAutoConfiguration &#123;         <span class="comment">// 自动导入配置</span></span><br><span class="line">    String ENABLED_OVERRIDE_PROPERTY = <span class="string">"spring.boot.enableautoconfiguration"</span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] exclude() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    String[] excludeName() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@AutoConfigurationPackage</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;Registrar.class&#125;)                          <span class="comment">// 通过Registrar将主启动类所在包和它的子包中所有的组件扫描到IOC容器中</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoConfigurationPackage &#123;        <span class="comment">// 指定自动配置的包</span></span><br><span class="line">    String[] basePackages() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] basePackageClasses() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AutoConfigurationPackages</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Registrar</span> <span class="keyword">implements</span> <span class="title">ImportBeanDefinitionRegistrar</span>, <span class="title">DeterminableImports</span> </span>&#123;</span><br><span class="line">        Registrar() &#123;</span><br><span class="line">        &#125;   <span class="comment">// 静态内部类</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerBeanDefinitions</span><span class="params">(AnnotationMetadata metadata, BeanDefinitionRegistry registry)</span> </span>&#123;</span><br><span class="line">            AutoConfigurationPackages.register(registry, (String[])(<span class="keyword">new</span> AutoConfigurationPackages.PackageImports(metadata)).getPackageNames().toArray(<span class="keyword">new</span> String[<span class="number">0</span>]));  <span class="comment">// 第二个参数: 找到主启动类的包及其子包</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Set&lt;Object&gt; <span class="title">determineImports</span><span class="params">(AnnotationMetadata metadata)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Collections.singleton(<span class="keyword">new</span> AutoConfigurationPackages.PackageImports(metadata));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>主动导入的配置在:<code>External Library</code>-&gt; <code>META-INF/spring.factories</code>-&gt;<code>Maven: org.springframework.boot:spring-boot-autoconfigure:2.3.0.RELEASE</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Auto Configure</span><br><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span><br><span class="line">org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\</span><br></pre></td></tr></table></figure>
<p>随便点一个进去可以看到, 比如redis</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>(</span><br><span class="line">    proxyBeanMethods = <span class="keyword">false</span></span><br><span class="line">)</span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123;EnableRedisRepositories.class&#125;)</span><br><span class="line"><span class="meta">@ConditionalOnBean</span>(&#123;RedisConnectionFactory.class&#125;)</span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(                 <span class="comment">// 会去读properties文件， 如果读取到了相关参数参会加载</span></span><br><span class="line">    prefix = <span class="string">"spring.data.redis.repositories"</span>,</span><br><span class="line">    name = &#123;<span class="string">"enabled"</span>&#125;,</span><br><span class="line">    havingValue = <span class="string">"true"</span>,</span><br><span class="line">    matchIfMissing = <span class="keyword">true</span>               <span class="comment">// 如果不存在也行</span></span><br><span class="line">)</span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span>(&#123;RedisRepositoryFactoryBean.class&#125;)</span><br><span class="line"><span class="meta">@Import</span>(&#123;RedisRepositoriesRegistrar.class&#125;)</span><br><span class="line"><span class="meta">@AutoConfigureAfter</span>(&#123;RedisAutoConfiguration.class&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisRepositoriesAutoConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RedisRepositoriesAutoConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span>(</span><br><span class="line">    proxyBeanMethods = <span class="keyword">false</span></span><br><span class="line">)</span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span>(</span><br><span class="line">    type = Type.SERVLET</span><br><span class="line">)</span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(&#123;WebServlet.class&#125;)</span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(                     <span class="comment">// 会去读properties文件， 如果读取到了相关参数参会加载</span></span><br><span class="line">    prefix = <span class="string">"spring.h2.console"</span>,</span><br><span class="line">    name = &#123;<span class="string">"enabled"</span>&#125;,</span><br><span class="line">    havingValue = <span class="string">"true"</span>,</span><br><span class="line">    matchIfMissing = <span class="keyword">false</span>                  <span class="comment">// 如果不存在就不会加载</span></span><br><span class="line">)</span><br><span class="line"><span class="meta">@AutoConfigureAfter</span>(&#123;DataSourceAutoConfiguration.class&#125;)</span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>(&#123;H2ConsoleProperties.class&#125;) <span class="comment">// 允许通过properties文件加载</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">H2ConsoleAutoConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 。。。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(</span><br><span class="line">    prefix = <span class="string">"spring.h2.console"</span>            <span class="comment">// 通过properties文件配置， 读取前缀为"spring.h2.console"的设置</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">H2ConsoleProperties</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><code>@ComponentScan：</code></p>
</li>
<li>
<p>表示将该类自动发现扫描组件。个人理解相当于，如果扫描到有@Component、@Controller、@Service、@Repository等这些注解的类，并注册为Bean，可以自动收集所有的Spring组件，包括@Configuration类。<strong>我们经常使用@ComponentScan注解搜索beans，并结合@Autowired注解导入。</strong></p>
<ul>
<li>如果没有配置的话，Spring Boot中<code>@SpringBootApplication</code>会扫描启动类所在包下以及子包下的组件。</li>
</ul>
</li>
<li>
<p><code>@bean</code>注解: 相当于xml中的bean标签, 标注在方法上，用于把一个<strong>类对象</strong>加入IOC容器(返回某个实例的方法)，交给spring管理（官网解释：bean是一个由Spring IoC容器实例化、组装和管理的对象。）。并且注意，Spring上加@Bean注解的都是<strong>默认单例模式</strong></p>
<ul>
<li>参考： <a href="https://www.awaimai.com/2596.html" target="_blank" rel="noopener">https://www.awaimai.com/2596.html</a></li>
<li><strong>ioC</strong>：在 Spring 中，<strong>类的实例化、依赖的实例化、依赖的传入</strong>都交由 Spring Bean 容器控制，而不是用<code>new</code>方式实例化对象、通过非构造函数方法传入依赖等常规方式。在Spring中，我们基本不需要 <code>new</code> 一个类，这些都是让 Spring 去做的。Spring 启动时会把所需的类实例化成对象，如果需要依赖，则先实例化依赖，然后实例化当前类。</li>
<li><strong>依赖注入</strong>:因为依赖必须通过构建函数传入，所以实例化时，当前类就会接收并保存所有依赖的对象。</li>
</ul>
</li>
<li>
<p><code>@Import</code>注解: 相对于<code>@bean</code>注解, 可以更便捷地将一个类加入IOC容器</p>
</li>
<li>
<p><code>@condition*</code>注解: 一个<strong>类</strong>满足特定的条件时才加入IOC容器（实例化对象）</p>
</li>
<li>
<p><code>@RestController</code>：用于标注控制层组件(如struts中的action)，@ResponseBody和@Controller的合集。</p>
</li>
<li>
<p><code>@RequestMapping：</code>提供路由信息，负责URL到Controller中的具体函数的映射。</p>
</li>
<li>
<p><code>@ResponseBody：</code>表示<strong>该方法的返回结果直接写入HTTP response body中</strong>，一般在异步获取数据时使用，用于构建RESTful的api。在使用@RequestMapping后，返回值通常解析为跳转路径，<u>加上@Responsebody后返回结果不会被解析为跳转路径</u>(直接<code>return 'index'</code>表示跳转到index.html)，而是直接写入HTTP response body中。比如异步获取json数据，加上@Responsebody后，会直接返回json数据。该注解一般会配合@RequestMapping一起使用。</p>
</li>
<li>
<p><code>@RequestBody</code>将 HTTP 请求正文插入方法中，使用适合的 HttpMessageConverter 将请求体写入某个<strong>对象</strong>。</p>
<ul>
<li>该注解用于读取Request请求的body部分数据，使用系统默认配置的HttpMessageConverter进行解析，然后把相应的数据绑定到要返回的对象上；</li>
<li>再把HttpMessageConverter返回的对象数据绑定到 controller中方法的参数上。</li>
<li>SpringBoot提供的<u>获取参数</u>注解包括：@PathVariable，@RequestParam，@RequestBody,<a href="https://blog.csdn.net/csdn_bdl/article/details/100575056" target="_blank" rel="noopener">三者的区别如下</a></li>
<li>接收json数据一定需要使用<code>@RequestBody</code></li>
</ul>
</li>
<li>
<p><code>@RequestParam</code>: 表示从请求参数中获取的, 比如表单参数username</p>
</li>
<li>
<p><code>@RequestVariable</code>: 表示从url中提取的, 比如<code>&quot;/user/{id}&quot;</code>, 则写成<code>@RequestVariable(&quot;id&quot;) Integer id</code></p>
</li>
<li>
<p><code>@Propertysource</code>: 可以指定读取的配置文件，跟<code>@Value</code>一起使用</p>
</li>
<li>
<p><code>@Value：</code>注入Spring boot application.properties配置的属性的值</p>
</li>
<li>
<p><code>@Autowired：</code>自动导入依赖的bean, bean都是独立的, 但实际工作中，很多对象会依赖其他对象完成任务。这时候就需要能够<strong>将组件扫描得到的bean</strong>和他们依赖装配在一起</p>
<ul>
<li><a href="https://www.cnblogs.com/pjfmeng/p/7551340.html" target="_blank" rel="noopener">annotation之@Autowired、@Inject、@Resource三者区别</a></li>
</ul>
</li>
<li>
<p><code>@ImportResource：</code>用来加载xml配置文件。</p>
</li>
<li>
<p>@Configuration和@Bean</p>
<ul>
<li>@Configuration 和@Bean Spring的Java配置方式是通过@Configuration和@Bean 这两个注解实现的：<br>
1、@Configuration作用于类上，相当于一个xml配置文件；<br>
2、@Bean作用于方法上，相当于xml配置中的<code>&lt;bean&gt;</code>；启动过程中会IOC容器找到Bean注解后会执行。要获得<code>@Bean</code>标注的对象时通过<code>@Autowired</code>从IOC容器中得到</li>
</ul>
</li>
</ul>
<h2 id="springboot工作原理"><a class="markdownIt-Anchor" href="#springboot工作原理"></a> SpringBoot工作原理</h2>
<p><strong>读取spring.factories文件</strong><br>
SpringBoot启动时会读取spring-boot-autoconfigure-2.1.6.RELEASE.jar包下的META-INF/spring.factories文件。读取org.springframework.boot.autoconfigure.EnableAutoConfiguration属性的值加载自动配置类。</p>
<p><strong>加载XxxProperties类</strong><br>
根据自动配置类中指定的XxxProperties类设置自动配置的属性值，开发者也可以根据XxxProperties类中指定的属性在yml配置文件中修改自动配置。</p>
<p><strong>根据@ConditionalXxx注解决定加载哪些组件</strong><br>
SpringBoot通过@ConditionalXxx注解指定特定组件加入IOC容器时所需要具备的特定条件。这个组件会在满足条件时加入IOC容器。</p>
<p><a href="https://www.bilibili.com/video/BV1KE411K7PH?p=17" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1KE411K7PH?p=17</a><img src="/2019/09/17/SpringBoot学习笔记/%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.jpg" alt="工作原理"></p>
<h2 id="spring-boot自动配置原理"><a class="markdownIt-Anchor" href="#spring-boot自动配置原理"></a> <a href="http://www.monkey1024.com/spring-boot/1817" target="_blank" rel="noopener">spring boot自动配置原理</a></h2>
<p>spring boot中的@EnableAutoConfiguration注解的作用就是开启自动配置，正是因为开启了自动配置，开发者在使用spring boot的时候就不用再填写繁琐的的配置项了，那么spring boot是如何实现这个自动配置的呢?</p>
<ol>
<li>spring boot会<u>根据开发者添加的依赖判断是否使用了某个技术</u>，比如在依赖中有DispatcherServlet，那就说明使用了spring mvc技术。</li>
<li>spring boot<u>判断出开发者所使用的技术之后</u>（导入相关依赖），会从<u>自动配置（AutoConfigure）相关的包下找到该技术相关的配置类</u>。</li>
<li>spring boot会加载这些配置类，如果<u>配置文件有写相关的配置信息的话会将该信息读取到配置类的对象中</u>，然后加载到spring容器中，这样就完成了自动配置了。</li>
</ol>
<p>在spring boot中自动配置类和配置类命名都是符合下面格式的: 自动配置类——<code>*AutoConfiguration</code>; 配置类——<code>*Properties</code></p>
<p>▲如果不需要自动配置，可以<code>@SpringBootApplication(exclude={RedisAutoConfiguration.class})</code></p>
<h2 id="springboot启动类"><a class="markdownIt-Anchor" href="#springboot启动类"></a> Springboot启动类</h2>
<p>参考: <a href="https://www.bilibili.com/video/BV1sc411h7pN?p=8" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1sc411h7pN?p=8</a></p>
<h2 id="配置文件"><a class="markdownIt-Anchor" href="#配置文件"></a> <strong>配置文件</strong></h2>
<p><strong>存放位置</strong></p>
<ul>
<li>当前项目根目录（工程根目录）中</li>
<li>当前项目根目录下的一个/config子目录中</li>
<li>项目的resources即classpath根路径中</li>
<li>项目的resources即classpath根路径下的/config目录中</li>
</ul>
<p>注：</p>
<ul>
<li>Q:为什么项目的resources是classpath根路径？A: 因为编译之后<strong>配置文件</strong>会被放在target/classes目录下</li>
<li>使用<code>classpath*:</code>这种前缀，<strong>则可以代表多个匹配的文件</strong>；<code>**/mapper/mapping/*Mapper.xml</code>，双星号<code>**</code>表示在任意目录下，更多详情见：<a href="https://segmentfault.com/a/1190000015802324" target="_blank" rel="noopener">java项目中的classpath到底是什么</a></li>
</ul>
<p><strong>配置文件加载顺序</strong></p>
<ul>
<li>
<p>不同格式的加载顺序:</p>
<ul>
<li>
<p>如果同一个目录下，有application.yml也有application.properties，默认先读取application.properties。</p>
</li>
<li>
<p>如果同一个配置属性，在多个配置文件都配置了，<strong>默认使用第1个读取到的</strong>，后面读取的不覆盖前面读取到的。</p>
</li>
<li>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;includes&gt;</span><br><span class="line">    &lt;include&gt;**/application*.yml&lt;/include&gt;</span><br><span class="line">    &lt;include&gt;**/application*.yaml&lt;/include&gt;</span><br><span class="line">    &lt;include&gt;**/application*.properties&lt;/include&gt;</span><br><span class="line">&lt;/includes&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>不同位置的加载顺序:</p>
<ul>
<li>当前项目根目录下的一个/config子目录中(1最高)</li>
<li>当前项目根目录中（2其次）</li>
<li>项目的resources即classpath根路径下的/config目录中(3一般)</li>
<li>项目的resources即classpath根路径中(4最后)</li>
</ul>
</li>
</ul>
<h3 id="通过profile指定加载app配置文件"><a class="markdownIt-Anchor" href="#通过profile指定加载app配置文件"></a> 通过profile指定加载app配置文件</h3>
<blockquote>
<p>对于应用程序而言， 不同的环境需要不同的配置。springboot框架提供了多profile管理功能，从而来区分不同环境的配置。</p>
</blockquote>
<p>规定语法规则： <code>application-{profile}.properties(.yml, .yaml)</code></p>
<p>激活制定profile： <code>java-jar configuration_file-0.0.1-SNAPSHOT.jar--spring.profiles.active=dev;</code>、<code>java-jar configuration_file-e.e.1-SNAPSHOT.jar--spring.config.location=D:\config/</code></p>
<h3 id="外部配置文件"><a class="markdownIt-Anchor" href="#外部配置文件"></a> 外部配置文件</h3>
<p>使用@PropertySource来加载其他配置文件（功能特殊列出or其他目录下）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:mqtt.properties"</span>)	<span class="comment">// 一般会设置成Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IotMqttClient</span> </span>&#123;</span><br></pre></td></tr></table></figure>
<p>@PropertySource 中的属性解释</p>
<ol>
<li>value：指明加载配置文件的路径。</li>
<li>ignoreResourceNotFound：指定的配置文件不存在是否报错，默认是false。当设置为 true 时，若该文件不存在，程序不会报错。实际项目开发中，最好设置 ignoreResourceNotFound 为 false。</li>
<li>encoding：指定读取属性文件所使用的编码，我们通常使用的是UTF-8。</li>
</ol>
<h3 id="属性注入"><a class="markdownIt-Anchor" href="#属性注入"></a> 属性注入</h3>
<ol>
<li>通过@Value + SPEL表达式 直接绑定springboot配置文件中的值</li>
<li>在注入类前加上<code>@ConfiguartionProperties(prefix=&quot;user&quot;)</code>注解后会从application.properties(.yml)中读取指定前缀的配置，（如果结合`@PropertySource(&quot;classpath:address-book.properties&quot;则可以指定properties问题），从而节省了在每个成员字段前加@value</li>
</ol>
<p>注：@ConfiguartionProperties和@Value两者会有冲突不能同时使用，出现时以单个的@Value为主（此时ConfiguartionProperties设置的prefix对于这个字段就是失效的，所以@Value=&quot;{xxx}&quot;，xxx要写全即跟配置文件中完全一致）</p>
<p>变量命名跟配置文件会进行匹配， 规则如下</p>
<ul>
<li>不区分大小写</li>
<li>松散绑定： var_name和var-name和varName视为一种（@value不支持，@ConfiguartionProperties支持）</li>
</ul>
<p><img src="https://i.loli.net/2021/08/02/Fsnr9jV4cw6kAhZ.png" alt=""></p>
<p>如果时复杂属性：List、set</p>
<ol>
<li>在application.properties中以数组形式书写</li>
<li>在application.yml本身支持list，按yml书写即可</li>
<li>字符串，java代码中写工具类解析成数组</li>
</ol>
<h3 id="自动配置"><a class="markdownIt-Anchor" href="#自动配置"></a> 自动配置</h3>
<p>@SpringBootConfiguration:Spring Boot的配置类；标注在某个类上，表示这<strong>是一个Spring Boot的配置类</strong>；<br>
@Coniguration：配置类上来标注这个注解；配置类——配置文件；配置类也是容器中的一个组件；Component<br>
@EnableAutoConfiguration：开启自动配置功能；以前我们需要配置的东西，Spring Boot帮我们自动配置；@EnableAutoConiguration告诉SpringBoot开启自动配置功能；这样自动配置才能生效；.</p>
<h2 id="springboot2x整合redis"><a class="markdownIt-Anchor" href="#springboot2x整合redis"></a> SpringBoot2.x整合redis</h2>
<blockquote>
<p>我是先尝试的thymeleaf,弄了我一下午;接着是mybatis也弄了很久;最后才是redis, 虽然是因为解决了IDEA的Maven问题, 但确实也是redis连接最简单</p>
</blockquote>
<p>1.[官网下载Redis](<a href="https://redis.io/download%EF%BC%8C" target="_blank" rel="noopener">https://redis.io/download，</a> 因为windows支持的不好， 因此还是直接在服务器上使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> wget http://download.redis.io/releases/redis-6.0.4.tar.gz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tar xzf redis-6.0.4.tar.gz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> redis-6.0.4</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> src</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./redis-server        <span class="comment"># 启动server服务</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./redis-cli           <span class="comment"># 使用redis, 类似shell</span></span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>外网连接设置</li>
</ol>
<p><code>sudo vim /home/mrli/redis-6.0.4/redis.conf</code></p>
<ul>
<li>将<code>bind 127.0.0.1</code>注释掉（含义<code>为绑定可访问IP</code>， 也就是说只能通过<code>127.0.0.1</code>访问）</li>
<li>将<code>protected-mode yes</code>设置为<code>protected-mode no</code></li>
</ul>
<p><strong>解释:</strong></p>
<ul>
<li>默认情况bind=127.0.0.1只能接受本机的访问请求</li>
<li>不写的情况下，无限制接受任何ip地址的访问</li>
<li>如果开启了protected-mode，那么在没有设定bind ip且没有设密码的情况下，Redis只允许接受本机的相应</li>
</ul>
<p>fromB站视频: <a href="https://www.bilibili.com/video/BV1J4411x7U1?p=45" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1J4411x7U1?p=45</a></p>
<p>3.使用Springboot整合</p>
<ul>
<li>设置依赖</li>
<li>yml配置IP</li>
<li>编写连接Test</li>
</ul>
<p>Springboot整合代码[代码重工]: <a href="http://39.108.113.88/content/country-spring-boot/detail/spring-boot-08" target="_blank" rel="noopener">http://39.108.113.88/content/country-spring-boot/detail/spring-boot-08</a></p>
<h2 id="springboot2x整合thymeleaf"><a class="markdownIt-Anchor" href="#springboot2x整合thymeleaf"></a> SpringBoot2.x整合Thymeleaf</h2>
<p>问题: 我默认从创建工程的SpringBoot版本是2.3.0， 然后直接导入maven依赖， 在IDEA中是显示红色，无法使用的。==&gt;按照thymeleaf官方提供的2.3.0的导入方法仍然无效</p>
<p>A： 降低Springboot版本为2.1.14, 问题解决</p>
<h3 id="问题罗列"><a class="markdownIt-Anchor" href="#问题罗列"></a> 问题罗列</h3>
<p>浏览器显示: -&gt;没有配置路由</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Whitelabel Error Page</span><br><span class="line">This application has no explicit mapping for /error, so you are seeing this as a fallback.</span><br><span class="line"></span><br><span class="line">Fri May 29 15:30:09 CST 2020</span><br><span class="line">There was an unexpected error (type=Not Found, status=404).</span><br><span class="line">No message available</span><br></pre></td></tr></table></figure>
<p>浏览器显示: -&gt;找不到模板</p>
<ul>
<li>controller中返回的模板名与html文件名不一致</li>
<li>yml配置中<code>prefix: classpath:/templates/</code>设置错误，缺少末尾的<code>/</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Whitelabel Error Page</span><br><span class="line">This application has no explicit mapping for /error, so you are seeing this as a fallback.</span><br><span class="line"></span><br><span class="line">Fri May 29 15:30:49 CST 2020</span><br><span class="line">There was an unexpected error (type=Internal Server Error, status=500).</span><br><span class="line">Error resolving template [hello], template might not exist or might not be accessible by any of the configured Template Resolvers</span><br></pre></td></tr></table></figure>
<h3 id="成功案例"><a class="markdownIt-Anchor" href="#成功案例"></a> 成功案例</h3>
<p>yml配置文件内容</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  thymeleaf:</span></span><br><span class="line">    <span class="comment"># 配置模板路径，默认是templates，可以不用配置</span></span><br><span class="line"><span class="attr">    prefix:</span> <span class="attr">classpath:/templates/</span>       <span class="comment"># 要注意/的数量与位置</span></span><br><span class="line"><span class="attr">    suffix:</span> <span class="string">.html</span></span><br><span class="line">    <span class="comment"># 编码 可不用配置</span></span><br><span class="line"><span class="attr">    encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">    <span class="comment"># 开发配置为false,避免修改模板还要重启服务器</span></span><br><span class="line"><span class="attr">    cache:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>controller内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThymeLeafGo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/test/thymeleaf"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testThymeleaf</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"yes"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>hello.html内容</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">"经过服务器处理后可以看到的内容"</span>&gt;</span>直接打开HMTL查看到的内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>文档教程: <a href="https://www.cnblogs.com/yichunguo/p/12128324.html" target="_blank" rel="noopener">SpringBoot整合Thymeleaf-基于SpringBoot2.X版本</a></li>
</ul>
<h3 id="thymeleaf语法"><a class="markdownIt-Anchor" href="#thymeleaf语法"></a> Thymeleaf语法:</h3>
<ul>
<li>
<p>th:text：文本替换；<br>
th:value：属性赋值<br>
th:each：遍历循环元素<br>
th:if：判断条件，类似的还有th:unless，th:switch，th:case</p>
</li>
<li>
<p><code>${...}</code> 变量表达式，Variable Expressions<br>
<code>@{...}</code> 链接表达式，Link URL Expressions<br>
<code>#{...}</code> 消息表达式，Message Expressions<br>
<code>~{...}</code> 代码块表达式，Fragment Expressions<br>
<code>*{...}</code> 选择变量表达式，Selection Variable Expressions</p>
</li>
<li>
<p>常用的内置对象(用<code>${#xxx}</code>提取)<br>
ctx ：上下文对象。<br>
vars ：上下文变量。<br>
locale：上下文的语言环境。<br>
request：（仅在web上下文）的 HttpServletRequest 对象。<br>
response：（仅在web上下文）的 HttpServletResponse 对象。<br>
session：（仅在web上下文）的 HttpSession 对象。<br>
servletContext：（仅在web上下文）的 ServletContext 对象</p>
</li>
<li>
<p>常用的内置方法(用<code>${#xxx}</code>提取)<br>
strings：字符串格式化方法，常用的Java方法它都有。比如：equals，equalsIgnoreCase，length，trim，toUpperCase，toLowerCase，indexOf，substring，replace，startsWith，endsWith，contains，containsIgnoreCase等<br>
numbers：数值格式化方法，常用的方法有：formatDecimal等<br>
bools：布尔方法，常用的方法有：isTrue，isFalse等<br>
arrays：数组方法，常用的方法有：toArray，length，isEmpty，contains，containsAll等<br>
lists，sets：集合方法，常用的方法有：toList，size，isEmpty，contains，containsAll，sort等<br>
maps：对象方法，常用的方法有：size，isEmpty，containsKey，containsValue等<br>
dates：日期方法，常用的方法有：format，year，month，hour，createNow等</p>
</li>
</ul>
<h2 id="springboot2x整合mybatis"><a class="markdownIt-Anchor" href="#springboot2x整合mybatis"></a> <a href="https://www.bilibili.com/video/BV1KE411K7PH?p=18" target="_blank" rel="noopener">SpringBoot2.x整合Mybatis</a></h2>
<blockquote>
<p>最大的问题还是依赖问题， 在pom.xml写入了但是没生效。重建一个新项目， 更换了IDEA的Maven后问题解决</p>
</blockquote>
<p>先放个成功的结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___&apos;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br><span class="line">( ( )\___ | &apos;_ | &apos;_| | &apos;_ \/ _` | \ \ \ \</span><br><span class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="line">  &apos;  |____| .__|_| |_|_| |_\__, | / / / /</span><br><span class="line"> =========|_|==============|___/=/_/_/_/</span><br><span class="line"> :: Spring Boot ::       (v2.1.14.RELEASE)</span><br><span class="line"></span><br><span class="line">2020-05-29 20:21:38.066  INFO 9096 --- [           main] c.e.demo.test.DemoApplicationTests       : Starting DemoApplicationTests on Mrli-computer with PID 9096 (started by Mr.li in G:\SpringBootProject\batis)</span><br><span class="line">2020-05-29 20:21:38.066 DEBUG 9096 --- [           main] c.e.demo.test.DemoApplicationTests       : Running with Spring Boot v2.1.14.RELEASE, Spring v5.1.15.RELEASE</span><br><span class="line">2020-05-29 20:21:38.067  INFO 9096 --- [           main] c.e.demo.test.DemoApplicationTests       : No active profile set, falling back to default profiles: default</span><br><span class="line">2020-05-29 20:21:40.807  INFO 9096 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &apos;applicationTaskExecutor&apos;</span><br><span class="line">2020-05-29 20:21:41.700  INFO 9096 --- [           main] c.e.demo.test.DemoApplicationTests       : Started DemoApplicationTests in 4.224 seconds (JVM running for 5.81)</span><br><span class="line"></span><br><span class="line">2020-05-29 20:21:42.163 ERROR 9096 --- [           main] com.alibaba.druid.pool.DruidDataSource   : testWhileIdle is true, validationQuery not set</span><br><span class="line">2020-05-29 20:21:42.179  INFO 9096 --- [           main] com.alibaba.druid.pool.DruidDataSource   : &#123;dataSource-1&#125; inited</span><br><span class="line">2020-05-29 20:21:42.451 DEBUG 9096 --- [           main] c.e.demo.mapper.EmpMapper.selectAll      : ==&gt;  Preparing: select emp_id empId, emp_name empName, emp_age empAge from emp </span><br><span class="line">2020-05-29 20:21:42.490 DEBUG 9096 --- [           main] c.e.demo.mapper.EmpMapper.selectAll      : ==&gt; Parameters: </span><br><span class="line">2020-05-29 20:21:42.530 DEBUG 9096 --- [           main] c.e.demo.mapper.EmpMapper.selectAll      : &lt;==      Total: 2</span><br><span class="line">2020-05-29 20:21:42.533 DEBUG 9096 --- [           main] c.e.demo.test.DemoApplicationTests       : Emp&#123;empId=12, empName=&apos;cl&apos;, empAge=18&#125;</span><br><span class="line">2020-05-29 20:21:42.533 DEBUG 9096 --- [           main] c.e.demo.test.DemoApplicationTests       : Emp&#123;empId=14, empName=&apos;qsy&apos;, empAge=19&#125;</span><br><span class="line"></span><br><span class="line">2020-05-29 20:21:42.560  INFO 9096 --- [       Thread-1] com.alibaba.druid.pool.DruidDataSource   : &#123;dataSource-1&#125; closed</span><br><span class="line">2020-05-29 20:21:42.562  INFO 9096 --- [       Thread-1] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService &apos;applicationTaskExecutor&apos;</span><br></pre></td></tr></table></figure>
<h3 id="项目目录树"><a class="markdownIt-Anchor" href="#项目目录树"></a> 项目目录树</h3>
<p><img src="/2019/09/17/SpringBoot学习笔记/mybatis.jpg" alt="mybatis"></p>
<h4 id="pomxml"><a class="markdownIt-Anchor" href="#pomxml"></a> pom.xml</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.jupiter<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-jupiter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="src-main-resources-applicationyml"><a class="markdownIt-Anchor" href="#src-main-resources-applicationyml"></a> src-main-resources-application.yml</h4>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8888</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  thymeleaf:</span></span><br><span class="line"><span class="attr">    suffix:</span> <span class="string">.html</span></span><br><span class="line">    <span class="comment">#模板的模式，支持 HTML, XML TEXT JAVASCRIPT</span></span><br><span class="line">    <span class="comment">#    mode: HTML5</span></span><br><span class="line">    <span class="comment">#编码 可不用配置</span></span><br><span class="line"><span class="attr">    encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">    <span class="comment">#开发配置为false,避免修改模板还要重启服务器</span></span><br><span class="line"><span class="attr">    cache:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment">#配置模板路径，默认是templates，可以不用配置</span></span><br><span class="line"><span class="attr">    prefix:</span> <span class="attr">classpath:/templates/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">  datasource:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">mydb</span></span><br><span class="line"><span class="attr">    type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="attr">    url:</span> <span class="attr">jdbc:mysql://127.0.0.1:3306/smybatis?serverTimezone=UTC</span></span><br><span class="line"><span class="attr">    username:</span> <span class="string">root</span></span><br><span class="line"><span class="attr">    password:</span> <span class="string">*</span></span><br><span class="line"><span class="attr">    driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line"><span class="attr">  mapper-locations:</span> <span class="string">classpath*:/mybatis/mapper/*Mapper.xml</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">  level:</span></span><br><span class="line"><span class="attr">    com:</span></span><br><span class="line"><span class="attr">      example:</span></span><br><span class="line"><span class="attr">        demo:</span></span><br><span class="line"><span class="attr">          mapper:</span> <span class="string">debug</span></span><br><span class="line"><span class="attr">          test:</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure>
<h4 id="src-main-resources-empmapperyml"><a class="markdownIt-Anchor" href="#src-main-resources-empmapperyml"></a> src-main-resources-EmpMapper.yml</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.example.demo.mapper.EmpMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectAll"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">resultType</span>=<span class="string">"com.example.demo.entity.Emp"</span>&gt;</span></span><br><span class="line">        select emp_id empId, emp_name empName, emp_age empAge</span><br><span class="line">        from</span><br><span class="line">        emp</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注： 由于在Mybatis的mapper.xml文件中，如果resultType的type或者paramterType会返回自定义entity的话，那么需要用全类名名来指定这些实体。而一种好的便捷方法是，application.yml中可以添加mybatis-type-aliases-package: com.example.demo.mapper，其可以使用<code>type-aliases-package</code>中指定entity扫描包类从而让mybatis自己扫描到自定义的entity，直接写非限定名（短名）即可，如下所示。</p>
<ul>
<li>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.itheima.dao.ItemsDao"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"items"</span>&gt;</span></span><br><span class="line">        select * from items where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="src-main-java-demoapplicationjava"><a class="markdownIt-Anchor" href="#src-main-java-demoapplicationjava"></a> <strong>src-main-java-DemoApplication.java</strong></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.example.demo.mapper"</span>)      <span class="comment">//在上面的dao接口中，我们添加了@mapper注解，这样spring boot就可以扫描到该接口从而使用</span></span><br><span class="line"><span class="comment">// mybatis动态代理了。除了这种方式之外，可以在spring boot的启动类上添加@MapperScan注解，这样就无需再dao接口上添加@mapper注解了。</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;SpringApplication.run(DemoApplication.class, args);&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="src-main-java-comexampledemomapper"><a class="markdownIt-Anchor" href="#src-main-java-comexampledemomapper"></a> src-main-java-com.example.demo.mapper</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.demo.entity.Emp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Program</span>: demo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MrLi</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Create</span>: 2020-05-29 19:51</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmpMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Emp&gt; <span class="title">selectAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="src-main-java-comexampledemoentity"><a class="markdownIt-Anchor" href="#src-main-java-comexampledemoentity"></a> src-main-java-com.example.demo.entity</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.entity;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Program</span>: demo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: MrLi</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Create</span>: 2020-05-29 19:50</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Emp</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer empId;</span><br><span class="line">    <span class="keyword">private</span> String empName;</span><br><span class="line">    <span class="keyword">private</span> Integer empAge;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Emp</span><span class="params">(Integer empId, String empName, Integer empAge)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.empId = empId;</span><br><span class="line">        <span class="keyword">this</span>.empName = empName;</span><br><span class="line">        <span class="keyword">this</span>.empAge = empAge;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Emp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getEmpId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> empId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmpId</span><span class="params">(Integer empId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.empId = empId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmpName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> empName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmpName</span><span class="params">(String empName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.empName = empName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getEmpAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> empAge;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmpAge</span><span class="params">(Integer empAge)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.empAge = empAge;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Emp&#123;"</span> +</span><br><span class="line">                <span class="string">"empId="</span> + empId +</span><br><span class="line">                <span class="string">", empName='"</span> + empName + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", empAge="</span> + empAge +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>com.example.demo.test</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.demo.entity.Emp;</span><br><span class="line"><span class="keyword">import</span> com.example.demo.mapper.EmpMapper;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmpMapper empMapper;    <span class="comment">// IDEA上有波浪线, 提示Could not autowire. No beans of 'EmpMapper' type found. 但可运行</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(DemoApplicationTests.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Emp&gt; emps = empMapper.selectAll();</span><br><span class="line">        <span class="keyword">for</span> (Emp emp : emps) &#123;</span><br><span class="line"><span class="comment">//            System.out.println(emp);</span></span><br><span class="line">            logger.debug(emp.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>视频提供的代码配置链接: <a href="http://39.108.113.88/content/country-spring-boot/detail/spring-boot-07" target="_blank" rel="noopener">http://39.108.113.88/content/country-spring-boot/detail/spring-boot-07</a></p>
<p>上述几个整合教程来自B站: <a href="https://www.bilibili.com/video/BV1KE411K7PH/?p=20&amp;t=790" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1KE411K7PH/?p=20&amp;t=790</a></p>
<h2 id="springboot2x整合springdatajpa"><a class="markdownIt-Anchor" href="#springboot2x整合springdatajpa"></a> [SpringBoot2.x整合<a href="https://www.cnblogs.com/wadmwz/p/10313495.html" target="_blank" rel="noopener">SpringDataJPA</a></h2>
<ul>
<li>文档链接: <a href="https://www.cnblogs.com/wadmwz/p/10313495.html" target="_blank" rel="noopener">https://www.cnblogs.com/wadmwz/p/10313495.html</a></li>
<li>★B站视频链接:<a href="https://www.bilibili.com/video/BV1v4411G72q?p=8" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1v4411G72q?p=8</a>
<ul>
<li>包括之前几个内容的整合都可以观看这个视频, 这个质量高一点</li>
</ul>
</li>
</ul>
<p>代码组成:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PersonController.java</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    PersonRepository personRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findall"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Person&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Person&gt; personRepositoryAll = personRepository.findAll();</span><br><span class="line">        <span class="keyword">return</span> personRepositoryAll;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findById/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">findById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> personRepository.findById(id).get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">save</span><span class="params">(@RequestBody Person person)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> personRepository.save(person);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Person.java</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Entity</span>     <span class="comment">// ▲记得加</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@Column</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Column</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PersonRepository.java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//CREATE DATABASE if not exists person;</span></span><br><span class="line"><span class="comment">//        use person;</span></span><br><span class="line"><span class="comment">//        CREATE table if not EXISTS person (</span></span><br><span class="line"><span class="comment">//        id int(11) auto_increment,</span></span><br><span class="line"><span class="comment">//        username varchar(24) ,</span></span><br><span class="line"><span class="comment">//        `password` varchar(24),</span></span><br><span class="line"><span class="comment">//        PRIMARY key(id)</span></span><br><span class="line"><span class="comment">//        );</span></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> 需要将库和表生成好, 如果需要自动建库建表, 按照文档说明的增加jpa的properties配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PersonRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Person</span>, <span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application.yml</span></span><br><span class="line"><span class="attr">  datasource:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">mydb</span></span><br><span class="line"><span class="attr">    url:</span> <span class="attr">jdbc:mysql://127.0.0.1:3306/person?serverTimezone=UTC</span></span><br><span class="line"><span class="attr">    username:</span> <span class="string">root</span></span><br><span class="line"><span class="attr">    password:</span> <span class="string">cl123123</span></span><br><span class="line"><span class="attr">    driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">  jpa:</span></span><br><span class="line"><span class="attr">    show-sql:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    properties:</span></span><br><span class="line"><span class="attr">      hibernate:</span></span><br><span class="line"><span class="attr">        format_sql:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h1 id="2021-8-2"><a class="markdownIt-Anchor" href="#2021-8-2"></a> 2021-8-2</h1>
<h2 id="自定义mvc配置"><a class="markdownIt-Anchor" href="#自定义mvc配置"></a> 自定义MVC配置：</h2>
<blockquote>
<p>实现WebMvcConfigurer接口可以扩展MVC的功能实现，又既保留SpringBoot的自动配置（原因是：在WebMvcAutoConfiguration 也有一个实现了WebMvcConfigurer的配置类）</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DafMVCConfiguartion</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span></span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebMvcConfigurer <span class="title">corsConfigurer</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WebMvcConfigurer() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">                registry.addMapping(<span class="string">"api/**"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>为什么通过实现WebMvcConfigurer能进行配置的原理：</strong></p>
<ol>
<li>如果没有，由于WebMvcAutoConfiguration 也有一个内部类WebMvcAutoConfigurationAdapter 实现了WebMvcConfigurer的配置类，因此可以帮我们进行自动的配置</li>
<li>WebMvcAutoConfigurationAdapter 它也是利用这种方式实现WebMvcConfigurer去进行扩展的，所以我们通过查看这个类我们发现它帮我们实现了其他不常用的方法，帮助我们进行自动配置，我们只需定制（拦截器、视图控制器CORS在开发中需要额外定制的定制的功能）</li>
</ol>
<p>注： 一个方法上添加了autowired注解后，它的参数将从容器中自动注入进来。</p>
<p><strong>为什么实现WebMvcConfigurer后能work？</strong></p>
<p>A:原因是①MVC应用会自动开启WebMvcAutoConfiguration ，因此会加载WebMvcAutoConfigurationAdapter ，②而WebMvcAutoConfigurationAdapter 上有着@EnableWebMvcConfiguration注解<code>@Import({WebMvcAutoConfiguration.EnableWebMvcConfiguration.class}</code>. ③EnableWebMvcConfiguration这个类继承了DelegatingWebMvcConfiguration类（它会加载配置），④而在DelegatingWebMvcConfiguration中的<code>setConfigurers(List&lt;WebMvcConfigurer&gt; configurers)</code>方法上是有@Autowired注解，⑤因此会将所有实现了WebMvcConfigurer的Bean给注入到这个List参数中，并且全部进行设置<code>this.configurers.addWebMvcConfigurers(configurers);</code>即设置到委派类WebMvcConfigurerComposite的delegates中去。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelegatingWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> WebMvcConfigurerComposite configurers = <span class="keyword">new</span> WebMvcConfigurerComposite();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DelegatingWebMvcConfiguration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span>(required = <span class="keyword">false</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setConfigurers</span><span class="params">(List&lt;WebMvcConfigurer&gt; configurers)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!CollectionUtils.isEmpty(configurers)) &#123;</span><br><span class="line"> <span class="keyword">this</span>.configurers.addWebMvcConfigurers(configurers);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>⑥而每次调用WebMvcConfigurerComposite的addXxxx功能时都会将被委派的类的方法，从而调用了MyMVCConfiguartion我们自定义的MVC配置类下的各种addXxxx方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WebMvcConfigurerComposite</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;WebMvcConfigurer&gt; delegates = <span class="keyword">new</span> ArrayList();</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        Iterator var2 = <span class="keyword">this</span>.delegates.iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(var2.hasNext()) &#123;</span><br><span class="line">            WebMvcConfigurer delegate = (WebMvcConfigurer)var2.next();</span><br><span class="line">            delegate.addInterceptors(registry);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>from：<a href="https://zhuanlan.zhihu.com/p/273406875" target="_blank" rel="noopener">通过实现WebMvcConfigurer进行拓展MVC功能的原理</a></p>
<h2 id="全局异常处理"><a class="markdownIt-Anchor" href="#全局异常处理"></a> 全局异常处理</h2>
<p>系统内部有抛出异常的需求，但根据不要在页面上给用户显示错误，因此要进行异常捕捉</p>
<blockquote>
<p>@ExceptionHandter的含义是当前的方法是用于处理什么异常类型的</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ErrorController.java</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/xxx"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">throwError</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"yes"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ExceptionController.java</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(Exception.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyError <span class="title">processException</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MyError myError = <span class="keyword">new</span> MyError();</span><br><span class="line">        myError.setCode(<span class="number">400</span>);</span><br><span class="line">        myError.setMsg(<span class="string">"被捕捉到了"</span>);</span><br><span class="line">        <span class="keyword">return</span> myError;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// DafGlobalExceptionHandler.kt</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: 全局异常拦截器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: MrLi</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2021-08-17 17:03</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DafGlobalExceptionHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(BizException::<span class="class"><span class="keyword">class</span>)</span></span><br><span class="line">    fun processException(e: BizException): ResResult &#123;</span><br><span class="line">        <span class="keyword">return</span> ResResult.err(e.msg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="自定义异常页面"><a class="markdownIt-Anchor" href="#自定义异常页面"></a> 自定义异常页面</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyErrorPageController</span> <span class="keyword">implements</span> <span class="title">ErrorController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getErrorPath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"/error"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/error"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">errorView</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"/error"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="过滤器-监听器-拦截器"><a class="markdownIt-Anchor" href="#过滤器-监听器-拦截器"></a> 过滤器、监听器、拦截器</h2>
<blockquote>
<p>spring mvc的拦截器是只拦截controller而不拦截jsp,html 页面文件的。这就用到过滤器filter了，filter是在servlet前执行的，你也可以理解成过滤器中包含拦截器，一个请求过来 ，先进行过滤器处理，看程序是否受理该请求 。 过滤器放过后 ， 程序中的拦截器进行处理 。</p>
<ol>
<li>拦截器不依赖servlet容器，过滤器依赖；</li>
<li>拦截器是基于java反射机制来实现的，过滤器基于回调</li>
</ol>
</blockquote>
<h3 id="过滤器-的创建"><a class="markdownIt-Anchor" href="#过滤器-的创建"></a> 过滤器 的创建</h3>
<ol>
<li>
<p>创建自己的过滤器类实现javax.servlet.Filter接口</p>
</li>
<li>
<p>重写doFilter 的方法，在此方法里写过滤操作</p>
</li>
<li>
<p>在类上使用注解@WebFilter(filterName=”myFilter”,urlPatterns={“/*”})</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 使用注解标注过滤器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@WebFilter</span>将一个实现了javax.servlet.Filter接口的类定义为过滤器</span></span><br><span class="line"><span class="comment"> * 属性filterName 声明过滤器的名称,可选</span></span><br><span class="line"><span class="comment"> * 属性urlPatterns指定要过滤 的URL模式,这是一个数组参数，可以指定多个。也可使用属性value来声明.(指定要过滤的URL模式是必选属性)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebFilter</span>(filterName=<span class="string">"myFilter"</span>,urlPatterns=&#123;<span class="string">"/*"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"myfilter 的 销毁方法"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest arg0, ServletResponse arg1, FilterChain chain)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"myfilter 的 过滤方法。这里可以执行过滤操作"</span>);</span><br><span class="line">        <span class="comment">//继续下一个拦截器</span></span><br><span class="line">        chain.doFilter(arg0, arg1);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig arg0)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"myfilter 的 初始化方法"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="监听器-的创建"><a class="markdownIt-Anchor" href="#监听器-的创建"></a> 监听器 的创建</h3>
<ol>
<li>
<p>创建自己的监听类实现 ServletContextListener 接口，这个是监听servlet的</p>
</li>
<li>
<p>创建自己的监听类实现 HttpSessionListener 接口，这个是监听session 的</p>
</li>
<li>
<p>记得在自定义的监听类上添加注解@WebListener</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent arg0)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"监听 创建session"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestroyed</span><span class="params">(HttpSessionEvent arg0)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"监听 销毁session"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="拦截器-的创建"><a class="markdownIt-Anchor" href="#拦截器-的创建"></a> 拦截器 的创建</h3>
<ol>
<li>
<p>创建自己的拦截器类，实现HandlerInterceptor 接口</p>
<blockquote>
<p>实现一个HandlerInterceptor拦截器可以直接实现HandlerInterceptor接口，也可以继承HandlerInterceptorAdapter类。</p>
</blockquote>
<p><img src="https://img2018.cnblogs.com/blogl%5B480413/201903/1480413-20190302114256295-282183140.png" alt="img"></p>
</li>
<li>
<p>创建一个配置类，继承自WebMvcConfigurerAdapter ，并在类上添加注解@Configuration</p>
</li>
<li>
<p>重写addInterceptors方法，把自定义的拦截类注册进去。</p>
<p>自定义拦截器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, Exception arg3)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MyInterceptor 在整个请求结束之后被调用，也就是在DispatcherServlet 渲染了对应的视图之后执行"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, ModelAndView arg3)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MyInterceptor  请求处理之后进行调用，但是在视图被渲染之前（Controller方法调用之后）"</span>);    </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"MyInterceptor 在请求处理之前进行调用（Controller方法调用之前）这里是拦截的操作"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注册拦截器 继承 WebMvcConfigurerAdapter</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfigurer</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">         <span class="comment">// addPathPatterns 用于添加拦截规则</span></span><br><span class="line">        <span class="comment">// excludePathPatterns 排除拦截</span></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> MyInterceptor()).addPathPatterns(<span class="string">"/**"</span>).excludePathPatterns(<span class="string">"/login"</span>);</span><br><span class="line">        <span class="keyword">super</span>.addInterceptors(registry);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行过程：</p>
<ul>
<li>preHandle：Controller方法处理之前；链式Intercepter情况下，Intercepter按照声明的顺序一个接一个执行</li>
<li>postHandle：Controller方法处理完之后，DispatcherServlet进行视图的渲染之前，也就是说在这个方法中你可以对ModelAndView进行操作；</li>
<li>afterCompletion：在整个请求完成之后即，DispatcherServlet进行视图的渲染之后</li>
</ul>
<p><img src="https://img2018.cnblogs.com/blog/1480413/201903/1480413-20190302114742470-1931613310.png" alt="img"></p>
</li>
</ol>
<h2 id="事件监听"><a class="markdownIt-Anchor" href="#事件监听"></a> 事件监听</h2>
<p><strong>事件监听的流程</strong></p>
<ol>
<li>自定义事件，一般是继承ApplicationEvent抽象类</li>
<li>定义事件监听器，一般是实现ApplicationListener接口</li>
<li>需要把监听器加入到spring容器中:
<ol>
<li>可以通过启动的时候添加</li>
<li>增加Component注解</li>
<li>通过context.listener.classes配置项导入进去</li>
<li>使用@EventListener注解：在方法上加@EventListener注解，并将该类注入到spring容器中</li>
</ol>
</li>
<li>发布事件，使用ApplicationContext.publishEvent发布事件</li>
</ol>
<ul>
<li><a href="https://www.jianshu.com/p/b6036cde29fb" target="_blank" rel="noopener">spring提供的钩子，你知道哪些</a>——可注入调整的位置有哪些</li>
<li><a href="https://www.cnblogs.com/huangrenhui/p/13916319.html" target="_blank" rel="noopener">Spring笔记(7) - Spring的事件和监听机制</a>——原理</li>
<li><a href="https://www.bilibili.com/video/BV18E411F7GN?from=search&amp;seid=1165566942334976817%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8%E5%AE%9A%E4%B9%89" target="_blank" rel="noopener">https://www.bilibili.com/video/BV18E411F7GN?from=search&amp;seid=1165566942334976817——使用定义</a></li>
<li><a href="https://blog.csdn.net/lbh199466/article/details/87970479" target="_blank" rel="noopener">由Kafka事件监听回顾Java回调</a>——回调的概念</li>
</ul>
<h2 id="定时任务"><a class="markdownIt-Anchor" href="#定时任务"></a> 定时任务</h2>
<h3 id="quartz"><a class="markdownIt-Anchor" href="#quartz"></a> Quartz</h3>
<blockquote>
<p>Quartz是OpenSymphony开源组织在Job scheduling领域又一个开源项目，完全由Java开发，可以用来执行定时任务，类似于java.util.Timer。但是相较于Timer， Quartz增加了很多功能：</p>
</blockquote>
<p>组成：</p>
<ul>
<li>调度器：Scheduler，用来调度管理Trigger去执行指定的Job呢</li>
<li>任务：JobDetail</li>
<li>触发器：Trigger，包括SimpleTrigger和CronTrigger</li>
</ul>
<h3 id="schedule"><a class="markdownIt-Anchor" href="#schedule"></a> <a href="https://www.cnblogs.com/toutou/p/9802955.html" target="_blank" rel="noopener">Schedule</a></h3>
<blockquote>
<p>在springboot中可以有很多方案去帮我们完成定时器的工作，有Java自带的java.util.Timer类，也有强大的调度器Quartz，还有SpringBoot自带的Schedule ==&gt; 相对于Quartz是适用于普通Java工程，Scheduled 针对于springboot设计</p>
<table>
<thead>
<tr>
<th>框架名称</th>
<th>Cron表达式</th>
<th>固定间隔执行</th>
<th>固定频率执行</th>
<th>任务持久化</th>
<th>难易度</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://docs.oracle.com/javase/8/docs/api/java/util/TimerTask.html" target="_blank" rel="noopener">TimerTask</a></td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>一般</td>
</tr>
<tr>
<td><a href="https://spring.io/guides/gs/scheduling-tasks/" target="_blank" rel="noopener">schedule</a></td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>简单</td>
</tr>
<tr>
<td><a href="https://baike.baidu.com/item/quartz/3643055" target="_blank" rel="noopener">Quartz</a></td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>难</td>
</tr>
</tbody>
</table>
<p>在实际应用中，如果没有分布式场景(quartz 支持分布式, schedule 不支持(需要自己实现,用分布式锁)，schedule跟spring结合的更好，还是很适用的。</p>
</blockquote>
<p>SpringBoot内置了Sping Schedule定时框架，通过注解驱动方式添加所注解方法到定时任务，根据配置定时信息定时执行。</p>
<ol>
<li>无序导入依赖: Spring的Schedule包含在<strong>spring-boot-starter</strong>模块中，无需引入其他依赖。</li>
<li>在application上加上@EnableScheduling注解打开定时功能</li>
<li>在定时任务上增加注解<code>@Scheduled(cron = &quot;0/3 * * * * *&quot;)</code>
<ul>
<li>固定频率：@Scheduled(fixedRate = 3000)： 如果方法执行时间超过定时器时间, 方法执行完成后直接执行任务——补偿机制，如执行了5000ms，之后会立马把阻塞未执行的给执行了</li>
<li>固定间隔： @Scheduled(fixedDelay = 3000)： 方法执行完成后, 停留间隔时间, 再次执行该方法——如执行了5000ms后还会在等3000ms执行，不因为方法执行时间长度影响定时器</li>
<li>Cron表达式: @Scheduled(cron = “0/3 * * * * *”)：*固定按照间隔时间执行, 方法执行完成后, 按照间隔时间点再次执行该方法——比如方法执行5s, 定时间隔为3s, 则中间有一次执行不上, 不理会，而是当第二个3s间隔，即第6s开始下一次执行</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="comment">// 开启定时任务</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="meta">@MapperScan</span>(basePackages = &#123;<span class="string">"com.gupao.springboot.*.mapper"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GupaoSpringbootApplication</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(GupaoSpringbootApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Spring的Schecule默认是单线程执行的，如果你定义了多个任务，那么他们将会被串行执行，会严重不满足你的预期。所以为了解决该问题，需要自定义线程池，具体如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScheduleConfig</span> <span class="keyword">implements</span> <span class="title">SchedulingConfigurer</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configureTasks</span><span class="params">(ScheduledTaskRegistrar taskRegistrar)</span> </span>&#123;</span><br><span class="line">		taskRegistrar.setScheduler(customScheduler());</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="meta">@Bean</span>(destroyMethod = <span class="string">"shutdown"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> ExecutorService <span class="title">customScheduler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Executors.newScheduledThreadPool(<span class="number">20</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>from： <a href="https://blog.csdn.net/u011976388/article/details/85268890" target="_blank" rel="noopener">SpringBoot：@Schedule定时任务</a></p>
<h1 id="附录"><a class="markdownIt-Anchor" href="#附录"></a> 附录</h1>
<h2 id="实体类定义规则"><a class="markdownIt-Anchor" href="#实体类定义规则"></a> 实体类定义规则</h2>
<ul>
<li>PO，entity:persistent object 持久对象
<ul>
<li>有时也被称为Data对象，对应数据库中的entity，可以简单认为一个PO对应数据库中的一条记录。</li>
</ul>
</li>
<li>Vo: view object 表现层对象
<ul>
<li>主要对应页面显示（web页面/swt、swing界面）的数据对象。</li>
<li>可以和表对应，也可以不，这根据业务的需要。</li>
</ul>
</li>
<li>DTO（TO）：Data Transfer Object 数据传输对象
<ul>
<li>比如一张表有100个字段，那么对应的PO就有100个属性（大多数情况下，DTO内的数据来自多个表）。但view层只需显示10个字段，没有必要把整个PO对象传递到client，这时我们就可以用只有这10个属性的DTO来传输数据到client，这样也不会暴露server端表结构。到达客户端以后，如果用这个对象来对应界面显示，那此时它的身份就转为VO。</li>
</ul>
</li>
<li>POJO:plain ordinary java object 无规则简单java对象</li>
<li>一个中间对象，可以转化为PO、DTO、VO。</li>
<li>POJO持久化之后==&gt;PO</li>
<li>POJO用作表示层==&gt;VOI</li>
<li>POJO传输过程中==&gt;DTO</li>
</ul>
<h2 id="applicationyml常用配置"><a class="markdownIt-Anchor" href="#applicationyml常用配置"></a> application.yml常用配置</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring.mvc.static-path-pattern=classpath:/</span><br><span class="line"># 更多可查看ResourceProperties类中</span><br><span class="line"># private static final String[] CLASSPATH_RESOURCE_LOCATIONS = new String[]&#123;&quot;classpath:/META-INF/resources/&quot;, &quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot;&#125;;</span><br><span class="line"></span><br><span class="line">server.port=8889</span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tomcat相关</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8889</span></span><br><span class="line"><span class="comment"># sping相关</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  datasource:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">mydb</span></span><br><span class="line"><span class="attr">    url:</span> <span class="attr">jdbc:mysql://127.0.0.1:3306/person?serverTimezone=UTC</span></span><br><span class="line"><span class="attr">    username:</span> <span class="string">root</span></span><br><span class="line"><span class="attr">    password:</span> <span class="string">cl123123</span></span><br><span class="line"><span class="attr">    driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"> <span class="comment"># jpa相关</span></span><br><span class="line"><span class="attr"> jpa:</span></span><br><span class="line"><span class="attr">    show-sql:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    properties:</span></span><br><span class="line"><span class="attr">      hibernate:</span></span><br><span class="line"><span class="attr">        format_sql:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 关闭默认图标</span></span><br><span class="line"><span class="attr">  mvc:</span></span><br><span class="line"><span class="attr">    favicon:</span></span><br><span class="line"><span class="attr">      enabled:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># mybatis    </span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line"><span class="attr">  mapper-locations:</span> <span class="string">classpath*:/mybatis/mapper/*Mapper.xml</span></span><br><span class="line"><span class="comment"># 日志</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">  level:</span></span><br><span class="line">    <span class="string">com.atguigu.spring.boot.mapper:</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure>
<h2 id="40-个-springboot-常用注解"><a class="markdownIt-Anchor" href="#40-个-springboot-常用注解"></a> <a href="https://zhuanlan.zhihu.com/p/396439047" target="_blank" rel="noopener">40 个 SpringBoot 常用注解</a></h2>
<h2 id="properties文件能够设定哪些配置"><a class="markdownIt-Anchor" href="#properties文件能够设定哪些配置"></a> <a href="https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/htmlsingle/#common-application-properties" target="_blank" rel="noopener">properties文件能够设定哪些配置</a></h2>
<blockquote>
<p>总共列出了全部1237个配置项，以及他们的含义和默认值！</p>
</blockquote>
<h2 id="优秀的项目结构"><a class="markdownIt-Anchor" href="#优秀的项目结构"></a> 优秀的项目结构</h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">|─main</span><br><span class="line">|  |─java</span><br><span class="line">|  |  |─xyz.guqing.creek                  ------ 根包名</span><br><span class="line">|  |  |  |─aspect                          ------ aop切面</span><br><span class="line">|  |  |  |─config                         ------ springboot自动配置</span><br><span class="line">|  |  |  |─controller                     ------ controller接口</span><br><span class="line">|  |  |  |─mapper                      	  ------ mybatis mapper接口</span><br><span class="line">|  |  |  |─exception                      ------ 自定义异常</span><br><span class="line">|  |  |  |─service                        ------ service层</span><br><span class="line">|  |  |  |─model                          ------ 模型类</span><br><span class="line">|  |  |  |  |─entity                      ------ 数据库对应的实体</span><br><span class="line">|  |  |  |  |─enums                       ------ 枚举</span><br><span class="line">|  |  |  |  |─params                      ------ controller中入参数修改类型的入参数命名为xxxParam查询的为xxxQuery——————should be: DTO</span><br><span class="line">|  |  |  |  |─dto                         ------ controller出参实体——————should be: VO</span><br><span class="line">|  |  |  |  |─annotation                  ------ 自定义注解</span><br><span class="line">|  |  |  |  |─dos                         ------ 数据库组合实体例如关联查询需要多表字段组合</span><br><span class="line">|  |  |  |  |─bo                          ------ 业务逻辑实体，例如支付service方法调用支付方法传递组合参数</span><br><span class="line">|  |  |  |  |─properties                  ------ 自动配置properties实体</span><br><span class="line">|  |  |  |─factory                        ------ 自定义工厂类</span><br><span class="line">|  |  |  |─event                          ------ 自定义事件</span><br><span class="line">|  |  |  |─listener                       ------ 事件监听器</span><br><span class="line">|  |  |  |─convert                        ------ 自定义类型转换器</span><br><span class="line">|  |  |  |─handler                        ------ 处理器类</span><br><span class="line">|  |  |  |─security                       ------ spring security安全控制</span><br><span class="line">|  |  |  |─utils                          ------ 自定义工具类</span><br><span class="line">|  |─resources</span><br><span class="line">|  |  |─db                                ------ 数据库sql</span><br><span class="line">|  |  |─mapper                            ------ mybatis自定义mapper xml</span><br><span class="line">|  |  |─templates                         ------ 模板文件例如邮件模板</span><br><span class="line">|─test</span><br><span class="line">|  |─java</span><br><span class="line">|  |  |─com.happyland.ums</span><br><span class="line">|  |  |  |─service                        ------ service层单元测试类</span><br><span class="line">|  |  |  |─utils                          ------ 自定义工具单元测试类</span><br></pre></td></tr></table></figure>
<h2 id="postconstruct-实操"><a class="markdownIt-Anchor" href="#postconstruct-实操"></a> @PostConstruct 实操</h2>
<blockquote>
<p>@PostConstruct 是个类初始化后执行的钩子注解，用来执行类初始化之后、类正式投入之前需要执行的方法</p>
<p>在非拦截器类上定义的方法必须具有以下签名：<code>void &lt;METHOD&gt;（）</code>应用PostConstruct的方法可以是public，protected，package private或private。</p>
<p>关于类初始化@PostConstruct 、@Autowired和Construct构造函数 顺序为：1.构造函数 &gt; 2.@Autowired  &gt; 3.@PostConstruct 。</p>
<p>如果一个类BeanA中上述三者都有，且@Autowired注入的类BeanB中也都有上述三者，则调用顺序为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; 这是 Bean A 的构造方法</span><br><span class="line">&gt; 这是 Bean B 的构造方法</span><br><span class="line">&gt; 这是 Bean B 的 init 方法</span><br><span class="line">&gt; 这是 Bean A 的 init 方法</span><br><span class="line">&gt; 这是 Bean B 的 testB 方法</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>: MQTT配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: MrLi</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span>: 2021-10-11 18:23</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:mqtt.properties"</span>)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MqttConfiguration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;url&#125;"</span>)</span><br><span class="line">    <span class="keyword">public</span> String host;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;consumer.defaultTopic&#125;"</span>)</span><br><span class="line">    <span class="keyword">public</span> String topic;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;username&#125;"</span>)</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;password&#125;"</span>)</span><br><span class="line">    <span class="keyword">public</span> String passWord;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MQTT客户端实例，其中配置是通过MqttConfiguration拿到的。先执行IotMqttClient的构造函数（无），然后执行@Autowired的mqttConfiguration，然后拿到mqttConfiguration实例对象后执行IotMqttClient自身@PostConstruct的init函数，完成连接</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IotMqttClient</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MqttConfiguration mqttConfiguration;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MqttClient client;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; subedTopics = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// clientId不能重复所以这里我设置为系统时间</span></span><br><span class="line">        String clientId = String.valueOf(System.currentTimeMillis());</span><br><span class="line">        <span class="keyword">int</span> qos = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// host为主机名，clientid即连接MQTT的客户端ID，一般以唯一标识符表示，MemoryPersistence设置clientid的保存形式，默认为以内存保存</span></span><br><span class="line">            client = <span class="keyword">new</span> MqttClient(mqttConfiguration.host, clientId, <span class="keyword">new</span> MemoryPersistence());</span><br><span class="line">            <span class="comment">// 设置回调</span></span><br><span class="line">            client.setCallback(<span class="keyword">new</span> ReportMqtt(<span class="keyword">this</span>));</span><br><span class="line">            client.connect(makeUpMqttOption());</span><br><span class="line">            subscribe(mqttConfiguration.topic, qos);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.info(<span class="string">"ReportMqtt客户端连接异常，异常信息："</span> + e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> MqttConnectOptions <span class="title">makeUpMqttOption</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// MQTT的连接设置</span></span><br><span class="line">        MqttConnectOptions options = <span class="keyword">new</span> MqttConnectOptions();</span><br><span class="line">        <span class="comment">// 设置是否清空session,这里如果设置为false表示服务器会保留客户端的连接记录，这里设置为true表示每次连接到服务器都以新的身份连接</span></span><br><span class="line">        options.setCleanSession(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 设置连接的用户名</span></span><br><span class="line">        options.setUserName(mqttConfiguration.name);</span><br><span class="line">        <span class="comment">// 设置连接的密码</span></span><br><span class="line">        options.setPassword(mqttConfiguration.passWord.toCharArray());</span><br><span class="line">        <span class="comment">// 设置超时时间 单位为秒</span></span><br><span class="line">        options.setConnectionTimeout(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">// 设置会话心跳时间 单位为秒 服务器会每隔1.5*20秒的时间向客户端发送个消息判断客户端是否在线，但这个方法并没有重连的机制</span></span><br><span class="line">        options.setKeepAliveInterval(<span class="number">3600</span>);</span><br><span class="line">        <span class="keyword">return</span> options;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发布，默认qos为0，非持久化</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">publish</span><span class="params">(String topic, String pushMessage)</span> </span>&#123;</span><br><span class="line">        publish(<span class="number">0</span>, <span class="keyword">false</span>, topic, pushMessage);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发布</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">publish</span><span class="params">(<span class="keyword">int</span> qos, <span class="keyword">boolean</span> retained, String topic, String pushMessage)</span> </span>&#123;</span><br><span class="line">        MqttMessage message = <span class="keyword">new</span> MqttMessage();</span><br><span class="line">        message.setQos(qos);</span><br><span class="line">        message.setRetained(retained);</span><br><span class="line">        message.setPayload(pushMessage.getBytes());</span><br><span class="line"></span><br><span class="line">        MqttTopic mTopic = client.getTopic(topic);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == mTopic) &#123;</span><br><span class="line">            log.error(<span class="string">"topic not exist"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            MqttDeliveryToken token = mTopic.publish(message);</span><br><span class="line"><span class="comment">//            token.waitForCompletion();</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (MqttPersistenceException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MqttException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 订阅某个主题，qos默认为0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(String topic)</span> </span>&#123;</span><br><span class="line">        subscribe(topic, <span class="number">0</span>);</span><br><span class="line">        subedTopics.add(topic);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 订阅某个主题</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(String topic, <span class="keyword">int</span> qos)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            client.subscribe(topic, qos);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MqttException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><!-- lincense--><div class="license-wrapper"><p> <span>Author:  </span><a href="https://nymrli.top">Mrli</a></p><p> <span>Link:  </span><a href="https://nymrli.top/2019/09/17/SpringBoot学习笔记/">https://nymrli.top/2019/09/17/SpringBoot学习笔记/</a></p><p> <span>Copyright:  </span><span>All articles in this blog are licensed under <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/3.0">CC BY-NC-SA 3.0</a> unless stating additionally.</span></p></div><div class="post-paginator"><a class="prevSlogan" href="/2019/09/17/常用域名记录解释/" title="常用域名记录解释"><span>< PreviousPost</span><br><span class="prevTitle">常用域名记录解释</span></a><a class="nextSlogan" href="/2019/09/14/如何成为一位老司机——考驾照经历/" title="如何成为一位老司机——考驾照经历"><span>NextPost ></span><br><span class="nextTitle">如何成为一位老司机——考驾照经历</span></a><div class="clear"></div></div><div id="comment"><div id="container"></div><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
  id: 'SpringBoot学习笔记',
  owner: 'Freedomisgood',
  repo: 'Freedomisgood.github.io',
  oauth: {
    client_id: 'bc5a81fe36017dcd8b63',
    client_secret: '949cec3a1b91742c6249c47259791e4b80a6fa69',
  },
})
gitment.render('container')</script></div></section></article><footer id="cxo-footer-outer"><div id="cxo-footer-inner"><p class="footer-container"><span>Site by </span><a href="http://hexo.io"><span>Hexo</span></a><span> | theme </span><a href="https://github.com/Longlongyu/hexo-theme-Cxo"><span>Cxo</span></a></p><p class="beian"><a href="https://beian.miit.gov.cn/"> <span>备案号:苏ICP备18015439号</span></a></p><i class="fa fa-user"> </i><span id="busuanzi_value_site_uv"></span><span> | </span><i class="fa fa-eye"> </i><span id="busuanzi_value_site_pv"></span></div></footer><!-- catelog--><div class="toc-wrapper" style="top: 60vh;"><div class="toc-catalog"><i class="fa fa-list"> </i><span>CATALOG</span></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#spring-boot"><span class="toc-number">1.</span> <span class="toc-text"> Spring Boot</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#springmvc流程图"><span class="toc-number">1.1.</span> <span class="toc-text"> SpringMVC流程图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hello-word"><span class="toc-number">1.2.</span> <span class="toc-text"> hello word</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#controller的使用"><span class="toc-number">1.3.</span> <span class="toc-text"> Controller的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库管理"><span class="toc-number">1.4.</span> <span class="toc-text"> 数据库管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#启用jpa"><span class="toc-number">1.4.1.</span> <span class="toc-text"> 启用JPA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#增删改查curd"><span class="toc-number">1.4.2.</span> <span class="toc-text"> 增删改查CURD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义搜索方式findbyage"><span class="toc-number">1.4.3.</span> <span class="toc-text"> 自定义搜索方式findByAge</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库事务管理"><span class="toc-number">1.4.4.</span> <span class="toc-text"> 数据库事务管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#运行模式"><span class="toc-number">1.5.</span> <span class="toc-text"> 运行模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#热加载"><span class="toc-number">1.6.</span> <span class="toc-text"> 热加载：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2020529"><span class="toc-number">2.</span> <span class="toc-text"> 2020.5.29</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#注解含义"><span class="toc-number">2.1.</span> <span class="toc-text"> 注解含义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#springbootapplication内容-configuration配置相关"><span class="toc-number">2.1.1.</span> <span class="toc-text"> @SpringBootApplication内容-&gt;configuration配置相关</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#springboot工作原理"><span class="toc-number">2.2.</span> <span class="toc-text"> SpringBoot工作原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring-boot自动配置原理"><span class="toc-number">2.3.</span> <span class="toc-text"> spring boot自动配置原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#springboot启动类"><span class="toc-number">2.4.</span> <span class="toc-text"> Springboot启动类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置文件"><span class="toc-number">2.5.</span> <span class="toc-text"> 配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#通过profile指定加载app配置文件"><span class="toc-number">2.5.1.</span> <span class="toc-text"> 通过profile指定加载app配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#外部配置文件"><span class="toc-number">2.5.2.</span> <span class="toc-text"> 外部配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#属性注入"><span class="toc-number">2.5.3.</span> <span class="toc-text"> 属性注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自动配置"><span class="toc-number">2.5.4.</span> <span class="toc-text"> 自动配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#springboot2x整合redis"><span class="toc-number">2.6.</span> <span class="toc-text"> SpringBoot2.x整合redis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#springboot2x整合thymeleaf"><span class="toc-number">2.7.</span> <span class="toc-text"> SpringBoot2.x整合Thymeleaf</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题罗列"><span class="toc-number">2.7.1.</span> <span class="toc-text"> 问题罗列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#成功案例"><span class="toc-number">2.7.2.</span> <span class="toc-text"> 成功案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#thymeleaf语法"><span class="toc-number">2.7.3.</span> <span class="toc-text"> Thymeleaf语法:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#springboot2x整合mybatis"><span class="toc-number">2.8.</span> <span class="toc-text"> SpringBoot2.x整合Mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#项目目录树"><span class="toc-number">2.8.1.</span> <span class="toc-text"> 项目目录树</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pomxml"><span class="toc-number">2.8.1.1.</span> <span class="toc-text"> pom.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#src-main-resources-applicationyml"><span class="toc-number">2.8.1.2.</span> <span class="toc-text"> src-main-resources-application.yml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#src-main-resources-empmapperyml"><span class="toc-number">2.8.1.3.</span> <span class="toc-text"> src-main-resources-EmpMapper.yml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#src-main-java-demoapplicationjava"><span class="toc-number">2.8.1.4.</span> <span class="toc-text"> src-main-java-DemoApplication.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#src-main-java-comexampledemomapper"><span class="toc-number">2.8.1.5.</span> <span class="toc-text"> src-main-java-com.example.demo.mapper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#src-main-java-comexampledemoentity"><span class="toc-number">2.8.1.6.</span> <span class="toc-text"> src-main-java-com.example.demo.entity</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#springboot2x整合springdatajpa"><span class="toc-number">2.9.</span> <span class="toc-text"> [SpringBoot2.x整合SpringDataJPA</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2021-8-2"><span class="toc-number">3.</span> <span class="toc-text"> 2021-8-2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义mvc配置"><span class="toc-number">3.1.</span> <span class="toc-text"> 自定义MVC配置：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#全局异常处理"><span class="toc-number">3.2.</span> <span class="toc-text"> 全局异常处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义异常页面"><span class="toc-number">3.3.</span> <span class="toc-text"> 自定义异常页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#过滤器-监听器-拦截器"><span class="toc-number">3.4.</span> <span class="toc-text"> 过滤器、监听器、拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#过滤器-的创建"><span class="toc-number">3.4.1.</span> <span class="toc-text"> 过滤器 的创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#监听器-的创建"><span class="toc-number">3.4.2.</span> <span class="toc-text"> 监听器 的创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#拦截器-的创建"><span class="toc-number">3.4.3.</span> <span class="toc-text"> 拦截器 的创建</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事件监听"><span class="toc-number">3.5.</span> <span class="toc-text"> 事件监听</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#定时任务"><span class="toc-number">3.6.</span> <span class="toc-text"> 定时任务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#quartz"><span class="toc-number">3.6.1.</span> <span class="toc-text"> Quartz</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#schedule"><span class="toc-number">3.6.2.</span> <span class="toc-text"> Schedule</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#附录"><span class="toc-number">4.</span> <span class="toc-text"> 附录</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#实体类定义规则"><span class="toc-number">4.1.</span> <span class="toc-text"> 实体类定义规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#applicationyml常用配置"><span class="toc-number">4.2.</span> <span class="toc-text"> application.yml常用配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#40-个-springboot-常用注解"><span class="toc-number">4.3.</span> <span class="toc-text"> 40 个 SpringBoot 常用注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#properties文件能够设定哪些配置"><span class="toc-number">4.4.</span> <span class="toc-text"> properties文件能够设定哪些配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#优秀的项目结构"><span class="toc-number">4.5.</span> <span class="toc-text"> 优秀的项目结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#postconstruct-实操"><span class="toc-number">4.6.</span> <span class="toc-text"> @PostConstruct 实操</span></a></li></ol></li></ol></div><!-- top--><i class="fa fa-arrow-up close" id="go-up" aria-hidden="true"></i></body></html>