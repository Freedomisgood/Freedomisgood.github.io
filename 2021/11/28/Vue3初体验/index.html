<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="author" content="Mrli"><meta name="renderer" content="webkit"><meta name="copyright" content="Mrli"><meta name="keywords" content="Mrli's Blog"><meta name="description" content="想和你讲，说了会心动 ，缄默会心安。"><meta name="Cache-Control" content="no-cache"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Vue3初体验 · Mr.li's Blog</title><link rel="stylesheet" href="/css/style.css?v=2018.7.9"><link rel="stylesheet" href="/css/animation.css?v=2018.7.9"><link rel="icon" href="/img/assets/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.6"><!-- scripts--><script>(function( w ){
  "use strict";
  // rel=preload support test
  if( !w.loadCSS ){
    w.loadCSS = function(){};
  }
  // define on the loadCSS obj
  var rp = loadCSS.relpreload = {};
  // rel=preload feature support test
  // runs once and returns a function for compat purposes
  rp.support = (function(){
    var ret;
    try {
      ret = w.document.createElement( "link" ).relList.supports( "preload" );
    } catch (e) {
      ret = false;
    }
    return function(){
      return ret;
    };
  })();

  // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
  // then change that media back to its intended value on load
  rp.bindMediaToggle = function( link ){
    // remember existing media attr for ultimate state, or default to 'all'
    var finalMedia = link.media || "all";

    function enableStylesheet(){
      link.media = finalMedia;
    }

    // bind load handlers to enable media
    if( link.addEventListener ){
      link.addEventListener( "load", enableStylesheet );
    } else if( link.attachEvent ){
      link.attachEvent( "onload", enableStylesheet );
    }

    // Set rel and non-applicable media type to start an async request
    // note: timeout allows this to happen async to let rendering continue in IE
    setTimeout(function(){
      link.rel = "stylesheet";
      link.media = "only x";
    });
    // also enable media after 3 seconds,
    // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
    setTimeout( enableStylesheet, 3000 );
  };

  // loop through link elements in DOM
  rp.poly = function(){
    // double check this to prevent external calls from running
    if( rp.support() ){
      return;
    }
    var links = w.document.getElementsByTagName( "link" );
    for( var i = 0; i < links.length; i++ ){
      var link = links[ i ];
      // qualify links to those with rel=preload and as=style attrs
      if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
        // prevent rerunning on link
        link.setAttribute( "data-loadcss", true );
        // bind listeners to toggle media back
        rp.bindMediaToggle( link );
      }
    }
  };

  // if unsupported, run the polyfill
  if( !rp.support() ){
    // run once at least
    rp.poly();

    // rerun poly on an interval until onload
    var run = w.setInterval( rp.poly, 500 );
    if( w.addEventListener ){
      w.addEventListener( "load", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    } else if( w.attachEvent ){
      w.attachEvent( "onload", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    }
  }


  // commonjs
  if( typeof exports !== "undefined" ){
    exports.loadCSS = loadCSS;
  }
  else {
    w.loadCSS = loadCSS;
  }
}( typeof global !== "undefined" ? global : this ) );</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" defer></script><script src="/js/main.js?v=2018.7.9" defer></script><!-- fancybox--><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script><!-- busuanzi--><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></head><body><section class="profile-close" id="cxo-profile"><div class="profile-avatar"><i class="fa fa-caret-left"></i><img src="https://avatars1.githubusercontent.com/u/31088082?s=400&amp;u=7a99ff83916afb3f4c5312bd78a1be17fe0e34ed&amp;v=4"></div><!--.profile-saying
  i.fa.fa-comment
  .saying--><div class="cxo-profile-inner"><div class="profile-name">Mrli</div><div class="profile-signature">别装作很努力,<br>因为结局不会陪你演戏。</div><div class="contacts"><div>Contacts:</div><span><a href="http://sighttp.qq.com/msgrd?v=1&amp;uin=1063052964" target="_black">QQ</a></span><span><a href="https://www.cnblogs.com/nymrli/" target="_black">博客园</a></span></div><div class="read-progress"></div></div></section><header id="cxo-intro" style="height: 60vh;background-image: url(/img/intro/index-bg.png);"><nav id="cxo-intro-nav"><section><div class="intro-nav-title"><a href="/">Mr.li's Blog</a></div><div class="intro-nav-label-box"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div><i class="fa fa-bars intro-nav-menu"><div class="intro-nav-drop"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div></i><div class="clear"></div></section></nav><h1 class="post-title">Vue3初体验</h1><div class="post-intros"><div class="post-intro-meta"><span class="post-intro-time"><i class="post-intro-calendar fa fa-edit"></i><span>2022/03/29</span></span><span class="busuanzi-pv" id="busuanzi_container_page_pv"><i class="post-intro-calendar fa fa-user-o"></i><span id="busuanzi_value_page_pv"></span></span><span class="post-intro-tags"><a class="intro-tag fa fa-tag" href="javascript:void(0)" date-tags="前端"> 前端</a><a class="intro-tag fa fa-tag" href="javascript:void(0)" date-tags="Vue"> Vue</a></span></div><div class="post-intro-read"><span> Word count: <span class="post-count">8,757</span> | Reading time: <span class="post-count">39</span>min</span></div></div></header><article class="cxo-up" id="cxo-content-outer"><section id="cxo-content-inner"><article class="article-entry" id="post"><p>Vue3于2020年09月18日正式发布，映入我视野的新东西除了Vue3以外，还有yarn和vite。他们两个本身的功能并不是新东西，yarn对标的是npm包管理工具，vite对标的webpack包打包工具。</p>
<p>与vue2不同的是，vue3工程中没有 build 文件， 相应的build/index.js的配置改由了项目根目录下vue.config.js承担</p>
<h1 id="vue3新特性"><a class="markdownIt-Anchor" href="#vue3新特性"></a> Vue3新特性</h1>
<ol>
<li>
<p>template标签下面可以有多个节点了，终于不用先写一个DIV了</p>
</li>
<li>
<p>setup函数可以代替之前的data，methods，computed，watch，Mounted等对象，但是props声明还是在外面。</p>
</li>
</ol>
<blockquote>
<p>相比于Vue采用的OPTIONS API，Vue3使用的为Composition-API</p>
</blockquote>
<ol start="3">
<li>
<p>vue3.0允许一个组件有多个根节点<br>
创建一个组件：通常，我们通过在最外层包裹一层 div 来创建一个组件，但这个div元素一般没有任何使用价值，就只是让模板符合单根需求。</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;     &lt;!--只是来包装一下, 如果不加这一行会报错--&gt;</span><br><span class="line">    &lt;div&gt;Node 1&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;Node 2&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>但在Vue3中支持多根即多个<code>&lt;div&gt;</code>、 甚至不写div也没问题</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;    </span><br><span class="line">    &#123;&#123; msg1 &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; msg2 &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>原因是Vue.js 3.0 支持了 <a href="https://v3.vuejs.org/guide/migration/fragments.html" target="_blank" rel="noopener">Fragments </a>的语法，具体原理没分析。</p>
</li>
</ol>
<h2 id="composition-api"><a class="markdownIt-Anchor" href="#composition-api"></a> Composition-Api</h2>
<h3 id="setup-函数"><a class="markdownIt-Anchor" href="#setup-函数"></a> setup() 函数</h3>
<blockquote>
<p>一组低侵入式的、函数式的 API，使得我们能够更灵活地「组合」组件的逻辑。</p>
</blockquote>
<p>在学习 Composition-Api 之前，我们需要先了解一下 setup() 函数。 setup() 是 Vue3 中的新增内容。它为基于 Composition API 的新特性提供了统一的入口。</p>
<blockquote>
<p>在Vue3中，定义 methods、watch、computed、data数据 等都放在了 setup() 函数中</p>
</blockquote>
<ol>
<li>
<p>执行时机<br>
setup()函数会在created()生命周期之前执行。</p>
</li>
<li>
<p>参数</p>
</li>
</ol>
<ul>
<li>setup() 函数的第一个参数是 props ，组件接收的 props 数据可以在 setup() 函数内访问到。</li>
<li>context 是 setup() 的第二个参数，它是一个上下文对象，可以通过 context 来访问Vue的实例 this 。<br>
注意：在 setup() 函数中访问不到Vue的 this 实例， 需要通过context来取</li>
</ul>
<h3 id="具体函数"><a class="markdownIt-Anchor" href="#具体函数"></a> 具体函数</h3>
<h4 id="数据"><a class="markdownIt-Anchor" href="#数据"></a> 数据</h4>
<blockquote>
<p>在Vue2.x的版本中，我们只需要在 data() 中定义一个数据就能将它变为响应式数据，在 Vue3.0 中，需要用 reactive 函数或者 ref 来创建响应式数据。</p>
</blockquote>
<p><strong>reactive()</strong><br>
reactive() 函数接收一个普通的对象，返回出一个响应式对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在组件库中引入 reactive</span></span><br><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">'@vue/    composition-api'</span></span><br><span class="line"></span><br><span class="line">setup() &#123;</span><br><span class="line">    <span class="comment">// 创建响应式对象</span></span><br><span class="line">    <span class="keyword">const</span> state = reactive(&#123;</span><br><span class="line">        count:<span class="number">0</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将响应式对象return出去，暴露给模板使用</span></span><br><span class="line">    <span class="keyword">return</span> state;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ref()</strong><br>
ref() 函数可以根据给定的值来创建一个响应式的数据对象，返回值是一个对象，且只包含一个 .value 属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入 ref</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">'@vue/composition-api'</span></span><br><span class="line"></span><br><span class="line">setup() &#123;</span><br><span class="line">    <span class="comment">// 创建响应式对象</span></span><br><span class="line">    <span class="keyword">const</span> count = ref(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        count</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ref 的注意事项</p>
<ul>
<li>在 setup() 函数内，由 ref() 创建的响应式数据返回的是对象，所以需要用 .value 来访问；</li>
<li>而在 setup() 函数外部则不需要 .value ，直接访问即可。 ==&gt; <code>&lt;template&gt;</code>中直接使用响应式数据: 响应式对象里面如果有ref包装的值类型。则Vue会实现自动拆箱</li>
<li>可以在 reactive 对象中访问 ref() 函数创建的响应式数据。</li>
<li>新的 ref() 会覆盖旧的 ref() 。</li>
<li>选择 reactive 还是 ref
<ul>
<li>如， new Date().getMonth()返回的是Number， 通过<code>const m = ref(new Date().getMonth())</code>可以直接拆包获得值，而不是使用reactive。但需要</li>
<li>注意的是，使用m的时候，应该使用<code>m.value</code></li>
</ul>
</li>
<li>reactive无需.value来获得值，而是直接通过<code>xx.prop</code>获取即可</li>
</ul>
<p>Vue3 —— 创建响应式数据使用 reactive 还是 ref ？（本周更新）</p>
<p><strong>computed()</strong></p>
<blockquote>
<p>computed() 用来创建计算属性，返回值是一个 ref() 实例。按照惯例，使用前需要先引入。</p>
</blockquote>
<ul>
<li>computed创建只读计算属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> count = ref(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个计算属性，使其值比 count 大 1</span></span><br><span class="line"><span class="keyword">const</span> bigCount = computed(<span class="function"><span class="params">()</span> =&gt;</span> count.value + <span class="number">1</span>)        <span class="comment">// 即如果只有一个函数，且没有声明是get还是set默认为get只读</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bigCount.value) <span class="comment">// 输出 2</span></span><br><span class="line">bigCount.value++ <span class="comment">// error 不可写</span></span><br></pre></td></tr></table></figure>
<ul>
<li>computed创建可读可写计算属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> count = ref(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个 computed 计算属性，传入一个对象</span></span><br><span class="line"><span class="keyword">const</span> bigCount = computed(&#123;</span><br><span class="line">    <span class="comment">// 取值函数</span></span><br><span class="line">    get: <span class="function"><span class="params">()</span> =&gt;</span> (count.value + <span class="number">1</span>),</span><br><span class="line">    <span class="comment">// 赋值函数</span></span><br><span class="line">    set: <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">      count.value = val - <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给计算属性赋值的操作，会触发 set 函数</span></span><br><span class="line">bigCount.value = <span class="number">9</span></span><br><span class="line"><span class="comment">// 触发 set 函数后，count 的值会被更新</span></span><br><span class="line"><span class="built_in">console</span>.log(count.value) <span class="comment">// 8</span></span><br></pre></td></tr></table></figure>
<p><strong>readonly()</strong></p>
<p>传入一个响应式对象、普通对象或 ref ，返回一个只读的对象代理。这个代理是深层次的，对象内部的数据也是只读的。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = reactive(&#123; <span class="attr">count</span>: <span class="number">0</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> copy = readonly(state)</span><br></pre></td></tr></table></figure>
<h4 id="函数"><a class="markdownIt-Anchor" href="#函数"></a> 函数</h4>
<p>以前是写在methods对象中，现在是声明函数后放回</p>
<h4 id="侦听"><a class="markdownIt-Anchor" href="#侦听"></a> 侦听</h4>
<p><strong>watch()</strong></p>
<blockquote>
<p>composition-api 中的 watch 和 Vue2.x 中是一样的，watch 需要侦听数据，并执行它的侦听回调。默认情况下初次渲染不执行。</p>
<p>应用场景： 监听路由变化（路由变化的监听在Vue生命周期函数中实现都不合适，放watch中比较合适）</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 侦听一个 getter</span></span><br><span class="line"><span class="keyword">const</span> state = reactive(&#123; <span class="attr">count</span>: <span class="number">0</span> &#125;)</span><br><span class="line">watch(</span><br><span class="line">  () =&gt; state.count,</span><br><span class="line">  (count, prevCount) =&gt; &#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接侦听一个 ref</span></span><br><span class="line"><span class="keyword">const</span> count = ref(<span class="number">0</span>)</span><br><span class="line">watch(count, (count, prevCount) =&gt; &#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>watch 与 watchEffect 的不同</p>
<ul>
<li>watch 初次渲染不执行</li>
<li>watch 侦听的更具体</li>
<li>watch 可以访问侦听数据变化前后的值</li>
</ul>
<p>from: <a href="https://blog.csdn.net/qq_42941302/article/details/107819669" target="_blank" rel="noopener">Vue3 的新特性(二) —— Composition-Api</a></p>
<p>总结:</p>
<ul>
<li>Composition API 的入口在 setup() 函数中
<ul>
<li>reactive 响应式对象</li>
<li>ref 接收一个参数并返回响应式对象</li>
</ul>
</li>
<li>原先在 Vue2 中的 methods，watch，component、data 均写在 setup() 函数，使用之前需要自行导入</li>
<li>回归了 function xxx 定义函数</li>
</ul>
<p>注：</p>
<ul>
<li>OnMounted()、watch()、computed()中间传的都是匿名函数，而不是对象</li>
<li>在setup中取值不能使用this, this在composition中是undefine.</li>
<li>所以vue2代码用到vue3中时得把this删了(比如function), data的话还得加<code>.value</code></li>
<li>双向绑定的变量在setup中定义时要加ref，修改变量的值时要加value</li>
</ul>
<h2 id="vue2-vue3废弃的api"><a class="markdownIt-Anchor" href="#vue2-vue3废弃的api"></a> Vue2-&gt;Vue3废弃的API</h2>
<ul>
<li>
<p>filters过滤器：由于</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; accountBalance | currencyUSD &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>打破了大括号内的表达式“只是 JavaScript”的假设，这不仅有学习成本，而且有实现成本。==&gt;在 3.x 中，过滤器已移除，且不再支持。取而代之的是，我们建议用方法调用或计算属性来替换它们。</p>
</li>
</ul>
<h2 id="vue-optionalapi可以使用"><a class="markdownIt-Anchor" href="#vue-optionalapi可以使用"></a> Vue optionalAPI可以使用</h2>
<ul>
<li>this.$store.state</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    isLoginOpen() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.isLoginOpen;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">    close() &#123;</span><br><span class="line">      <span class="keyword">this</span>.$store.commit(<span class="string">"setLoginModal"</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>this.$refs</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$refs.emailRef.focus</span><br></pre></td></tr></table></figure>
<ul>
<li>this.$data</li>
<li>this.$axios</li>
</ul>
<h1 id="附录"><a class="markdownIt-Anchor" href="#附录"></a> 附录</h1>
<h3 id="导入vuex和vue-router"><a class="markdownIt-Anchor" href="#导入vuex和vue-router"></a> 导入vuex和vue-router</h3>
<h4 id="vue-router使用"><a class="markdownIt-Anchor" href="#vue-router使用"></a> vue-router使用</h4>
<p><code>yarn add vue-router@next --dev</code>, 参数说明<code>packageName@tag</code>or<code>packageName@version</code><br>
创建<a href="https://router.vuejs.org/zh/guide/essentials/passing-props.html#%E5%B8%83%E5%B0%94%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">router/index.js</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">"vue-router"</span>;</span><br><span class="line"><span class="keyword">import</span> ShowList <span class="keyword">from</span> <span class="string">"../components/ShowList.vue"</span></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">    history: createWebHistory(),</span><br><span class="line">    routes: [</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">"/show"</span>,</span><br><span class="line">            component: ShowList</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">        path: <span class="string">"/login"</span>,</span><br><span class="line">        name: <span class="string">"Login"</span>,				</span><br><span class="line">        newB: <span class="string">"yes"</span>, 				<span class="comment">// 还可以自定义对象的属性值, 方便之后获取import routes from "@/router/routes";  ==&gt; 如naive的菜单组件中是要获得key的, 这边就可以绑定个key</span></span><br><span class="line">        meta: &#123;</span><br><span class="line">            title: <span class="string">'登录'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 懒加载</span></span><br><span class="line">        component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span> ( <span class="comment">/* webpackChunkName: "login" */</span> <span class="string">"../views/Login.vue"</span>)</span><br><span class="line">    &#125;,&#123; </span><br><span class="line">        path: <span class="string">'/user/:id'</span>, 		<span class="comment">// 如/user/111, router-link to="/user/111"也行。注id为params参数,  User.vue中通过      &#123;&#123; $route.params.id &#125;&#125; 获取</span></span><br><span class="line">      components: &#123; <span class="attr">default</span>: User, <span class="attr">sidebar</span>: Sidebar &#125;,</span><br><span class="line">        <span class="comment">/**在组件中使用 $route 会使之与其对应路由形成高度耦合，从而使组件只能在某些特定的 URL 上使用，限制了其灵活性。可以使用 props 将组件和路由解耦：这样你便可以在任何地方使用该组件，使得该组件更易于重用和测试。 */</span></span><br><span class="line">      props: &#123; <span class="attr">default</span>: <span class="literal">true</span>, <span class="attr">sidebar</span>: <span class="literal">false</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`<span class="subst">$&#123;to.meta.title&#125;</span> | vue-manage-system`</span>;</span><br><span class="line">    <span class="keyword">const</span> role = localStorage.getItem(<span class="string">'ms_username'</span>);</span><br><span class="line">    <span class="keyword">if</span> (!role &amp;&amp; to.path !== <span class="string">'/login'</span>) &#123;</span><br><span class="line">        next(<span class="string">'/login'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (to.meta.permission) &#123;</span><br><span class="line">        <span class="comment">// 如果是管理员权限则可进入，这里只是简单的模拟管理员权限而已</span></span><br><span class="line">        role === <span class="string">'admin'</span></span><br><span class="line">            ? next()</span><br><span class="line">            : next(<span class="string">'/403'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<ul>
<li>app下进行router跳转</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        // 下面的叫声明式</span><br><span class="line">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span> |</span><br><span class="line">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/show"</span>&gt;</span>show<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span>|</span><br><span class="line">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/hello"</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span>|</span><br><span class="line">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"&#123;name: 'antd', params: &#123; id: 2 &#125;&#125;"</span>&gt;</span>antd<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>/&gt;</span></span><br><span class="line">      </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>router-link</strong> 实现路由之间的跳转，如点击show超链接则会跳转到<code>http://localhost:8080/show</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="comment">&lt;!-- 字符串 --&gt;</span></span><br><span class="line">&gt; <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"home"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">&gt; <span class="comment">&lt;!-- 渲染结果 --&gt;</span></span><br><span class="line">&gt; <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"home"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="comment">&lt;!-- 同上 --&gt;</span></span><br><span class="line">&gt; <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"&#123; path: 'home' &#125;"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">&gt; <span class="comment">&lt;!-- 命名的路由 --&gt;</span></span><br><span class="line">&gt; <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"&#123; name: 'user', params: &#123; userId: 123 &#125;&#125;"</span>&gt;</span>User<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">&gt; <span class="comment">&lt;!-- 带查询参数，下面的结果为 /register?plan=private --&gt;</span></span><br><span class="line">&gt; <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"&#123; path: 'register', query: &#123; plan: 'private' &#125;&#125;"</span>&gt;</span>Register<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>视图：<strong>router-view</strong> 当<strong>路由的path 与访问的地址相符时</strong>，会<strong>将指定的组件内容</strong>替换该 router-view，如果不点击而是直接将URL换成<code>http://localhost:8080/show</code>也会显示ShowList.vue的内容（为什么是ShowList.vue？是因为router/index.js中将<code>path=''/show'</code>与ShowList.vue绑定了）</p>
<p><a href="https://router.vuejs.org/zh/guide/essentials/named-views.html#%E5%B5%8C%E5%A5%97%E5%91%BD%E5%90%8D%E8%A7%86%E5%9B%BE" target="_blank" rel="noopener">命名视图</a></p>
</blockquote>
<ul>
<li>子vue中点击按钮后进行router跳转</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">// vue2写法</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">submitForm</span>(<span class="params">formName</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.$refs[formName].validate(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">                <span class="keyword">this</span>.$router.push(&#123;<span class="attr">name</span>: <span class="string">"Mainwithout"</span>, <span class="attr">params</span>: &#123;<span class="attr">name</span>: <span class="keyword">this</span>.form.name&#125;&#125;)   <span class="comment">// 如果要传参，则为router-name；如果不传参直接push(path)</span></span><br><span class="line">                sessionStorage.setItem(<span class="string">"isLogin"</span>, <span class="literal">true</span>)</span><br><span class="line">                <span class="keyword">this</span>.$store.dispatch(<span class="string">"asyncUpdateUser"</span>, &#123;<span class="attr">name</span>: <span class="keyword">this</span>.form.name&#125;)</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"enter"</span>, <span class="keyword">this</span>.$store.state)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                 <span class="keyword">this</span>.$message.error(<span class="string">'错了哦，这是一条错误消息'</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">	<span class="comment">// vue3写法：Vue-router 4.x为此提供了useRoute()：</span></span><br><span class="line"><span class="keyword">import</span> &#123;useRouter&#125; <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line">setup(props,ctx)&#123;</span><br><span class="line">    <span class="comment">//router是全局路由对象，route= userRoute()是当前路由对象</span></span><br><span class="line">    <span class="keyword">let</span> router = useRouter();</span><br><span class="line">    <span class="keyword">let</span> start = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 这个叫编程式</span></span><br><span class="line">        router.push(&#123;</span><br><span class="line">            <span class="comment">//传递参数使用query的话，指定path或者name都行，但使用params的话，只能使用name指定 </span></span><br><span class="line">            path:<span class="string">'/home'</span>,</span><br><span class="line">            query:&#123;</span><br><span class="line">                num:<span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    onMounted(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> id = router.params.id</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编程式调用方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字符串</span></span><br><span class="line">router.push(<span class="string">'home'</span>)</span><br><span class="line"><span class="comment">// 对象</span></span><br><span class="line">router.push(&#123; <span class="attr">path</span>: <span class="string">'home'</span> &#125;)</span><br><span class="line"><span class="comment">// 命名的路由</span></span><br><span class="line">router.push(&#123; <span class="attr">name</span>: <span class="string">'user'</span>, <span class="attr">params</span>: &#123; <span class="attr">userId</span>: <span class="string">'123'</span> &#125;&#125;)</span><br><span class="line"><span class="comment">// 带查询参数，变成 /register?plan=private</span></span><br><span class="line">router.push(&#123; <span class="attr">path</span>: <span class="string">'register'</span>, <span class="attr">query</span>: &#123; <span class="attr">plan</span>: <span class="string">'private'</span> &#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ▲注：同样的规则也适用于 router-link 组件的 to 属性。</span></span><br><span class="line"></span><br><span class="line">router.replace(location, onComplete?, onAbort?)</span><br><span class="line"><span class="comment">// 跟 router.push 很像，唯一的不同就是，它不会向 history 添加新记录，而是跟它的方法名一样 —— 替换掉当前的 history 记录。</span></span><br><span class="line">router.go(n)</span><br><span class="line"><span class="comment">// 这个方法的参数是一个整数，意思是在 history 记录中向前或者后退多少步，类似 window.history.go(n)。</span></span><br></pre></td></tr></table></figure>
<p>更多</p>
<ul>
<li><code>$router</code> : 是路由操作对象，只写对象</li>
<li><code>$route</code> : 路由信息对象，只读对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//操作 路由跳转</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">      name:<span class="string">'hello'</span>,</span><br><span class="line">      params:&#123;</span><br><span class="line">          name:<span class="string">'word'</span>,</span><br><span class="line">          age:<span class="string">'11'</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取 路由参数接收</span></span><br><span class="line"><span class="keyword">this</span>.name = <span class="keyword">this</span>.$route.params.name;</span><br><span class="line"><span class="keyword">this</span>.age = <span class="keyword">this</span>.$route.params.age;</span><br></pre></td></tr></table></figure>
<p>query传参要用path来引入，params传参要用name来引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// path+query==&gt; /second?queryId=2222&amp;queryName=query</span></span><br><span class="line"><span class="comment">//query传参，使用name跳转</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">    name:<span class="string">'second'</span>,</span><br><span class="line">    query: &#123;</span><br><span class="line">        queryId:<span class="string">'20180822'</span>,</span><br><span class="line">        queryName: <span class="string">'query'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//query传参，使用path跳转</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">    path:<span class="string">'second'</span>,</span><br><span class="line">    query: &#123;</span><br><span class="line">        queryId:<span class="string">'20180822'</span>,</span><br><span class="line">        queryName: <span class="string">'query'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//query传参接收</span></span><br><span class="line"><span class="keyword">this</span>.queryName = <span class="keyword">this</span>.$route.query.queryName;</span><br><span class="line"><span class="keyword">this</span>.queryId = <span class="keyword">this</span>.$route.query.queryId;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** ---------------------- **/</span></span><br><span class="line"><span class="comment">// name+params==&gt; /second/20180822/query， 更多见：https://router.vuejs.org/zh/guide/essentials/named-routes.html</span></span><br><span class="line"><span class="keyword">this</span>.$router.push(&#123;</span><br><span class="line">  name:<span class="string">'second'</span>,</span><br><span class="line">  params: &#123;</span><br><span class="line">     id:<span class="string">'20180822'</span>,</span><br><span class="line">     name: <span class="string">'query'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//params接收参数， 是$route</span></span><br><span class="line"><span class="keyword">this</span>.id = <span class="keyword">this</span>.$route.params.id ;</span><br><span class="line"><span class="keyword">this</span>.name = <span class="keyword">this</span>.$route.params.name ;</span><br><span class="line"><span class="comment">//路由</span></span><br><span class="line">&#123;</span><br><span class="line">    path: <span class="string">'/second/:id/:name'</span>,</span><br><span class="line">    name: <span class="string">'second'</span>,</span><br><span class="line">    component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/view/second'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>
<p>params是路由的一部分, 必须要在路由后面添加参数名。query是拼接在url后面的参数，没有也没关系。</p>
</li>
<li>
<p>params一旦设置在路由，params就是路由的一部分，如果这个路由有params传参，但是在跳转的时候没有传这个参数，会导致跳转失败或者页面会没有内容。（最重要的一点，params刷新会消失。query则不会）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">parmas：https://blog.csdn.net/xxx</span><br><span class="line">query: https://blog.csdn.net?xxx</span><br></pre></td></tr></table></figure>
<p>from：<a href="https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html" target="_blank" rel="noopener">https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html</a></p>
<p>采坑：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">:to=<span class="string">"&#123;path:'invest/scattered',query: &#123;productId: list.id&#125;&#125;"</span></span><br><span class="line">to=<span class="string">"invest/scattered?productId=1"</span>	<span class="comment">// 如果不加冒号访问动态参数即to="&#123;path:'invest/scattered',query: &#123;productId: list.id&#125;&#125;"，则会乱码</span></span><br></pre></td></tr></table></figure>
<p>冒号可以传动态的参数(也可以传静态的)；不加冒号是静态的路径；动态路由也可以以静态路由的形式写，参数固定如<code>:to=&quot;{name: 'antd', params: { id: 2 } }&quot;</code>==&gt;<code>to=&quot;/antd/2&quot;</code>；参数为变量：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&#123;name: &apos;antd&apos;, params: &#123; id: 2 &#125;&#125;&quot;&gt;antd&lt;/router-link&gt;</span><br><span class="line">&lt;router-link :to=&quot;`/antd/$&#123;uid&#125;`&quot;&gt;antd&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
<p>更推荐<strong>指定url的写法</strong>，因为就不用考虑name还是path了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.vue</span></span><br><span class="line">&lt;router-link :to=<span class="string">"`/antd?name=mrli`"</span>&gt;antd&lt;<span class="regexp">/router-link&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 要跳转的 Antd.vue</span></span><br><span class="line"><span class="regexp">&#123;&#123; $route.query.name &#125;&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ App.vue</span></span><br><span class="line"><span class="regexp">&lt;router-link :to="`/</span>antd/<span class="number">3</span><span class="string">`"&gt;antd&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">// 要跳转的 Antd.vue</span></span><br><span class="line"><span class="string">&#123;&#123; $route.params.id &#125;&#125;</span></span><br><span class="line"><span class="string">// 还需要router/index.js中定义, 不然$route.params.id无法将那个值对应到id上</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    path: "/antd/:id",</span></span><br><span class="line"><span class="string">    name: "antd",</span></span><br><span class="line"><span class="string">    component: AntdCom</span></span><br><span class="line"><span class="string">&#125;,</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>from : <a href="https://juejin.cn/post/6882393804310052871" target="_blank" rel="noopener">Vue3实战系列：结合 Ant-Design-of-Vue 实践 Composition API</a></p>
<p>踩坑:</p>
<ul>
<li>
<p>嵌套子路由无法直接通过URL访问：报错原因是<code>GET http://localhost:3000/dashboard/src/main.js net::ERR_ABORTED 404 (Not Found)</code></p>
<ul>
<li>后经过测试查明，createWebHashHistory是可以直接跳转的，但createWebHistory是不能直接跳到嵌套子路由的</li>
</ul>
</li>
</ul>
<h4 id="vuex"><a class="markdownIt-Anchor" href="#vuex"></a> vuex</h4>
<ol>
<li>
<p>安装<code>yarn add vuex@next --dev</code></p>
</li>
<li>
<p>编写<code>store/index.js</code>文件</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        tagsList: [],</span><br><span class="line">        collapse: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mutations: &#123;</span><br><span class="line">        closeCurrentTag(state, data) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = state.tagsList.length; i &lt; len; i++) &#123;</span><br><span class="line">                <span class="keyword">const</span> item = state.tagsList[i];</span><br><span class="line">                <span class="keyword">if</span> (item.path === data.$route.fullPath) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (i &lt; len - <span class="number">1</span>) &#123;</span><br><span class="line">                        data</span><br><span class="line">                            .$router</span><br><span class="line">                            .push(state.tagsList[i + <span class="number">1</span>].path);</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        data</span><br><span class="line">                            .$router</span><br><span class="line">                            .push(state.tagsList[i - <span class="number">1</span>].path);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        data</span><br><span class="line">                            .$router</span><br><span class="line">                            .push(<span class="string">"/"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    state</span><br><span class="line">                        .tagsList</span><br><span class="line">                        .splice(i, <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 侧边栏折叠</span></span><br><span class="line">        handleCollapse(state, data) &#123;</span><br><span class="line">            state.collapse = data;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    actions: &#123;&#125;,</span><br><span class="line">    modules: &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在组件中使用</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> collapseChage = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    store.commit(<span class="string">"handleCollapse"</span>, !collapse.value);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="分析vue3项目"><a class="markdownIt-Anchor" href="#分析vue3项目"></a> 分析Vue3项目</h2>
<h3 id="vue-color-avatar"><a class="markdownIt-Anchor" href="#vue-color-avatar"></a> Vue Color Avatar</h3>
<h4 id="indexjs-中的-v-cloak-指令"><a class="markdownIt-Anchor" href="#indexjs-中的-v-cloak-指令"></a> index.js 中的 v-cloak 指令</h4>
<blockquote>
<p>首先<code>yarn dev</code>本地运行后进入页面，会有一个<code>Loading, coming soon</code>的页面加载过程，之后就会取消掉。然后在项目入口的index.html中看到了实现——v-cloak</p>
</blockquote>
<p>功能：使用 v-cloak 指令设置样式，这些样式会在 <u>Vue 实例编译结束时，从绑定的 HTML 元素上被移除</u>。</p>
<p>场景：当网络较慢，网页还在加载 Vue.js ，而导致 Vue 来不及渲染，这时页面就会显示出 Vue 源代码(如下图)。我们可以使用 v-cloak 指令来解决这一问题。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/3386108-cc0cda1d980b9586.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/288/format/webp" alt=""></p>
<p>我们使用 v-cloak 指令来解决屏幕闪动的问题吧O(∩_∩)O~，js 不变，在 div 中加入  v-cloak 指令。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// html</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span> <span class="attr">v-cloak</span>&gt;</span></span><br><span class="line">    &#123;&#123;context&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># <span class="selector-tag">css</span>：</span><br><span class="line"><span class="selector-attr">[v-cloak]</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用 v-cloak 指令之后的效果（<a href="https://jsfiddle.net/deniro/joafmeph/" target="_blank" rel="noopener">demo</a>）：</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/3386108-5ebe5bb452a25298.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/288/format/webp" alt="img"></p>
<p>在简单项目中，使用  v-cloak 指令是解决屏幕闪动的好方法。但在大型、工程化的项目中（webpack、vue-router）只有一个空的 div 元素，元素中的内容是通过路由挂载来实现的，这时我们就不需要用到 v-cloak 指令咯。</p>
<p>from: <a href="https://www.jianshu.com/p/f56cde007210" target="_blank" rel="noopener">https://www.jianshu.com/p/f56cde007210</a></p>
<p>注：index.html中定义的元素，在Vue实例加载完成后，将都不会显示，因此比较适合用来做Loading页面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span> <span class="attr">v-cloak</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"placeholder"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"logo"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>Coming soon...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>toRefs+解包</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">setup()&#123;</span><br><span class="line">    <span class="keyword">const</span> data = reactive(&#123;</span><br><span class="line">        name: <span class="string">'小皮'</span>,</span><br><span class="line">        age: <span class="number">18</span>,</span><br><span class="line">        year: computed(&#123;</span><br><span class="line">            <span class="comment">// 设置 getter 和 setter</span></span><br><span class="line">            get: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">2020</span> - data.age</span><br><span class="line">            &#125;,</span><br><span class="line">            set: <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">                data.age = <span class="number">2020</span> - val</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123;...toRefs(data), changeAge, changeYear&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>vue 3.0 给input 获取焦点</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 给table 循环的input 点击的时候获取焦点</span></span><br><span class="line"><span class="comment">// 1、给input 设置ref 属性</span></span><br><span class="line">&lt;el-input</span><br><span class="line">  v-<span class="keyword">else</span></span><br><span class="line">  ref=<span class="string">"refInput"</span></span><br><span class="line">  @blur=<span class="string">"(scope.row.code = !scope.row.code), changeBlur()"</span></span><br><span class="line">  v-model=<span class="string">"scope.row[item.prop]"</span></span><br><span class="line">  :placeholder=<span class="string">"'请输入内容' + item.label"</span></span><br><span class="line">/&gt;</span><br><span class="line"><span class="comment">// 1、给input的ref属性在setup中使用? 叫什么我不清楚</span></span><br><span class="line"><span class="keyword">const</span> refInput =ref() <span class="comment">//记得return 出去</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//事件触发  记得引入 nextTick from vue</span></span><br><span class="line"><span class="keyword">const</span> aaaa ()=&gt;&#123;</span><br><span class="line"> nextTick(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        refInput.value.focus()</span><br><span class="line">      &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>vue2中的写法，通过<code>this.$ref.xxx.focus()</code>来实现</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> &lt;div&gt;</span><br><span class="line">     <span class="comment">//获取焦点主要就是定义一个ref</span></span><br><span class="line">     &lt;input v-model=<span class="string">"inputvalue"</span>  ref=<span class="string">"inputVal"</span>/&gt;</span><br><span class="line">     &lt;button @click=<span class="string">"addItem"</span>&gt;提交&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp"> &lt;/</span>div&gt;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">methods:&#123;</span><br><span class="line">     <span class="comment">//事件调用</span></span><br><span class="line">     addItem:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="comment">//然后调用focus方法</span></span><br><span class="line">         <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">             <span class="keyword">this</span>.$refs.inputVal.focus()</span><br><span class="line">         &#125;)</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="关于import"><a class="markdownIt-Anchor" href="#关于import"></a> 关于import</h2>
<p>默认情况下，JavaScript中在模块内的<strong>所有声明都是本地的</strong>，外部无法访问。如果需要公开模块中部分声明的内容，并让其它模块加以使用，这个时候就<strong>需要导出功能</strong>，最简单的方式是添加export关键字导出模块。</p>
<ul>
<li>默认导出导入： 每个模块仅有一个default的导出，导出内容可以是一个function、class，object等。因为这种方式被当做主要的导出内容，导入方式最为简单。
<ul>
<li>▲注意：由于一个模块仅仅只允许导出一个default对象，实际导出的是一个default命名的变量。</li>
<li>因此导入的时候import后的名字, 实际上是给这个default命名的导出暴露的内容进行重命名，所以import后可以是任意变量名称，且不需要{}。</li>
</ul>
</li>
<li>named导出导入export命令规定的是对外的接口，必须与模块内部的变量建立一一对应关系。
<ul>
<li>import命令接受一对大括号，里面指定要从其他模块导入的变量名。大括号里面的变量名，必须与被导入模块(即暴露接口模块)对外接口的名称相同。</li>
<li>如果想为输入的变量重新取一个名字，import命令要使用as关键字，将输入的变量重命名。</li>
</ul>
</li>
</ul>
<p>总结：</p>
<ul>
<li>如果是默认导出export default则可以省略花括号，且import的模块名是随意的</li>
<li>如果是非export default导出的接口内容，在引用时须加花括号，且引用的模块名与导出时的命名必须相同<br>
本质是因为：一个模块中只允许一个默认导出export default，但允许多个命名导出export;</li>
</ul>
<p>from 格式：</p>
<p>Js import的具体查找规则为：<br>
① 如果X是内置模块，则直接返回该模块。如require(‘http’)。<br>
② 如果X以<code>./</code>、<code>/</code>、<code>../</code>的相对路径开头，则<br>
1. 根据X所在的父模块，确定X的绝对路径。<br>
2. 将X当做文件，依次查找下面的文件，如果找到，则直接返回。<br>
1. X<br>
2. X.js<br>
3. X.json<br>
4. X.node<br>
3. 将X当做目录，依次查找下面的文件，如果找到，则直接返回。<br>
1. X/package.json(查找main字段中的文件，规则同上)<br>
2. X/index.js<br>
3. X/index.json<br>
4. X/index.node<br>
③ 如果X不带路径：<br>
1. 根据X所在的父模块，确定X可能的安装目录。<br>
2. 依次在每个目录中，将X当成文件名或目录名加载。<br>
④ “not found”</p>
<p>因此，以下三种效果都是一样的，都可以成功</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router/index.js'</span>          <span class="comment">// 符合 `②21`</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router/index'</span>             <span class="comment">// 符合 `②22`</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span>                   <span class="comment">// 符合 `②32`</span></span><br></pre></td></tr></table></figure>
<p>既然如此，那么肯定有先后顺序，因此，我们做个实验。main.js为根目录下有个vu.js(目标为②22), 还有个vu的文件夹，其中包含个index.js(目标为②32)。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mrli@VM-4-7-ubuntu:~/import_test$ tree</span><br><span class="line">.</span><br><span class="line">├── main.js</span><br><span class="line">├── vu</span><br><span class="line">│   └── index.js</span><br><span class="line">└── vu.js</span><br><span class="line"></span><br><span class="line">1 directory, 3 files</span><br></pre></td></tr></table></figure>
<p>注意：本地测试时是node运行，而Node和浏览器端所支持的模块规范不同。</p>
<table>
<thead>
<tr>
<th>条目</th>
<th>Node</th>
<th>浏览器</th>
</tr>
</thead>
<tbody>
<tr>
<td>模块规范</td>
<td>CommonJS</td>
<td>ES6</td>
</tr>
<tr>
<td>导出</td>
<td><code>modules.exports</code></td>
<td>export, export default;<code>modules.exports</code></td>
</tr>
<tr>
<td>引入</td>
<td>require</td>
<td>import；require</td>
</tr>
</tbody>
</table>
<p>在windows下用node编写的测试文件如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line">a = <span class="built_in">require</span>(<span class="string">"./vu"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"></span><br><span class="line"><span class="comment">// vu.js</span></span><br><span class="line">exports.a = <span class="string">'root'</span>;</span><br><span class="line"><span class="comment">// module.exports.a = 'root';</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// vu/index.js</span></span><br><span class="line">exports.a = <span class="string">'vu folder'</span>;</span><br><span class="line"><span class="comment">// module.exports.a = 'vu folder';</span></span><br></pre></td></tr></table></figure>
<p>输出的结果为：显示为 <strong>同级目录xx.js优先级高于xx/index.js</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mrli@VM-4-7-ubuntu:~/import_test$ node main.js </span><br><span class="line">&#123; a: <span class="string">'root'</span> &#125;</span><br></pre></td></tr></table></figure>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/sinat_36422236/article/details/85051297" target="_blank" rel="noopener">详谈 import 路径</a></li>
<li><a href="https://blog.csdn.net/weixin_40817115/article/details/81534819" target="_blank" rel="noopener">export报错SyntaxError: Unexpected token export</a></li>
<li><a href="https://blog.csdn.net/qq_38801354/article/details/78024680" target="_blank" rel="noopener">JavaScript笔记（CommonJS规范，以及exports、module.exports和export、export default区别）</a></li>
</ul>
<h2 id="编写注意点"><a class="markdownIt-Anchor" href="#编写注意点"></a> 编写注意点：</h2>
<p>如果是在函数体内写的语句是不需要分号分隔的，如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">setup()&#123;</span><br><span class="line">    onMounted(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    functipon xxx()&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>与之对应的是在对象体内，如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = &#123;</span><br><span class="line">    data() &#123;            <span class="comment">// 等价于 data: ()=&gt;&#123;&#125;</span></span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    props:&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>里面会出现<strong>键值对</strong>和<strong>必须要逗号分隔开</strong></p>
<h2 id="axios请求"><a class="markdownIt-Anchor" href="#axios请求"></a> axios请求</h2>
<ul>
<li>从浏览器中创建 XMLHttpRequest</li>
<li>从 node.js 发出 http 请求</li>
<li>支持promise API</li>
<li>拦截请求和响应</li>
<li>转换请求数据和响应数据</li>
<li>取消请求</li>
<li>自动转换 JSON 数据</li>
<li>客户端支持防御 XSRF</li>
</ul>
<ol>
<li>直接每次从axios库中调用axios函数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;mmmm&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">import axios from 'axios'</span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">export default &#123;</span></span><br><span class="line"><span class="regexp">  name: "post",</span></span><br><span class="line"><span class="regexp">  created() &#123;</span></span><br><span class="line"><span class="regexp">    /</span>*</span><br><span class="line">        post常用的请求数据（data）格式有两种：</span><br><span class="line">        （<span class="number">1</span>）applicition/json</span><br><span class="line">        （<span class="number">2</span>）form-data 表单提交（图片上传，文件上传）</span><br><span class="line">     *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/第一种写法叫做post别名请求方法</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ http:/</span><span class="regexp">/localhost:8080/</span><span class="keyword">static</span>/data.json?id=<span class="number">1</span></span><br><span class="line">    <span class="comment">// applicition/json 请求</span></span><br><span class="line">    <span class="keyword">let</span> data = &#123;</span><br><span class="line">      id: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    axios.post(<span class="string">'../../static/data.json'</span>, data)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'数据：'</span>, res);</span><br><span class="line">      &#125;)</span><br><span class="line">    <span class="comment">//第二种写法</span></span><br><span class="line">    axios(&#123;</span><br><span class="line">      method: <span class="string">'post'</span>,</span><br><span class="line">      url: <span class="string">'../../static/data.json'</span>,</span><br><span class="line">      data: data,</span><br><span class="line">    &#125;).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'数据：'</span>, res)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// form-data 请求</span></span><br><span class="line">    <span class="keyword">let</span> formData = <span class="keyword">new</span> FormData()</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">      formData.append(key, data[key])</span><br><span class="line">    &#125;</span><br><span class="line">    axios.post(<span class="string">'../../static/data.json'</span>, formData)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'数据：'</span>, res);</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">&lt;style scoped&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="结合-vue使用vue-axios"><a class="markdownIt-Anchor" href="#结合-vue使用vue-axios"></a> 结合 vue使用vue-axios</h3>
<p><code>npm install --save axios vue-axios</code><br>
vue-axios是按照vue插件的方式去写的。那么结合vue-axios，就可以去使用vue.use方法了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 首先在主入口文件main.js中引用</span><br><span class="line"></span><br><span class="line">import axios from &apos;axios&apos;</span><br><span class="line">import VueAxios from &apos;vue-axios&apos;</span><br><span class="line"></span><br><span class="line">Vue.use(VueAxios,axios);</span><br></pre></td></tr></table></figure>
<p>之后就可以使用了，在组件文件中的methods里去使用了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">getNewsList()&#123;</span><br><span class="line">      <span class="keyword">this</span>.axios.get(<span class="string">'api/getNewsList'</span>).then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.newsList=response.data.data;</span><br><span class="line">      &#125;).catch(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response);</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="axios-改写为-vue-的原型属性"><a class="markdownIt-Anchor" href="#axios-改写为-vue-的原型属性"></a> axios 改写为 Vue 的原型属性</h3>
<p>首先在主入口文件main.js中引用，之后挂在vue的原型链上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line">Vue.prototype.$axios= axios</span><br></pre></td></tr></table></figure>
<p>在组件中使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$axios.get(<span class="string">'api/getNewsList'</span>).then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.newsList=response.data.data;</span><br><span class="line">      &#125;).catch(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response);</span><br><span class="line">      &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="创建axios实例并封装成工具类"><a class="markdownIt-Anchor" href="#创建axios实例并封装成工具类"></a> 创建axios实例，并封装成工具类</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/requests.js</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建axios实例</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  baseURL: process.env.BASE_API, <span class="comment">// api的base_url</span></span><br><span class="line">  timeout: <span class="number">5000</span> <span class="comment">// 请求超时时间</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>组件中直接import</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; axios &#125; <span class="keyword">import</span> <span class="string">"./utils/requests.js"</span></span><br><span class="line">axios.get(<span class="string">'api/getNewsList'</span>).then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.newsList=response.data.data;</span><br><span class="line">      &#125;).catch(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response);</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="axios进阶用法-结合vuex再封装一层"><a class="markdownIt-Anchor" href="#axios进阶用法-结合vuex再封装一层"></a> axios进阶用法: 结合vuex再封装一层</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Message &#125; <span class="keyword">from</span> <span class="string">'element-ui'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span></span><br><span class="line"><span class="keyword">import</span> &#123; getToken &#125; <span class="keyword">from</span> <span class="string">'@/utils/auth'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建axios实例</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  baseURL: process.env.BASE_API, <span class="comment">// api的base_url</span></span><br><span class="line">  timeout: <span class="number">5000</span> <span class="comment">// 请求超时时间</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// request拦截器</span></span><br><span class="line">service.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Do something before request is sent</span></span><br><span class="line">  <span class="keyword">if</span> (store.getters.token) &#123;</span><br><span class="line">    config.headers[<span class="string">'X-Token'</span>] = getToken() <span class="comment">// 让每个请求携带token--['X-Token']为自定义key 请根据实际情况自行修改</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;, error =&gt; &#123;</span><br><span class="line">  <span class="comment">// Do something with request error</span></span><br><span class="line">  <span class="built_in">console</span>.log(error) <span class="comment">// for debug</span></span><br><span class="line">  <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// respone拦截器</span></span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">  response =&gt; response,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 下面的注释为通过response自定义code来标示请求状态，当code返回如下情况为权限有问题，登出并返回到登录页</span></span><br><span class="line"><span class="comment">  * 如通过xmlhttprequest 状态码标识 逻辑可写在下面error中</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="comment">//  const res = response.data;</span></span><br><span class="line">  <span class="comment">//     if (res.code !== 20000) &#123;</span></span><br><span class="line">  <span class="comment">//       Message(&#123;</span></span><br><span class="line">  <span class="comment">//         message: res.message,</span></span><br><span class="line">  <span class="comment">//         type: 'error',</span></span><br><span class="line">  <span class="comment">//         duration: 5 * 1000</span></span><br><span class="line">  <span class="comment">//       &#125;);</span></span><br><span class="line">  <span class="comment">//       // 50008:非法的token; 50012:其他客户端登录了;  50014:Token 过期了;</span></span><br><span class="line">  <span class="comment">//       if (res.code === 50008 || res.code === 50012 || res.code === 50014) &#123;</span></span><br><span class="line">  <span class="comment">//         MessageBox.confirm('你已被登出，可以取消继续留在该页面，或者重新登录', '确定登出', &#123;</span></span><br><span class="line">  <span class="comment">//           confirmButtonText: '重新登录',</span></span><br><span class="line">  <span class="comment">//           cancelButtonText: '取消',</span></span><br><span class="line">  <span class="comment">//           type: 'warning'</span></span><br><span class="line">  <span class="comment">//         &#125;).then(() =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//           store.dispatch('FedLogOut').then(() =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//             location.reload();// 为了重新实例化vue-router对象 避免bug</span></span><br><span class="line">  <span class="comment">//           &#125;);</span></span><br><span class="line">  <span class="comment">//         &#125;)</span></span><br><span class="line">  <span class="comment">//       &#125;</span></span><br><span class="line">  <span class="comment">//       return Promise.reject('error');</span></span><br><span class="line">  <span class="comment">//     &#125; else &#123;</span></span><br><span class="line">  <span class="comment">//       return response.data;</span></span><br><span class="line">  <span class="comment">//     &#125;</span></span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'err'</span> + error)<span class="comment">// for debug</span></span><br><span class="line">    Message(&#123;</span><br><span class="line">      message: error.message,</span><br><span class="line">      type: <span class="string">'error'</span>,</span><br><span class="line">      duration: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure>
<h2 id="父子组件间通信"><a class="markdownIt-Anchor" href="#父子组件间通信"></a> 父子组件间通信</h2>
<h3 id="props-父向子传递数据"><a class="markdownIt-Anchor" href="#props-父向子传递数据"></a> props, 父向子传递数据</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">// 父组件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;img alt=&quot;Vue logo&quot; src=&quot;./assets/logo.png&quot;&gt;</span><br><span class="line">  &lt;HelloWorld msg=&quot;Welcome to Your Vue.js App&quot;/&gt;		// 这边传给子组件 :msg</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import HelloWorld from &apos;./components/HelloWorld.vue&apos;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;App&apos;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    HelloWorld</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 子组件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    </span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;onMounted&#125; from &quot;vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;HelloWorld&apos;,</span><br><span class="line">  props: &#123;				// 需要指明接收的props</span><br><span class="line">    msg: String			// 变量类型</span><br><span class="line">  &#125;,</span><br><span class="line">  setup(props)&#123;			// 然后这边传入</span><br><span class="line">      onMounted(()=&gt;&#123;</span><br><span class="line">          console.log(props)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"> &lt;style scoped lang=&quot;scss&quot;&gt;   </span><br><span class="line">h3 &#123;</span><br><span class="line">  margin: 40px 0 0;</span><br><span class="line">&#125;</span><br><span class="line">a &#123;</span><br><span class="line">  color: $bg;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="provide和inject-祖向孙传递数据"><a class="markdownIt-Anchor" href="#provide和inject-祖向孙传递数据"></a> provide和inject, 祖向孙传递数据</h3>
<blockquote>
<p>通常，当我们需要从父组件向子组件传递数据时，我们使用 props。想象一下这样的结构：有一些深度嵌套的组件，而深层的子组件只需要父组件的部分内容。在这种情况下，如果仍然将 prop 沿着组件链逐级传递下去，可能会很麻烦。<br>
<a href="https://v3.cn.vuejs.org/guide/component-provide-inject.html#" target="_blank" rel="noopener">官方文档</a></p>
</blockquote>
<ul>
<li>父组件通过 provide 选项来提供数据，</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// optional api写法</span></span><br><span class="line">provide: &#123;</span><br><span class="line">  todoLength: <span class="keyword">this</span>.todos.length <span class="comment">// 将会导致错误 `Cannot read property 'length' of undefined`</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 要访问组件实例 property，我们需要将 provide 转换为**返回对象的函数**：</span></span><br><span class="line">provide() &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    todoLength: <span class="keyword">this</span>.todos.length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>▲.处理响应性:<br>
Q: 默认情况下，provide/inject 绑定并不是响应式的<br>
A: 我们可以通过传递一个 ref property 或 reactive 对象给 provide 来改变这种行为。在我们的例子中，如果我们想对祖先组件中的更改做出响应，我们需要为 provide 的 todoLength 分配一个组合式 API computed property：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">app.component(<span class="string">'todo-list'</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  provide() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      todoLength: Vue.computed(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.todos.length)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.component(<span class="string">'todo-list-statistics'</span>, &#123;</span><br><span class="line">  inject: [<span class="string">'todoLength'</span>],</span><br><span class="line">  created() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Injected property: <span class="subst">$&#123;<span class="keyword">this</span>.todoLength.value&#125;</span>`</span>) <span class="comment">// &gt; 注入的 property: 5</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>子组件通过 inject 选项来开始使用这些数据。</li>
</ul>
<p>完整案例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">// 父组件</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import HelloWorld from &apos;./components/HelloWorld.vue&apos;</span><br><span class="line">import &#123; ref, provide &#125; from &quot;vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;App&apos;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    HelloWorld</span><br><span class="line">  &#125;,</span><br><span class="line">  setup()&#123;</span><br><span class="line">      let a = ref(&quot;&quot;)</span><br><span class="line">      provide(&apos;a&apos;, a); </span><br><span class="line">      </span><br><span class="line">      function show()&#123;</span><br><span class="line">          console.log(a.value)</span><br><span class="line">      &#125;</span><br><span class="line">      return &#123;</span><br><span class="line">          a,</span><br><span class="line">          show</span><br><span class="line">       &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">// 子组件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &#123;&#123;a&#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;onMounted, inject&#125; from &quot;vue&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;HelloWorld&apos;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    msg: String</span><br><span class="line">  &#125;,</span><br><span class="line">  // inject: [&apos;a&apos;], 也可以这么写, 这样在选项中定义了的话就不需要在setup中写了</span><br><span class="line">  setup()&#123;</span><br><span class="line">      let a = inject(&quot;a&quot;)</span><br><span class="line">      return &#123;</span><br><span class="line">          a</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>optional写法:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件, 要拿this必须写成方法, 不能写provide: &#123;a: "45"&#125;了</span></span><br><span class="line">provide ()&#123;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="string">"a"</span>: <span class="keyword">this</span>.a</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br><span class="line">data()&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        a: <span class="string">"45"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="emits子向父传递事件"><a class="markdownIt-Anchor" href="#emits子向父传递事件"></a> emits，子向父传递事件</h3>
<ul>
<li>emits参数有俩种形式<strong>对象</strong>和<strong>数组</strong>，对象里面可以配置带校验emit事件，为null的时候代表不校验，校验的时候，会把emit事件的参数传到校验函数的参数里面</li>
<li>当校验函数不通过的时候，控制台会输出一个警告，但是emit事件会继续执行</li>
<li>记录一个坑：比如你emit事件的名称正好和原生事件的名字重复了，那么这个事件会执行俩次，那么配置了emits这个选项的话，就能很好的解决这个问题</li>
<li>子组件Emiter.vue</li>
</ul>
<p>使用</p>
<ul>
<li>emits: 列表声明从父组件继承来的事件</li>
<li>$emit: 抛出事件， 通知父组件处理</li>
<li>在子组件中，通过$emit()来触发事件</li>
<li>在父组件中，通过v-on来监听子组件事件</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// 子组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"handleClick"</span>&gt;</span>点击emit-click事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"handleOpen"</span>&gt;</span>点击emit-open事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;defineComponent&#125; <span class="keyword">from</span> <span class="string">"vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span></span><br><span class="line"><span class="actionscript">  emits: &#123;					<span class="comment">// 不声明这个也行, 但会有提示emits event listeners (clickx) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option. </span></span></span><br><span class="line"><span class="actionscript">    clickx: <span class="literal">null</span>,			<span class="comment">//click事件没有检验</span></span></span><br><span class="line"><span class="javascript">    open_show: <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">"string"</span>) &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="actionscript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="actionscript">  setup(props, &#123;emit&#125;) &#123;		<span class="comment">// 注意emit不是从vue中import的</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> handleClick = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">      emit(<span class="string">"clickx"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> handleOpen = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">      emit(<span class="string">"open_show"</span>, <span class="number">1</span>);     <span class="comment">// 1为传递的参数</span></span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      handleClick,</span></span><br><span class="line"><span class="undefined">      handleOpen,</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">    /**</span></span><br><span class="line"><span class="undefined">    setup(props, context)&#123;</span></span><br><span class="line"><span class="actionscript">    	<span class="keyword">const</span> handleClick =<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">    		context.emit(<span class="string">"name"</span>)</span></span><br><span class="line"><span class="undefined">    	&#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    **/</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;&#125;;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;&#125;,</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>父组件Emit.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">     // 3. 指定侦听的事件为子传上来的clickx和open_show, 并为其指定回调函数</span><br><span class="line">  <span class="tag">&lt;<span class="name">emiter</span> @<span class="attr">clickx</span>=<span class="string">"onClick"</span> @<span class="attr">open_show</span>=<span class="string">"onOpen"</span>&gt;</span><span class="tag">&lt;/<span class="name">emiter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;defineComponent&#125; <span class="keyword">from</span> <span class="string">"vue"</span>;           <span class="comment">// 1. 需要导入子component</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Emiter <span class="keyword">from</span> <span class="string">"@/components/Emiter.vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span></span><br><span class="line"><span class="undefined">  components: &#123;                                </span></span><br><span class="line"><span class="actionscript">    Emiter,                                   <span class="comment">// 2.注册子component，才能拿到emit传上来的open事件</span></span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;&#125;;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    onClick() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"click me!"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    onOpen() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"open me!"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>例子：</p>
<ul>
<li><a href="https://blog.csdn.net/qq_43612538/article/details/117753657" target="_blank" rel="noopener">关于vue3.x中的emits的用法</a></li>
<li><a href="https://www.bilibili.com/video/BV1dK4y1J7CF?from=search&amp;seid=12505794653309609010&amp;spm_id_from=333.337.0.0" target="_blank" rel="noopener">父子组件通信方法 之 props/$emit【Vue面试题】</a></li>
</ul>
<p>注意： 使用compositionAPI也是能有数据成员的比如props, name, emits</p>
<h2 id="解决yarn全局安装模块后但仍提示无法找到命令的问题"><a class="markdownIt-Anchor" href="#解决yarn全局安装模块后但仍提示无法找到命令的问题"></a> 解决yarn全局安装模块后但仍提示无法找到命令的问题</h2>
<p>如果使用<code>yarn global add xxxx</code> 安装了xxxx插件之后，但是在cmd窗口中仍然提示类似命令无法找到（Command not found）的错误（如<code>@vue/cli</code>后输入<code>vue &lt;create&gt;</code>没有提示，），一般是由于yarn的环境没有配置好。可以通过以下的方法，将yarn的环境配置环境中。</p>
<p>首先，先查看一下yarn的bin目录，</p>
<ul>
<li>windows输入<code>yarn global bin</code>=&gt;<code>C:\Users\leon\AppData\Local\Yarn\bin</code>然后将该路径加入到path中，对于windows中直接将该目录加入到path中。</li>
<li>在Linux中<code>which yarn</code>后，将结果填入到<code>~/.bashrc</code>中，如下格式：<code>export PATH=$PATH:/usr/bin/yarn</code></li>
</ul>
<h2 id="导入scss"><a class="markdownIt-Anchor" href="#导入scss"></a> 导入scss</h2>
<ol>
<li>安装scss/sass,<code>node-sass sass-loader sass</code> 属于重要依赖，所以需-D而不是-S；</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install node-sass sass-loader sass -D</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">yarn add node-sass sass-loader@8.0.2 sass</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>
<p>根路径下建立文件vue.config.js</p>
<p>下面这个(不加也没事)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    pluginOptions: &#123;</span><br><span class="line">      <span class="string">'style-resources-loader'</span>: &#123;</span><br><span class="line">        preProcessor: <span class="string">'scss'</span>,</span><br><span class="line">        patterns: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还有人提供的全局配置，实测可以</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    css: &#123;</span><br><span class="line">        loaderOptions: &#123;</span><br><span class="line">            sass: &#123;</span><br><span class="line">                prependData: <span class="string">`@import "./assets/css/test.scss";`</span></span><br><span class="line">                <span class="comment">// 等价于：prependData: `@import "@/assets/style.scss";`</span></span><br><span class="line">                <span class="comment">// 因为 配置中对import中的@进行了设置'@': resolve('src'),即@ 等价于 /src 这个目录</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果不需要全局配置，可以直接在某个组件下的style里加<code>@import &quot;../assets/style.scss&quot;;</code></p>
</li>
<li>
<p>调用test</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang="scss" scoped&gt;</span><br><span class="line">$bg: red;</span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: $bg;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>from :</p>
<ul>
<li><a href="https://www.cnblogs.com/huangmin1992/p/14262820.html" target="_blank" rel="noopener">vue 3.x - 安装scss/sass</a></li>
<li><a href="https://blog.csdn.net/qq_38157825/article/details/114318772" target="_blank" rel="noopener">Syntax Error: TypeError: this.getOptions is not a function</a>——sass-loader版本太高</li>
<li><a href="https://blog.csdn.net/weixin_38491914/article/details/112103798" target="_blank" rel="noopener">vue3 vue.config.js 配置</a></li>
</ul>
<h1 id="使用vue3特性的工程"><a class="markdownIt-Anchor" href="#使用vue3特性的工程"></a> 使用Vue3特性的工程：</h1>
<ul>
<li><a href="https://github.com/lin-xin/vue-manage-system" target="_blank" rel="noopener"></a>——较为基础的使用</li>
<li><a href="https://github.com/newbee-ltd/newbee-mall-vue3-app" target="_blank" rel="noopener"></a>——略微复杂的前端工程, 采用vue3 compositionAPI</li>
<li><a href="https://github.com/bitfumes/vue3-for-beginners" target="_blank" rel="noopener"></a>——采用vue2的optionalAPI</li>
</ul>
<h1 id="vueconfigjs模板配置文件"><a class="markdownIt-Anchor" href="#vueconfigjs模板配置文件"></a> vue.config.js模板配置文件</h1>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js 配置说明</span></span><br><span class="line"><span class="comment">//官方vue.config.js 参考文档 https://cli.vuejs.org/zh/config/#css-loaderoptions</span></span><br><span class="line"><span class="comment">// 这里只列一部分，具体配置参考文档</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"><span class="comment">//别名设置</span></span><br><span class="line">configureWebpack: &#123;</span><br><span class="line">    resolve: &#123;</span><br><span class="line">      alias: &#123;</span><br><span class="line">        <span class="string">'assets'</span>: <span class="string">'@/assets'</span>,</span><br><span class="line">        <span class="string">'components'</span>: <span class="string">'@/components'</span>,</span><br><span class="line">        <span class="string">'views'</span>: <span class="string">'@/views'</span>,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 部署生产环境和开发环境下的URL。</span></span><br><span class="line">  <span class="comment">// 默认情况下，Vue CLI 会假设你的应用是被部署在一个域名的根路径上</span></span><br><span class="line">  <span class="comment">//例如 https://www.my-app.com/。如果应用被部署在一个子路径上，你就需要用这个选项指定这个子路径。例如，如果你的应用被部署在 https://www.my-app.com/my-app/，则设置 baseUrl 为 /my-app/。</span></span><br><span class="line">  baseUrl: process.env.NODE_ENV === <span class="string">"production"</span> ? <span class="string">"./"</span> : <span class="string">"/"</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// outputDir: 在npm run build 或 yarn build 时 ，生成文件的目录名称（要和baseUrl的生产环境路径一致）</span></span><br><span class="line">  outputDir: <span class="string">"dist"</span>,</span><br><span class="line">  <span class="comment">//用于放置生成的静态资源 (js、css、img、fonts) 的；（项目打包之后，静态资源会放在这个文件夹下）</span></span><br><span class="line">  assetsDir: <span class="string">"assets"</span>,</span><br><span class="line">  <span class="comment">//指定生成的 index.html 的输出路径  (打包之后，改变系统默认的index.html的文件名)</span></span><br><span class="line">  <span class="comment">// indexPath: "myIndex.html",</span></span><br><span class="line">  <span class="comment">//默认情况下，生成的静态资源在它们的文件名中包含了 hash 以便更好的控制缓存。你可以通过将这个选项设为 false 来关闭文件名哈希。(false的时候就是让原来的文件名不改变)</span></span><br><span class="line">  filenameHashing: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//   lintOnSave：&#123; type:Boolean default:true &#125; 问你是否使用eslint</span></span><br><span class="line">  lintOnSave: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//如果你想要在生产构建时禁用 eslint-loader，你可以用如下配置</span></span><br><span class="line">  <span class="comment">// lintOnSave: process.env.NODE_ENV !== 'production',</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//是否使用包含运行时编译器的 Vue 构建版本。设置为 true 后你就可以在 Vue 组件中使用 template 选项了，但是这会让你的应用额外增加 10kb 左右。(默认false)</span></span><br><span class="line">  <span class="comment">// runtimeCompiler: false,</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 如果你不需要生产环境的 source map，可以将其设置为 false 以加速生产环境构建。</span></span><br><span class="line"><span class="comment">   *  打包之后发现map文件过大，项目文件体积很大，设置为false就可以不输出map文件</span></span><br><span class="line"><span class="comment">   *  map文件的作用在于：项目打包后，代码都是经过压缩加密的，如果运行时报错，输出的错误信息无法准确得知是哪里的代码报错。</span></span><br><span class="line"><span class="comment">   *  有了map就可以像未加密的代码一样，准确的输出是哪一行哪一列有错。</span></span><br><span class="line"><span class="comment">   * */</span></span><br><span class="line">  productionSourceMap: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 它支持webPack-dev-server的所有选项</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    host: <span class="string">"localhost"</span>, <span class="comment">//也可以直接写IP地址这样方便真机测试</span></span><br><span class="line">    port: <span class="number">8080</span>, <span class="comment">// 端口号</span></span><br><span class="line">    https: <span class="literal">false</span>, <span class="comment">// https:&#123;type:Boolean&#125;</span></span><br><span class="line">    open: <span class="literal">true</span>, <span class="comment">//配置自动启动浏览器</span></span><br><span class="line">    <span class="comment">// proxy: 'http://localhost:4000' // 配置跨域处理,只有一个代理</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置多个代理</span></span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">"/api"</span>: &#123;</span><br><span class="line">        target: <span class="string">"&lt;url&gt;"</span>,  <span class="comment">//写地址</span></span><br><span class="line">        ws: <span class="literal">true</span>,  <span class="comment">// 允许跨域</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span>,  <span class="comment">//允许跨域</span></span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">"^/api"</span>: <span class="string">""</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"/foo"</span>: &#123;</span><br><span class="line">        target: <span class="string">"&lt;other_url&gt;"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="前端技术栈"><a class="markdownIt-Anchor" href="#前端技术栈"></a> 前端技术栈</h1>
<ul>
<li><strong>eslint-plugin-vue</strong> <a href="https://eslint.vuejs.org/user-guide/#faq" target="_blank" rel="noopener">eslint-plugin-vue</a></li>
<li><strong>axios</strong> 强大的前端请求库</li>
<li><strong>fues.js</strong> <a href="https://github.com/krisk/Fuse" target="_blank" rel="noopener">fues.js Fuzzy Search 前端模糊搜索</a></li>
<li><strong>echart</strong> <a href="http://echarts.apache.org/zh/index.html" target="_blank" rel="noopener">echart 数据可视化</a></li>
<li><strong>antv</strong> <a href="https://antv.vision/zh" target="_blank" rel="noopener">antv 蚂蚁数据可视化</a></li>
<li><strong>xlsx</strong> <a href="https://www.npmjs.com/package/xlsx" target="_blank" rel="noopener">xlsx SheetJS</a></li>
<li><strong>jszip</strong> <a href="https://github.com/Stuk/jszip" target="_blank" rel="noopener">jszip 优秀的前端压缩库</a></li>
<li><strong>mockjs</strong> <a href="http://mockjs.com/" target="_blank" rel="noopener">mockjs 模拟和交互数据</a></li>
<li><strong>wangeditor</strong> <a href="https://www.wangeditor.com/doc/" target="_blank" rel="noopener">wangeditor 富文本编辑器</a></li>
<li><strong>fullcalendar</strong> <a href="https://github.com/fullcalendar/fullcalendar-example-projects/tree/master/vue3-typescript" target="_blank" rel="noopener">fullcalendar 丰富的日历插件</a></li>
</ul>
<h1 id="文章"><a class="markdownIt-Anchor" href="#文章"></a> 文章：</h1>
<ul>
<li><a href="https://juejin.cn/post/6983626263327932429" target="_blank" rel="noopener">上手后才知道 ，Vue3 的 script setup 语法糖是真的爽</a></li>
</ul>
</article><!-- lincense--><div class="license-wrapper"><p> <span>Author:  </span><a href="https://nymrli.top">Mrli</a></p><p> <span>Link:  </span><a href="https://nymrli.top/2021/11/28/Vue3初体验/">https://nymrli.top/2021/11/28/Vue3初体验/</a></p><p> <span>Copyright:  </span><span>All articles in this blog are licensed under <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/3.0">CC BY-NC-SA 3.0</a> unless stating additionally.</span></p></div><div class="post-paginator"><a class="prevSlogan" href="/2021/11/30/Vue中使用axios/" title="Vue中使用axios"><span>< PreviousPost</span><br><span class="prevTitle">Vue中使用axios</span></a><a class="nextSlogan" href="/2021/11/26/前端-跨域/" title="前端-跨域"><span>NextPost ></span><br><span class="nextTitle">前端-跨域</span></a><div class="clear"></div></div><div id="comment"><div id="container"></div><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
  id: 'Vue3初体验',
  owner: 'Freedomisgood',
  repo: 'Freedomisgood.github.io',
  oauth: {
    client_id: 'bc5a81fe36017dcd8b63',
    client_secret: '949cec3a1b91742c6249c47259791e4b80a6fa69',
  },
})
gitment.render('container')</script></div></section></article><footer id="cxo-footer-outer"><div id="cxo-footer-inner"><p class="footer-container"><span>Site by </span><a href="http://hexo.io"><span>Hexo</span></a><span> | theme </span><a href="https://github.com/Longlongyu/hexo-theme-Cxo"><span>Cxo</span></a></p><p class="beian"><a href="https://beian.miit.gov.cn/"> <span>备案号:苏ICP备18015439号</span></a></p><i class="fa fa-user"> </i><span id="busuanzi_value_site_uv"></span><span> | </span><i class="fa fa-eye"> </i><span id="busuanzi_value_site_pv"></span></div></footer><!-- catelog--><div class="toc-wrapper" style="top: 60vh;"><div class="toc-catalog"><i class="fa fa-list"> </i><span>CATALOG</span></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3新特性"><span class="toc-number">1.</span> <span class="toc-text"> Vue3新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#composition-api"><span class="toc-number">1.1.</span> <span class="toc-text"> Composition-Api</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#setup-函数"><span class="toc-number">1.1.1.</span> <span class="toc-text"> setup() 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#具体函数"><span class="toc-number">1.1.2.</span> <span class="toc-text"> 具体函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#数据"><span class="toc-number">1.1.2.1.</span> <span class="toc-text"> 数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#函数"><span class="toc-number">1.1.2.2.</span> <span class="toc-text"> 函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#侦听"><span class="toc-number">1.1.2.3.</span> <span class="toc-text"> 侦听</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue2-vue3废弃的api"><span class="toc-number">1.2.</span> <span class="toc-text"> Vue2-&gt;Vue3废弃的API</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-optionalapi可以使用"><span class="toc-number">1.3.</span> <span class="toc-text"> Vue optionalAPI可以使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#附录"><span class="toc-number">2.</span> <span class="toc-text"> 附录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#导入vuex和vue-router"><span class="toc-number">2.0.1.</span> <span class="toc-text"> 导入vuex和vue-router</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vue-router使用"><span class="toc-number">2.0.1.1.</span> <span class="toc-text"> vue-router使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#vuex"><span class="toc-number">2.0.1.2.</span> <span class="toc-text"> vuex</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分析vue3项目"><span class="toc-number">2.1.</span> <span class="toc-text"> 分析Vue3项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue-color-avatar"><span class="toc-number">2.1.1.</span> <span class="toc-text"> Vue Color Avatar</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#indexjs-中的-v-cloak-指令"><span class="toc-number">2.1.1.1.</span> <span class="toc-text"> index.js 中的 v-cloak 指令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#关于import"><span class="toc-number">2.2.</span> <span class="toc-text"> 关于import</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#编写注意点"><span class="toc-number">2.3.</span> <span class="toc-text"> 编写注意点：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#axios请求"><span class="toc-number">2.4.</span> <span class="toc-text"> axios请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#结合-vue使用vue-axios"><span class="toc-number">2.4.1.</span> <span class="toc-text"> 结合 vue使用vue-axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#axios-改写为-vue-的原型属性"><span class="toc-number">2.4.2.</span> <span class="toc-text"> axios 改写为 Vue 的原型属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建axios实例并封装成工具类"><span class="toc-number">2.4.3.</span> <span class="toc-text"> 创建axios实例，并封装成工具类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#axios进阶用法-结合vuex再封装一层"><span class="toc-number">2.4.4.</span> <span class="toc-text"> axios进阶用法: 结合vuex再封装一层</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#父子组件间通信"><span class="toc-number">2.5.</span> <span class="toc-text"> 父子组件间通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#props-父向子传递数据"><span class="toc-number">2.5.1.</span> <span class="toc-text"> props, 父向子传递数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#provide和inject-祖向孙传递数据"><span class="toc-number">2.5.2.</span> <span class="toc-text"> provide和inject, 祖向孙传递数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#emits子向父传递事件"><span class="toc-number">2.5.3.</span> <span class="toc-text"> emits，子向父传递事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#解决yarn全局安装模块后但仍提示无法找到命令的问题"><span class="toc-number">2.6.</span> <span class="toc-text"> 解决yarn全局安装模块后但仍提示无法找到命令的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#导入scss"><span class="toc-number">2.7.</span> <span class="toc-text"> 导入scss</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#使用vue3特性的工程"><span class="toc-number">3.</span> <span class="toc-text"> 使用Vue3特性的工程：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vueconfigjs模板配置文件"><span class="toc-number">4.</span> <span class="toc-text"> vue.config.js模板配置文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#前端技术栈"><span class="toc-number">5.</span> <span class="toc-text"> 前端技术栈</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#文章"><span class="toc-number">6.</span> <span class="toc-text"> 文章：</span></a></li></ol></div><!-- top--><i class="fa fa-arrow-up close" id="go-up" aria-hidden="true"></i></body></html>