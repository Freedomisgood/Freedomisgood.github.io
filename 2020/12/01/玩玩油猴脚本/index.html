<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="author" content="Mrli"><meta name="renderer" content="webkit"><meta name="copyright" content="Mrli"><meta name="keywords" content="Mrli's Blog"><meta name="description" content="æƒ³å’Œä½ è®²ï¼Œè¯´äº†ä¼šå¿ƒåŠ¨ ï¼Œç¼„é»˜ä¼šå¿ƒå®‰ã€‚"><meta name="Cache-Control" content="no-cache"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>ç©ç©æ²¹çŒ´è„šæœ¬Tampermonkey Â· Mr.li's Blog</title><link rel="stylesheet" href="/css/style.css?v=2018.7.9"><link rel="stylesheet" href="/css/animation.css?v=2018.7.9"><link rel="icon" href="/img/assets/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.6"><!-- scripts--><script>(function( w ){
  "use strict";
  // rel=preload support test
  if( !w.loadCSS ){
    w.loadCSS = function(){};
  }
  // define on the loadCSS obj
  var rp = loadCSS.relpreload = {};
  // rel=preload feature support test
  // runs once and returns a function for compat purposes
  rp.support = (function(){
    var ret;
    try {
      ret = w.document.createElement( "link" ).relList.supports( "preload" );
    } catch (e) {
      ret = false;
    }
    return function(){
      return ret;
    };
  })();

  // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
  // then change that media back to its intended value on load
  rp.bindMediaToggle = function( link ){
    // remember existing media attr for ultimate state, or default to 'all'
    var finalMedia = link.media || "all";

    function enableStylesheet(){
      link.media = finalMedia;
    }

    // bind load handlers to enable media
    if( link.addEventListener ){
      link.addEventListener( "load", enableStylesheet );
    } else if( link.attachEvent ){
      link.attachEvent( "onload", enableStylesheet );
    }

    // Set rel and non-applicable media type to start an async request
    // note: timeout allows this to happen async to let rendering continue in IE
    setTimeout(function(){
      link.rel = "stylesheet";
      link.media = "only x";
    });
    // also enable media after 3 seconds,
    // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
    setTimeout( enableStylesheet, 3000 );
  };

  // loop through link elements in DOM
  rp.poly = function(){
    // double check this to prevent external calls from running
    if( rp.support() ){
      return;
    }
    var links = w.document.getElementsByTagName( "link" );
    for( var i = 0; i < links.length; i++ ){
      var link = links[ i ];
      // qualify links to those with rel=preload and as=style attrs
      if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
        // prevent rerunning on link
        link.setAttribute( "data-loadcss", true );
        // bind listeners to toggle media back
        rp.bindMediaToggle( link );
      }
    }
  };

  // if unsupported, run the polyfill
  if( !rp.support() ){
    // run once at least
    rp.poly();

    // rerun poly on an interval until onload
    var run = w.setInterval( rp.poly, 500 );
    if( w.addEventListener ){
      w.addEventListener( "load", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    } else if( w.attachEvent ){
      w.attachEvent( "onload", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    }
  }


  // commonjs
  if( typeof exports !== "undefined" ){
    exports.loadCSS = loadCSS;
  }
  else {
    w.loadCSS = loadCSS;
  }
}( typeof global !== "undefined" ? global : this ) );</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" defer></script><script src="/js/main.js?v=2018.7.9" defer></script><!-- fancybox--><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script><!-- busuanzi--><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></head><body><section class="profile-close" id="cxo-profile"><div class="profile-avatar"><i class="fa fa-caret-left"></i><img src="https://avatars1.githubusercontent.com/u/31088082?s=400&amp;u=7a99ff83916afb3f4c5312bd78a1be17fe0e34ed&amp;v=4"></div><!--.profile-saying
  i.fa.fa-comment
  .saying--><div class="cxo-profile-inner"><div class="profile-name">Mrli</div><div class="profile-signature">åˆ«è£…ä½œå¾ˆåŠªåŠ›,<br>å› ä¸ºç»“å±€ä¸ä¼šé™ªä½ æ¼”æˆã€‚</div><div class="contacts"><div>Contacts:</div><span><a href="http://sighttp.qq.com/msgrd?v=1&amp;uin=1063052964" target="_black">QQ</a></span><span><a href="https://www.cnblogs.com/nymrli/" target="_black">åšå®¢å›­</a></span></div><div class="read-progress"></div></div></section><header id="cxo-intro" style="height: 60vh;background-image: url(/img/intro/index-bg.png);"><nav id="cxo-intro-nav"><section><div class="intro-nav-title"><a href="/">Mr.li's Blog</a></div><div class="intro-nav-label-box"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div><i class="fa fa-bars intro-nav-menu"><div class="intro-nav-drop"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div></i><div class="clear"></div></section></nav><h1 class="post-title">ç©ç©æ²¹çŒ´è„šæœ¬Tampermonkey</h1><div class="post-intros"><div class="post-intro-meta"><span class="post-intro-time"><i class="post-intro-calendar fa fa-edit"></i><span>2020/12/01</span></span><span class="busuanzi-pv" id="busuanzi_container_page_pv"><i class="post-intro-calendar fa fa-user-o"></i><span id="busuanzi_value_page_pv"></span></span></div><div class="post-intro-read"><span> Word count: <span class="post-count">3,264</span> | Reading time: <span class="post-count">15</span>min</span></div></div></header><article class="cxo-up" id="cxo-content-outer"><section id="cxo-content-inner"><article class="article-entry" id="post"><blockquote>
<p>ç”±äºåœ¨ç ”ç©¶å¦‚ä½•ä¼˜åŒ–ç½‘ç›˜ç›´é“¾ä¸‹è½½åŠ©æ‰‹**<a href="https://github.com/ziyuanshu/baidupan" target="_blank" rel="noopener">baidupan</a><strong>ï¼Œå¦‚ä½•å°†ç›´é“¾çš„ç»“æœæå–å‡ºæ¥ä¾›IDMæ‰¹é‡ä¸‹è½½ã€‚ç”±äº</strong><a href="https://github.com/ziyuanshu/baidupan" target="_blank" rel="noopener">baidupan</a>**æ˜¯ç”¨æ²¹çŒ´è„šæœ¬å†™çš„ï¼Œå› æ­¤å€Ÿæœºå­¦ä¹ ä¸€ä¸‹ã€‚</p>
</blockquote>
<blockquote></blockquote>
<h2 id="greasy-fork"><a class="markdownIt-Anchor" href="#greasy-fork"></a> <a href="https://greasyfork.org/zh-CN/" target="_blank" rel="noopener">Greasy Fork</a></h2>
<blockquote>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ªæä¾›ç”¨æˆ·è„šæœ¬çš„ç½‘ç«™ã€‚</p>
</blockquote>
<h2 id="tampermonkey"><a class="markdownIt-Anchor" href="#tampermonkey"></a> <a href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo" target="_blank" rel="noopener">Tampermonkey</a></h2>
<blockquote>
<p>å…¶ä¸ºæµè§ˆå™¨æ’ä»¶ï¼Œç›®å‰ä¸»æµæµè§ˆå™¨çš†æ”¯æŒï¼Œæ²¹çŒ´å«æ³•æ¥æºï¼šã€Œæ²¹çŒ´ã€æ˜¯ä»ã€ŒGreasemonkeyã€æ¥çš„ã€‚ã€ŒGreasemonkeyã€æœ€åˆæ˜¯è¿è¡Œåœ¨Firefoxæµè§ˆå™¨ä¸­çš„è„šæœ¬ï¼Œã€ŒTampermonkeyã€åœ¨Google Chromeæµè§ˆå™¨ä¸Šå®ç°äº†å‡ ä¹ç›¸åŒçš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¹Ÿè¢«ä¸­æ–‡ç”¨æˆ·ç§°ä¹‹ä¸ºã€Œæ²¹çŒ´ã€ã€‚</p>
</blockquote>
<h3 id="æ–°å»º"><a class="markdownIt-Anchor" href="#æ–°å»º"></a> æ–°å»ºï¼š</h3>
<p><img src="/2020/12/01/ç©ç©æ²¹çŒ´è„šæœ¬/E:%5Chexo%5Csource_posts%5C%E7%8E%A9%E7%8E%A9%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC%5C%E6%96%B0%E5%BB%BA.jpg" alt="æ–°å»º"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         New Userscript</span></span><br><span class="line"><span class="comment">// @namespace    http://tampermonkey.net/</span></span><br><span class="line"><span class="comment">// @version      0.1</span></span><br><span class="line"><span class="comment">// @description  try to take over the world!</span></span><br><span class="line"><span class="comment">// @author       You</span></span><br><span class="line"><span class="comment">// @match        https://www.1949la.com/post/10351.html</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">    'use strict'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Your code here...</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h2 id=""><a class="markdownIt-Anchor" href="#"></a> </h2>
<h3 id="è„šæœ¬ç¼–å†™æ–¹æ³•"><a class="markdownIt-Anchor" href="#è„šæœ¬ç¼–å†™æ–¹æ³•"></a> è„šæœ¬ç¼–å†™æ–¹æ³•</h3>
<h4 id="æ³¨é‡ŠåŠŸèƒ½æ³¨é‡Š"><a class="markdownIt-Anchor" href="#æ³¨é‡ŠåŠŸèƒ½æ³¨é‡Š"></a> æ³¨é‡Šâ€”â€”åŠŸèƒ½æ³¨é‡Š</h4>
<p>é¦–å…ˆæ¥çœ‹çœ‹è„šæœ¬çš„å†…å®¹ï¼Œä¸Šé¢æ˜¯ä¸€å¤§æ’æ³¨é‡Šï¼Œè¿™äº›æ³¨é‡Šå¯ä»¥éå¸¸æœ‰ç”¨çš„ï¼Œå®ƒè¡¨æ˜äº†è„šæœ¬çš„å„ä¸ªå±æ€§ã€‚ä¸‹é¢æ¥ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</p>
<table>
<thead>
<tr>
<th>å±æ€§å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>æ²¹çŒ´è„šæœ¬çš„åå­—</td>
</tr>
<tr>
<td>namespace</td>
<td>å‘½åç©ºé—´ï¼Œç±»ä¼¼äºJavaçš„åŒ…åï¼Œç”¨æ¥åŒºåˆ†ç›¸åŒåç§°çš„è„šæœ¬ï¼Œä¸€èˆ¬å†™æˆä½œè€…åå­—æˆ–è€…ç½‘å€å°±å¯ä»¥äº†</td>
</tr>
<tr>
<td>version</td>
<td>è„šæœ¬ç‰ˆæœ¬ï¼Œæ²¹çŒ´è„šæœ¬çš„æ›´æ–°ä¼šè¯»å–è¿™ä¸ªç‰ˆæœ¬å·</td>
</tr>
<tr>
<td>description</td>
<td>æè¿°ï¼Œç”¨æ¥å‘Šè¯‰ç”¨æˆ·è¿™ä¸ªè„šæœ¬æ˜¯å¹²ä»€ä¹ˆç”¨çš„</td>
</tr>
<tr>
<td>author</td>
<td>ä½œè€…åå­—</td>
</tr>
<tr>
<td>match</td>
<td>åªæœ‰åŒ¹é…çš„ç½‘å€æ‰ä¼šæ‰§è¡Œå¯¹åº”çš„è„šæœ¬ï¼Œä¾‹å¦‚<code>*</code>ã€<code>http://*</code>ã€<code>http://www.baidu.com/*</code>ç­‰ï¼Œå‚è§<a href="https://developer.chrome.com/extensions/match_patterns" target="_blank" rel="noopener">è°·æ­Œå¼€å‘è€…æ–‡æ¡£</a></td>
</tr>
<tr>
<td>grant</td>
<td><strong>æŒ‡å®šè„šæœ¬è¿è¡Œæ‰€éœ€æƒé™</strong>ï¼Œå¦‚æœè„šæœ¬æ‹¥æœ‰ç›¸åº”çš„æƒé™ï¼Œå°±å¯ä»¥è°ƒç”¨æ²¹çŒ´æ‰©å±•æä¾›çš„APIä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’ã€‚å¦‚æœè®¾ç½®ä¸º<code>none</code>çš„è¯ï¼Œåˆ™ä¸ä½¿ç”¨æ²™ç®±ç¯å¢ƒï¼Œè„šæœ¬ä¼šç›´æ¥è¿è¡Œåœ¨ç½‘é¡µçš„ç¯å¢ƒä¸­ï¼Œè¿™æ—¶å€™æ— æ³•ä½¿ç”¨å¤§éƒ¨åˆ†æ²¹çŒ´æ‰©å±•çš„APIã€‚å¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œæ²¹çŒ´ä¼šé»˜è®¤æ·»åŠ å‡ ä¸ªæœ€å¸¸ç”¨çš„API</td>
</tr>
<tr>
<td>require</td>
<td>å¦‚æœè„šæœ¬ä¾èµ–å…¶ä»–jsåº“çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨requireæŒ‡ä»¤ï¼Œåœ¨è¿è¡Œè„šæœ¬ä¹‹å‰å…ˆåŠ è½½å…¶ä»–åº“ï¼Œå¸¸è§ç”¨æ³•æ˜¯åŠ è½½jquery</td>
</tr>
<tr>
<td>connect</td>
<td>å½“ç”¨æˆ·ä½¿ç”¨<a href="https://www.tampermonkey.net/documentation.php?version=4.9&amp;ext=dhdg&amp;show=dhdg#GM_xmlhttpRequest" target="_blank" rel="noopener">GM_xmlhttpRequest</a>è¯·æ±‚è¿œç¨‹æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨connectæŒ‡å®šå…è®¸è®¿é—®çš„åŸŸåï¼Œæ”¯æŒåŸŸåã€å­åŸŸåã€IPåœ°å€ä»¥åŠ<code>*</code>é€šé…ç¬¦</td>
</tr>
<tr>
<td>updateURL</td>
<td>è„šæœ¬æ›´æ–°ç½‘å€ï¼Œå½“æ²¹çŒ´æ‰©å±•æ£€æŸ¥æ›´æ–°çš„æ—¶å€™ï¼Œä¼šå°è¯•ä»è¿™ä¸ªç½‘å€ä¸‹è½½è„šæœ¬ï¼Œç„¶åæ¯”å¯¹ç‰ˆæœ¬å·ç¡®è®¤æ˜¯å¦æ›´æ–°</td>
</tr>
</tbody>
</table>
<p>grantä¸­å‡ ä¸ªå¸¸ç”¨çš„æƒé™ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @grant GM_setValue</span></span><br><span class="line"><span class="comment">// @grant GM_getValue</span></span><br><span class="line"><span class="comment">// @grant GM_setClipboard</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œ matchå†™æ³•ç”±äºæ”¯æŒé€šé…ç¬¦ï¼Œå¯ä»¥å†™çš„é€šç”¨äº›:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @match        *://10.10.244.11/a70.htm*</span></span><br><span class="line"><span class="comment">// @match        *://p.njupt.edu.cn/a70.htm*</span></span><br></pre></td></tr></table></figure>
<h4 id="è„šæœ¬æƒé™"><a class="markdownIt-Anchor" href="#è„šæœ¬æƒé™"></a> è„šæœ¬æƒé™</h4>
<p>ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹grantæŒ‡ä»¤é‚£é‡Œå¯ä»¥å¡«å†™çš„ä¸€äº›æƒé™ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹<a href="https://www.tampermonkey.net/documentation.php" target="_blank" rel="noopener">æ²¹çŒ´è„šæœ¬æ–‡æ¡£</a>ã€‚è¿™é‡Œå°±ç®€å•ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„ï¼Œå¯ä»¥è°ƒç”¨çš„å‡½æ•°å…¨éƒ¨ä»¥GM_ä½œä¸ºå¼€å¤´ã€‚</p>
<table>
<thead>
<tr>
<th>æƒé™å</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>unsafeWindow</td>
<td>å…è®¸è„šæœ¬å¯ä»¥å®Œæ•´è®¿é—®åŸå§‹é¡µé¢ï¼ŒåŒ…æ‹¬åŸå§‹é¡µé¢çš„è„šæœ¬å’Œå˜é‡ã€‚</td>
</tr>
<tr>
<td>GM_getValue(name,defaultValue)</td>
<td>ä»æ²¹çŒ´æ‰©å±•çš„å­˜å‚¨ä¸­è®¿é—®æ•°æ®ã€‚å¯ä»¥è®¾ç½®é»˜è®¤å€¼ï¼Œåœ¨æ²¡æˆåŠŸè·å–åˆ°æ•°æ®çš„æ—¶å€™å½“åšåˆå§‹å€¼ã€‚å¦‚æœä¿å­˜çš„æ˜¯æ—¥æœŸç­‰ç±»å‹çš„è¯ï¼Œå–å‡ºæ¥çš„æ•°æ®ä¼šå˜æˆæ–‡æœ¬ï¼Œéœ€è¦è‡ªå·±è½¬æ¢ä¸€ä¸‹ã€‚</td>
</tr>
<tr>
<td>GM_setValue(name,value)</td>
<td>å°†æ•°æ®ä¿å­˜åˆ°å­˜å‚¨ä¸­</td>
</tr>
<tr>
<td>GM_xmlhttpRequest(details)</td>
<td><strong>å¼‚æ­¥è®¿é—®ç½‘é¡µæ•°æ®</strong>çš„APIï¼Œè¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œæœ‰å¤§é‡å‚æ•°å’Œå›è°ƒï¼Œè¯¦æƒ…è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</td>
</tr>
<tr>
<td>GM_setClipboard(data, info)</td>
<td>å°†æ•°æ®å¤åˆ¶åˆ°å‰ªè´´æ¿ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦å¤åˆ¶çš„æ•°æ®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯MIMEç±»å‹ï¼Œç”¨äºæŒ‡å®šå¤åˆ¶çš„æ•°æ®ç±»å‹ã€‚</td>
</tr>
<tr>
<td>GM_log(message)</td>
<td>å°†æ—¥å¿—æ‰“å°åˆ°æ§åˆ¶å°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨F12å¼€å‘è€…å·¥å…·æŸ¥çœ‹ã€‚</td>
</tr>
<tr>
<td>GM_addStyle(css)</td>
<td>åƒç½‘é¡µä¸­æ·»åŠ è‡ªå·±çš„æ ·å¼è¡¨ã€‚</td>
</tr>
<tr>
<td>GM_notification(details, ondone), GM_notification(text, title, image, onclick)</td>
<td>è®¾ç½®ç½‘é¡µé€šçŸ¥ï¼Œè¯·å‚è€ƒæ–‡æ¡£è·å–ç”¨æ³•ã€‚</td>
</tr>
<tr>
<td>GM_openInTab(url, loadInBackground)</td>
<td>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç½‘é¡µï¼Œå¯ä»¥è®¾ç½®æ˜¯å¦åœ¨åå°æ‰“å¼€ç­‰å‡ ä¸ªé€‰é¡¹</td>
</tr>
</tbody>
</table>
<p>è¿˜æœ‰ä¸€äº›APIæ²¡æœ‰ä»‹ç»ï¼Œè¯·å¤§å®¶ç›´æ¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å§ã€‚</p>
<h5 id="gm_xmlhttprequest-demo"><a class="markdownIt-Anchor" href="#gm_xmlhttprequest-demo"></a> GM_xmlhttpRequest DEMOï¼š</h5>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">GM_xmlhttpRequest(&#123;</span><br><span class="line">    method: <span class="string">"POST"</span>,</span><br><span class="line">    url: url,</span><br><span class="line">    headers: &#123;</span><br><span class="line">        <span class="string">"Content-Type"</span>: <span class="string">"application/x-www-form-urlencoded;charset=utf-8"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    data: form_data,</span><br><span class="line">    onload: <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"è¯·æ±‚æˆåŠŸ"</span>);</span><br><span class="line">        <span class="keyword">let</span> success = <span class="string">"è®¤è¯æˆåŠŸé¡µ"</span>;</span><br><span class="line">        <span class="keyword">let</span> resp = response.responseText;</span><br><span class="line">        <span class="keyword">let</span> flag = resp.indexOf(success);</span><br><span class="line">        <span class="keyword">if</span> (flag === <span class="number">-1</span>) &#123;</span><br><span class="line">            do_login_old(username, password);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//alert("ç™»å½•æˆåŠŸ");</span></span><br><span class="line">            <span class="built_in">window</span>.location.href = <span class="string">"https://cn.bing.com/"</span>; <span class="comment">//é¿å…é‡å¤ç™»å½•å¯¼è‡´ç¬é—´ä¸‰ä¸ªè®¾å¤‡åŒæ—¶ç™»å½•çš„çŠ¶æ€</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    onerror: <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">        do_login_old(username, password);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="mycode"><a class="markdownIt-Anchor" href="#mycode"></a> MyCode</h4>
<blockquote>
<p>æˆ‘çš„ç¬¬ä¸€ä¸ªè„šæœ¬ï¼Œç®€ç®€å•å•æ‰“å¼€è‡ªå·±çš„ä¸ªäººåšå®¢å§ï¼Œä¿®æ”¹å¦‚ä¸‹</p>
<ul>
<li>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="comment">// @match        https://www.baidu.com</span></span><br><span class="line">&gt;   <span class="comment">// @grant GM_openInTab</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;       <span class="keyword">const</span> URL = <span class="string">"https://nymrli.top"</span>;</span><br><span class="line">&gt;       GM_openInTab(URL, <span class="literal">true</span>)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<p>è®¿é—®ç™¾åº¦çš„æ—¶å€™å°±ä¼šåœ¨å½“å‰sessionä¸­æ‰“å¼€æˆ‘çš„ä¸ªäººåšå®¢äº†ï¼Œ(URL, true)ä¸ä¼šåˆ‡æ¢åˆ°URLä¸Š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         New Userscript</span></span><br><span class="line"><span class="comment">// @namespace    http://tampermonkey.net/</span></span><br><span class="line"><span class="comment">// @version      0.1</span></span><br><span class="line"><span class="comment">// @description  try to take over the world!</span></span><br><span class="line"><span class="comment">// @author       Mrli</span></span><br><span class="line"><span class="comment">// @match        https://www.baidu.com</span></span><br><span class="line"><span class="comment">// @grant GM_openInTab</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">    'use strict'</span>;</span><br><span class="line">    <span class="keyword">const</span> URL = <span class="string">"https://nymrli.top"</span>;</span><br><span class="line">    GM_openInTab(URL, <span class="literal">true</span>);		<span class="comment">// æ‰“å¼€URLåå½“å‰tabä¸å˜; falseä¼šåˆ‡æ¢å½“å‰tabä¸ºURLé¡µé¢</span></span><br><span class="line">    <span class="comment">//     GM_openInTab(URL, &#123;incognito :true &#125;);   optionsä¸­è²Œä¼¼æœ‰æœ‰é™çº§, åŠ äº†incognitoå,insertä¼šå¤±æ•ˆ</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Your code here...</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h5 id="bilibiliå€é€Ÿ"><a class="markdownIt-Anchor" href="#bilibiliå€é€Ÿ"></a> Bilibiliå€é€Ÿ</h5>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         BilibiliFast</span></span><br><span class="line"><span class="comment">// @namespace    http://tampermonkey.net/</span></span><br><span class="line"><span class="comment">// @version      0.1</span></span><br><span class="line"><span class="comment">// @description  try to take over the world!</span></span><br><span class="line"><span class="comment">// @author       You</span></span><br><span class="line"><span class="comment">// @match        https://www.bilibili.com/video/*</span></span><br><span class="line"><span class="comment">// @require      https://code.jquery.com/jquery-2.1.4.min.js</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">    'use strict'</span>;</span><br><span class="line">    <span class="comment">// Your code here...</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å¯¼å…¥æˆåŠŸ"</span>);</span><br><span class="line">    $(<span class="string">"body"</span>).append(<span class="string">`&lt;div id='video_set' style="position:fixed; right:10px; top:10px; z-index:9999; background:red"&gt;</span></span><br><span class="line"><span class="string">             &lt;input id="setPlay" value=1 type="number" style="padding:10px;"&gt;</span></span><br><span class="line"><span class="string">       &lt;/div&gt;`</span></span><br><span class="line">       );</span><br><span class="line">    <span class="comment">// $(document).append()ä¼šæŠ¥é”™Cannot read property 'createDocumentFragment' of undefined</span></span><br><span class="line"></span><br><span class="line">    $(<span class="built_in">document</span>).on(<span class="string">"change"</span>, <span class="string">"#video_set #setPlay"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">             <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.value &lt;= <span class="number">16</span>)&#123;</span><br><span class="line">                <span class="built_in">document</span>.querySelector(<span class="string">'video'</span>).playbackRate=<span class="keyword">this</span>.value;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                alert(<span class="string">"æœ€å¤§ä¸º16"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h3 id="å­¦ä¹ baidupanæºç "><a class="markdownIt-Anchor" href="#å­¦ä¹ baidupanæºç "></a> <strong>å­¦ä¹ <a href="https://github.com/ziyuanshu/baidupan" target="_blank" rel="noopener">baidupan</a>æºç </strong></h3>
<p>å­¦åˆ°æ–°ä¸œè¥¿ï¼šSweetAlert2 æ¼‚äº®å¯å®šåˆ¶çš„ JavaScript å¼¹çª—</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @require           https://cdn.jsdelivr.net/npm/sweetalert2@9</span></span><br><span class="line"><span class="comment">// åŸºç¡€è¯­æ³•ï¼š</span></span><br><span class="line">Swal.fire(&#123;</span><br><span class="line">	title: <span class="string">"æ˜¯å¦åˆ é™¤"</span>,</span><br><span class="line">	text: <span class="string">"æ˜¯å¦åˆ é™¤ï¼Ÿä¸€æ—¦æäº¤ï¼Œæ— æ³•æ¢å¤ï¼"</span>,</span><br><span class="line">	icon: <span class="string">"warning"</span>,</span><br><span class="line">	showCancelButton: <span class="literal">true</span>,</span><br><span class="line">	confirmButtonColor: <span class="string">"#DD6B55"</span>,</span><br><span class="line">	confirmButtonText: <span class="string">"ç¡®å®š"</span>,</span><br><span class="line">	cancelButtonText: <span class="string">"å–æ¶ˆ"</span></span><br><span class="line">&#125;).then(<span class="function">(<span class="params">isConfirm</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// æ˜¯å¦æˆåŠŸåœ¨thené‡Œé¢ç”¨ifåˆ¤æ–­</span></span><br><span class="line">	<span class="keyword">if</span> (isConfirm.value) &#123;</span><br><span class="line">		Swal.fire(<span class="string">"åˆ é™¤æˆåŠŸ"</span>, <span class="string">"æˆåŠŸ"</span>, <span class="string">"success"</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		Swal.fire(<span class="string">"å–æ¶ˆæ“ä½œ"</span>, <span class="string">"ç‚¹å‡»äº†å–æ¶ˆ"</span>, <span class="string">"error"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>æ¥æºäºcheckVersion</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkUpdate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setValue(<span class="string">'up'</span>,<span class="number">0</span>)</span><br><span class="line">    GM_xmlhttpRequest(&#123;</span><br><span class="line">        method: <span class="string">"GET"</span>,</span><br><span class="line">        url: <span class="string">`https://api.baiduyun.wiki/update?ver=<span class="subst">$&#123;version&#125;</span>`</span>,</span><br><span class="line">        responseType: <span class="string">'json'</span>,</span><br><span class="line">        onload: <span class="function"><span class="keyword">function</span> (<span class="params">r</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> res = r.response</span><br><span class="line">            setValue(<span class="string">'lastest_version'</span>, res.version)</span><br><span class="line">            userAgent = res.ua</span><br><span class="line">            ids = res.ids</span><br><span class="line">            <span class="keyword">if</span> (res.vcode === <span class="number">200</span> &amp;&amp; compareVersion(res.version,version)) &#123;</span><br><span class="line">                setValue(<span class="string">'up'</span>,<span class="number">1</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (res.scode != getValue(<span class="string">'scode'</span>)) &#123;</span><br><span class="line">                <span class="keyword">let</span> dom = $(<span class="string">'&lt;div&gt;&lt;img style="width: 250px;margin-bottom: 10px;" src="https://img.tool22.com/image/5f365d403c89f.jpg"&gt;&lt;input class="swal2-input" id="scode" type="text" placeholder="è¯·è¾“å…¥æš—å·ï¼Œå¯æ‰«æä¸Šæ–¹äºŒç»´ç å…è´¹è·å–!"&gt;&lt;/div&gt;'</span>)</span><br><span class="line">                Swal.fire(&#123;</span><br><span class="line">                    title: <span class="string">"åˆæ¬¡ä½¿ç”¨è¯·è¾“å…¥æš—å·"</span>,</span><br><span class="line">                    html: dom[<span class="number">0</span>],</span><br><span class="line">                    allowOutsideClick: <span class="literal">false</span>,</span><br><span class="line">                    confirmButtonText: <span class="string">'ç¡®å®š'</span></span><br><span class="line">                &#125;).then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (res.scode == $(<span class="string">'#scode'</span>).val()) &#123;</span><br><span class="line">                        setValue(<span class="string">'scode'</span>, res.scode)</span><br><span class="line">                        setValue(<span class="string">'init'</span>, <span class="number">1</span>)</span><br><span class="line">                        Toast.fire(&#123;</span><br><span class="line">                            icon: <span class="string">'success'</span>,</span><br><span class="line">                            text: <span class="string">'æš—å·æ­£ç¡®ï¼Œæ­£åœ¨åˆå§‹åŒ–ä¸­ã€‚ã€‚ã€‚'</span>,</span><br><span class="line">                        &#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                            history.go(<span class="number">0</span>)<span class="comment">// go() æ–¹æ³•å¯åŠ è½½å†å²åˆ—è¡¨ä¸­çš„æŸä¸ªå…·ä½“çš„é¡µé¢ã€‚ï¼ˆ-1ä¸Šä¸€ä¸ªé¡µé¢ï¼Œ1å‰è¿›ä¸€ä¸ªé¡µé¢, 0å°±æ˜¯å½“å‰é¡µé¢)</span></span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        setValue(<span class="string">'init'</span>, <span class="number">0</span>)</span><br><span class="line">                        Swal.fire(&#123;</span><br><span class="line">                            title: <span class="string">"ğŸ”ºğŸ”ºğŸ”º"</span>,</span><br><span class="line">                            text: <span class="string">'æš—å·ä¸æ­£ç¡®ï¼Œè¯·é€šè¿‡å¾®ä¿¡æ‰«ç å…è´¹è·å–'</span>,</span><br><span class="line">                            imageUrl: <span class="string">'https://img.tool22.com/image/5f365d403c89f.jpg'</span>,</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                loadPanhelper()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†console.logè¾“å‡ºåˆ†ç»„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clog</span>(<span class="params">c1, c2, c3</span>) </span>&#123;</span><br><span class="line">    c1 = c1 ? c1 : <span class="string">''</span></span><br><span class="line">    c2 = c2 ? c2 : <span class="string">''</span></span><br><span class="line">    c3 = c3 ? c3 : <span class="string">''</span></span><br><span class="line">    <span class="built_in">console</span>.group(<span class="string">'[ç½‘ç›˜ç›´é“¾ä¸‹è½½åŠ©æ‰‹]'</span>)		<span class="comment">// åˆ†ç»„</span></span><br><span class="line">    <span class="built_in">console</span>.log(c1, c2, c3)</span><br><span class="line">    <span class="built_in">console</span>.groupEnd()				      <span class="comment">// è¦æƒ³å°†å…¶ä»–å†…å®¹æ˜¾ç¤ºåœ¨å¤–é¢å¾—å–æ¶ˆåˆ†ç»„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç¨‹åºçš„é€»è¾‘"><a class="markdownIt-Anchor" href="#ç¨‹åºçš„é€»è¾‘"></a> ç¨‹åºçš„é€»è¾‘</h4>
<ul>
<li>
<p>å¼€å§‹:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(() =&gt; &#123;</span><br><span class="line">    <span class="comment">//é˜»æ­¢åœ¨å…¶ä»–ç½‘ç«™è¿è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> (hostname.match(<span class="regexp">/(pan|yun).baidu.com/i</span>)) &#123;</span><br><span class="line">        <span class="keyword">let</span> plugin = <span class="keyword">new</span> PanPlugin()</span><br><span class="line">        plugin.init()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¿›è¡Œæ£€æŸ¥æ›´æ–°-&gt;åˆ›å»ºèœå•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PanPlugin</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    clog(<span class="string">'RPCï¼š'</span>, ariaRPC)</span><br><span class="line">    <span class="keyword">this</span>.init = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        main()</span><br><span class="line">        addGMStyle()</span><br><span class="line">        checkUpdate()</span><br><span class="line">        <span class="keyword">if</span> (getValue(<span class="string">'SETTING_H'</span>)) createHelp()</span><br><span class="line">        createMenu()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸»è¦çš„åº”ç”¨æ˜¯åœ¨checkUpdateä¸­çš„loadPanhelperå®Œæˆçš„ï¼Œå…¶ä¼šæ ¹æ®å‚æ•°åˆ›å»ºPanHelper(ç½‘ç›˜é¡µé¢çš„ä¸‹è½½åŠ©æ‰‹)æˆ–PanShareHelper(åˆ†äº«é¡µé¢çš„ä¸‹è½½åŠ©æ‰‹)å¯¹è±¡ï¼Œ æ˜¾ç„¶PanHelperå°±æ˜¯æˆ‘ä»¬æœ€æƒ³åˆ†æçš„</li>
</ul>
</li>
</ul>
<h4 id="panhelperé€»è¾‘"><a class="markdownIt-Anchor" href="#panhelperé€»è¾‘"></a> PanHelperé€»è¾‘</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PanHelper</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> yunData, sign, timestamp, bdstoken, logid, fid_list</span><br><span class="line">    <span class="keyword">let</span> fileList = [], selectFileList = [], batchLinkList = [], batchLinkListAll = [], linkList = []</span><br><span class="line">    <span class="keyword">let</span> dialog, searchKey</span><br><span class="line">    <span class="keyword">let</span> panAPIUrl = location.protocol + <span class="string">"//"</span> + location.host + <span class="string">"/api/"</span></span><br><span class="line">    <span class="keyword">let</span> restAPIUrl = location.protocol + <span class="string">"//pcs.baidu.com/rest/2.0/pcs/"</span></span><br><span class="line">    <span class="keyword">let</span> clientAPIUrl = location.protocol + <span class="string">"//pan.baidu.com/rest/2.0/"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.init = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        yunData = unsafeWindow.yunData</span><br><span class="line">        <span class="keyword">if</span> (yunData === <span class="literal">undefined</span>) &#123;</span><br><span class="line">            clog(<span class="string">'åˆå§‹åŒ–ä¿¡æ¯:'</span>, yunData)</span><br><span class="line">            clog(<span class="string">'é¡µé¢æœªæ­£å¸¸åŠ è½½ï¼Œæˆ–è€…ç™¾åº¦å·²ç»æ›´æ–°ï¼'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        initVar()</span><br><span class="line">        registerEventListener()</span><br><span class="line">        addButton()</span><br><span class="line">        createIframe()</span><br><span class="line">        dialog = <span class="keyword">new</span> Dialog(&#123;<span class="attr">addCopy</span>: <span class="literal">true</span>&#125;)</span><br><span class="line">        clog(<span class="string">'ä¸‹è½½åŠ©æ‰‹åŠ è½½æˆåŠŸï¼å½“å‰ç‰ˆæœ¬ï¼š'</span>, version)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æœ€æ ¸å¿ƒçš„é€»è¾‘ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æˆ‘çš„ç½‘ç›˜ - è·å–PCSä¸‹è½½åœ°å€</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPCSBatchLink</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> fsids = []</span><br><span class="line">    $.each(selectFileList, (index, element) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (element.isdir == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        fsids.push(element.fs_id)</span><br><span class="line">    &#125;)</span><br><span class="line">    fsids = <span class="built_in">encodeURIComponent</span>(<span class="built_in">JSON</span>.stringify(fsids))</span><br><span class="line">    <span class="keyword">let</span> link = clientAPIUrl + <span class="string">`xpan/multimedia?method=filemetas&amp;access_token=undefined&amp;fsids=<span class="subst">$&#123;fsids&#125;</span>&amp;dlink=1`</span></span><br><span class="line">    GM_xmlhttpRequest(&#123;</span><br><span class="line">        method: <span class="string">"GET"</span>,</span><br><span class="line">        responseType: <span class="string">'json'</span>,</span><br><span class="line">        headers: &#123;<span class="string">"User-Agent"</span>: userAgent&#125;,</span><br><span class="line">        url: link,</span><br><span class="line">        onload: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> response = res.response</span><br><span class="line">            <span class="keyword">if</span> (response.errno === <span class="number">0</span>) &#123;</span><br><span class="line">                callback(response.list)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é™„å½•"><a class="markdownIt-Anchor" href="#é™„å½•"></a> é™„å½•</h2>
<h3 id="å®˜æ–¹æ–‡æ¡£"><a class="markdownIt-Anchor" href="#å®˜æ–¹æ–‡æ¡£"></a> <a href="https://www.tampermonkey.net/documentation.php#GM_openInTab" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></h3>
<h3 id="tampermonkeyæ²¹çŒ´ç”¨æˆ·è„šæœ¬apiæ–‡æ¡£-æ•™ç¨‹"><a class="markdownIt-Anchor" href="#tampermonkeyæ²¹çŒ´ç”¨æˆ·è„šæœ¬apiæ–‡æ¡£-æ•™ç¨‹"></a> <a href="https://www.1949la.com/post/10351.html" target="_blank" rel="noopener">Tampermonkeyæ²¹çŒ´ç”¨æˆ·è„šæœ¬APIæ–‡æ¡£-æ•™ç¨‹</a></h3>
<h3 id="è„šæœ¬debugå»ºè®®"><a class="markdownIt-Anchor" href="#è„šæœ¬debugå»ºè®®"></a> è„šæœ¬debugå»ºè®®</h3>
<h4 id="jqueryä½¿ç”¨"><a class="markdownIt-Anchor" href="#jqueryä½¿ç”¨"></a> jqueryä½¿ç”¨</h4>
<p>è¸©äº†å‡ å¤©å‘ï¼Œæœ€åæ€»ç»“ä¸€ä¸‹ç¼–å†™æ²¹çŒ´è„šæœ¬çš„ä¸€ç‚¹æ­¥éª¤ã€‚é¦–å…ˆè¦æ€è€ƒè„šæœ¬çš„å®ç°æ–¹å¼ï¼Œéœ€è¦ç”¨åˆ°ä»€ä¹ˆAPIå’Œæƒé™ï¼Œç„¶åå¡«å†™å¥½è„šæœ¬çš„æ³¨é‡Šä¿¡æ¯ã€‚</p>
<p>ç„¶åå°†åŠŸèƒ½å°è£…æˆå‡½æ•°çš„å½¢å¼ï¼Œæœ€ååœ¨è„šæœ¬æœ«å°¾è°ƒç”¨å®ç°çš„å‡½æ•°ã€‚å†™çš„å·®ä¸å¤šçš„æ—¶å€™å¤åˆ¶åˆ°æµè§ˆå™¨ä¸­å°è¯•è¿è¡Œã€‚</p>
<p>é‡åˆ°å›°éš¾çš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦ç›´æ¥åœ¨F12å¼€å‘è€…å·¥å…·é‡Œè¿›è¡Œè°ƒè¯•ã€‚<u>æœ‰äº›ç½‘é¡µä¸ç”¨jQueryï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å°†jQueryå¯¼å…¥åˆ°é¡µé¢ä¸­ï¼Œå¯ä»¥å°†ä¸‹é¢çš„ä»£ç å¤åˆ¶åˆ°æµè§ˆå™¨æ§åˆ¶å°ä¸­ã€‚</u></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> jq = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">jq.src = <span class="string">"https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(jq);</span><br></pre></td></tr></table></figure>
<h4 id="debugæ–¹æ³•"><a class="markdownIt-Anchor" href="#debugæ–¹æ³•"></a> debugæ–¹æ³•ï¼š</h4>
<p>ç¬¬ä¸€ç§æ–¹æ³•å°±æ˜¯æœ€åŸå§‹çš„æ‰“å°æ—¥å¿—ï¼Œå¯ä»¥åˆ©ç”¨<code>console.log</code>å’Œ<code>GM_log</code>æ¥å°†å…³é”®ä¿¡æ¯æ‰“å°å‡ºæ¥ï¼Œä¸Šé¢çš„è„šæœ¬å°±æ˜¯æˆ‘é æ‰“å°æ—¥å¿—ä¸€ç‚¹ç‚¹å‘ç°å„ç§å‚æ•°é”™è¯¯çš„ã€‚è¯´å®è¯è¿™ç§åŠæ³•æœ‰ç‚¹ç¬¨ã€‚</p>
<p>ç¬¬äºŒç§å°±æ˜¯åˆ©ç”¨æµè§ˆå™¨çš„è°ƒè¯•åŠŸèƒ½(æ¨è)ï¼Œåœ¨è„šæœ¬éœ€è¦è°ƒè¯•çš„åœ°æ–¹æ’å…¥<code>debugger;</code>è¯­å¥ï¼Œç„¶ååœ¨æ‰“å¼€F12å¼€å‘è€…å·¥å…·çš„æƒ…å†µä¸‹åˆ·æ–°é¡µé¢ï¼Œå°±ä¼šå‘ç°ç½‘é¡µå·²ç»æš‚åœåœ¨ç›¸åº”ä½ç½®ä¸Šã€‚è¿™æ ·å°±å¯ä»¥åˆ©ç”¨F12å¼€å‘è€…å·¥å…·è¿›è¡Œå•æ­¥è°ƒè¯•ã€ç›‘è§†å˜é‡ç­‰æ“ä½œäº†ã€‚</p>
<h3 id="å°†æ–‡ç« åŒæ­¥å¤åˆ¶åˆ°csdnå’Œæ€å¦ç¼–è¾‘å™¨çš„è„šæœ¬demo"><a class="markdownIt-Anchor" href="#å°†æ–‡ç« åŒæ­¥å¤åˆ¶åˆ°csdnå’Œæ€å¦ç¼–è¾‘å™¨çš„è„šæœ¬demo"></a> å°†æ–‡ç« åŒæ­¥å¤åˆ¶åˆ°Csdnå’Œæ€å¦ç¼–è¾‘å™¨çš„è„šæœ¬demoï¼š</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         copy_jianshu_to_csdn_and_segmentfault</span></span><br><span class="line"><span class="comment">// @namespace    https://github.com/techstay/myscripts</span></span><br><span class="line"><span class="comment">// @version      0.1</span></span><br><span class="line"><span class="comment">// @description  å°†ç®€ä¹¦æ–‡ç« å¤åˆ¶åˆ°csdnå’Œæ€å¦ç¼–è¾‘å™¨ä¸­</span></span><br><span class="line"><span class="comment">// @author       techstay</span></span><br><span class="line"><span class="comment">// @match        https://editor.csdn.net/md/</span></span><br><span class="line"><span class="comment">// @match https://segmentfault.com/write</span></span><br><span class="line"><span class="comment">// @match https://www.jianshu.com/writer*</span></span><br><span class="line"><span class="comment">// @require      https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js</span></span><br><span class="line"><span class="comment">// @require      https://cdn.bootcss.com/jqueryui/1.12.1/jquery-ui.min.js</span></span><br><span class="line"><span class="comment">// @grant GM_setValue</span></span><br><span class="line"><span class="comment">// @grant GM_getValue</span></span><br><span class="line"><span class="comment">// @grant GM_deleteValue</span></span><br><span class="line"><span class="comment">// @grant unsafeWindow</span></span><br><span class="line"><span class="comment">// @grant GM_setClipboard</span></span><br><span class="line"><span class="comment">// @grant window.close</span></span><br><span class="line"><span class="comment">// @grant window.focus</span></span><br><span class="line"><span class="comment">// @grant GM_openInTab</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">    'use strict'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> SF_URL = <span class="string">'https://segmentfault.com/write'</span></span><br><span class="line">    <span class="keyword">const</span> CSDN_URL = <span class="string">'https://editor.csdn.net/md/'</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> SF_TITLE = <span class="string">'sf_title'</span></span><br><span class="line">    <span class="keyword">const</span> SF_CONTENT = <span class="string">'sf_content'</span></span><br><span class="line">    <span class="keyword">const</span> CSDN_TITLE = <span class="string">'csdn_title'</span></span><br><span class="line">    <span class="keyword">const</span> CSDN_CONTENT = <span class="string">'csdn_content'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">saveArticle</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        GM_setValue(CSDN_TITLE, $(<span class="string">'._24i7u'</span>).val())</span><br><span class="line">        GM_setValue(CSDN_CONTENT, $(<span class="string">'#arthur-editor'</span>).val())</span><br><span class="line">        GM_setValue(SF_TITLE, $(<span class="string">'._24i7u'</span>).val())</span><br><span class="line">        GM_setValue(SF_CONTENT, $(<span class="string">'#arthur-editor'</span>).val())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">copyToCsdn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> title = GM_getValue(CSDN_TITLE, <span class="string">''</span>)</span><br><span class="line">        <span class="keyword">var</span> content = GM_getValue(CSDN_CONTENT, <span class="string">''</span>)</span><br><span class="line">        <span class="keyword">if</span> (title != <span class="string">''</span> &amp;&amp; content != <span class="string">''</span>) &#123;</span><br><span class="line">            $(<span class="string">'.article-bar__title'</span>).delay(<span class="number">2000</span>).queue(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                $(<span class="string">'.article-bar__title'</span>).val(title)</span><br><span class="line">                $(<span class="string">'.editor__inner'</span>).text(content)</span><br><span class="line">                GM_deleteValue(CSDN_TITLE)</span><br><span class="line">                GM_deleteValue(CSDN_CONTENT)</span><br><span class="line">                $(<span class="keyword">this</span>).dequeue()</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">copyToSegmentFault</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> title = GM_getValue(SF_TITLE, <span class="string">''</span>)</span><br><span class="line">            <span class="keyword">var</span> content = GM_getValue(SF_CONTENT, <span class="string">''</span>)</span><br><span class="line">            <span class="keyword">if</span> (title != <span class="string">''</span> &amp;&amp; content != <span class="string">''</span>) &#123;</span><br><span class="line">                $(<span class="string">'#title'</span>).delay(<span class="number">2000</span>).queue(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    $(<span class="string">'#title'</span>).val(title)</span><br><span class="line">                    GM_setClipboard(content, <span class="string">'text'</span>)</span><br><span class="line">                    GM_deleteValue(SF_TITLE)</span><br><span class="line">                    GM_deleteValue(SF_CONTENT)</span><br><span class="line">                    $(<span class="keyword">this</span>).dequeue()</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addCopyButton</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">'body'</span>).append(<span class="string">'&lt;div id="copyToCS"&gt;åŒå‡»å¤åˆ¶åˆ°CSDNå’Œæ€å¦&lt;/div&gt;'</span>)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).css(<span class="string">'width'</span>, <span class="string">'200px'</span>)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).css(<span class="string">'position'</span>, <span class="string">'absolute'</span>)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).css(<span class="string">'top'</span>, <span class="string">'70px'</span>)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).css(<span class="string">'left'</span>, <span class="string">'350px'</span>)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).css(<span class="string">'background-color'</span>, <span class="string">'#28a745'</span>)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).css(<span class="string">'color'</span>, <span class="string">'white'</span>)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).css(<span class="string">'font-size'</span>, <span class="string">'large'</span>)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).css(<span class="string">'z-index'</span>, <span class="number">100</span>)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).css(<span class="string">'border-radius'</span>, <span class="string">'25px'</span>)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).css(<span class="string">'text-align'</span>, <span class="string">'center'</span>)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).dblclick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            saveArticle()</span><br><span class="line">            GM_openInTab(SF_URL, <span class="literal">true</span>)</span><br><span class="line">            GM_openInTab(CSDN_URL, <span class="literal">true</span>)</span><br><span class="line">            <span class="comment">// GM_openInTab(url, options)åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€URLã€‚optionså¯é€‰çš„å€¼ï¼š</span></span><br><span class="line">            <span class="comment">// active ï¼šæ–°æ ‡ç­¾é¡µè·å¾—ç„¦ç‚¹; insertï¼šæ–°æ ‡ç­¾é¡µåœ¨å½“å‰é¡µé¢ä¹‹åæ·»åŠ ; setParentï¼šå½“æ–°æ ‡ç­¾é¡µå…³é—­åï¼Œç„¦ç‚¹ç»™å›å½“å‰é¡µé¢ ; incognito: æ–°æ ‡ç­¾é¡µåœ¨éšèº«æ¨¡å¼æˆ–ç§æœ‰æ¨¡å¼çª—å£æ‰“å¼€. </span></span><br><span class="line">            	<span class="comment">// optionså¯ä»¥å†™æˆ&#123; active: true, insert: true, setParent :true &#125;</span></span><br><span class="line">            <span class="comment">// GM_openInTab(url, loadInBackground)ï¼šloadInBackground å¯ä»¥æ˜¯ Boolean ç±»å‹ï¼Œå¦‚æœæ˜¯ trueï¼Œåˆ™å½“å‰ tab ä¸å˜ï¼Œå¦‚æœæ˜¯ falseï¼Œåˆ™å½“å‰ tab å˜ä¸ºæ–°æ‰“å¼€çš„ tab.  å½“å‰tabå°±æ˜¯å½“å‰æ ‡ç­¾é¡µ(æ˜¾ç¤ºçš„é¡µé¢)</span></span><br><span class="line">        &#125;)</span><br><span class="line">        $(<span class="string">'#copyToCS'</span>).draggable()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">window</span>.location.href.startsWith(<span class="string">'https://www.jianshu.com'</span>)) &#123;</span><br><span class="line">            addCopyButton()</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.location.href.startsWith(SF_URL)) &#123;</span><br><span class="line">            copyToSegmentFault()</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.location.href.startsWith(CSDN_URL)) &#123;</span><br><span class="line">            copyToCsdn()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>â–²æ¨èï¼š<a href="https://blog.csdn.net/u011054333/article/details/104101806" target="_blank" rel="noopener">æ²¹çŒ´è„šæœ¬ç¼–å†™æ•™ç¨‹</a></p>
</article><!-- lincense--><div class="license-wrapper"><p> <span>Author:  </span><a href="https://nymrli.top">Mrli</a></p><p> <span>Link:  </span><a href="https://nymrli.top/2020/12/01/ç©ç©æ²¹çŒ´è„šæœ¬/">https://nymrli.top/2020/12/01/ç©ç©æ²¹çŒ´è„šæœ¬/</a></p><p> <span>Copyright:  </span><span>All articles in this blog are licensed under <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/3.0">CC BY-NC-SA 3.0</a> unless stating additionally.</span></p></div><div class="post-paginator"><a class="prevSlogan" href="/2020/12/03/Lets-learn-è®¾è®¡æ¨¡å¼/" title="Lets learn è®¾è®¡æ¨¡å¼"><span>< PreviousPost</span><br><span class="prevTitle">Lets learn è®¾è®¡æ¨¡å¼</span></a><a class="nextSlogan" href="/2020/12/01/æµ™å¤§2020æ˜¥å¤-äººå·¥æ™ºèƒ½ä¹ é¢˜1â€”â€”AIforOthello/" title="æµ™å¤§2020æ˜¥å¤-äººå·¥æ™ºèƒ½ä¹ é¢˜3â€”â€”AIforOthello"><span>NextPost ></span><br><span class="nextTitle">æµ™å¤§2020æ˜¥å¤-äººå·¥æ™ºèƒ½ä¹ é¢˜3â€”â€”AIforOthello</span></a><div class="clear"></div></div><div id="comment"><div id="container"></div><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
  id: 'ç©ç©æ²¹çŒ´è„šæœ¬Tampermonkey',
  owner: 'Freedomisgood',
  repo: 'Freedomisgood.github.io',
  oauth: {
    client_id: 'bc5a81fe36017dcd8b63',
    client_secret: '949cec3a1b91742c6249c47259791e4b80a6fa69',
  },
})
gitment.render('container')</script></div></section></article><footer id="cxo-footer-outer"><div id="cxo-footer-inner"><p class="footer-container"><span>Site by </span><a href="http://hexo.io"><span>Hexo</span></a><span> | theme </span><a href="https://github.com/Longlongyu/hexo-theme-Cxo"><span>Cxo</span></a></p><p class="beian"><a href="https://beian.miit.gov.cn/"> <span>å¤‡æ¡ˆå·:è‹ICPå¤‡18015439å·</span></a></p><i class="fa fa-user"> </i><span id="busuanzi_value_site_uv"></span><span> | </span><i class="fa fa-eye"> </i><span id="busuanzi_value_site_pv"></span></div></footer><!-- catelog--><div class="toc-wrapper" style="top: 60vh;"><div class="toc-catalog"><i class="fa fa-list"> </i><span>CATALOG</span></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#greasy-fork"><span class="toc-number">1.</span> <span class="toc-text"> Greasy Fork</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tampermonkey"><span class="toc-number">2.</span> <span class="toc-text"> Tampermonkey</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#æ–°å»º"><span class="toc-number">2.1.</span> <span class="toc-text"> æ–°å»ºï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#"><span class="toc-number">3.</span> <span class="toc-text"> </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#è„šæœ¬ç¼–å†™æ–¹æ³•"><span class="toc-number">3.1.</span> <span class="toc-text"> è„šæœ¬ç¼–å†™æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#æ³¨é‡ŠåŠŸèƒ½æ³¨é‡Š"><span class="toc-number">3.1.1.</span> <span class="toc-text"> æ³¨é‡Šâ€”â€”åŠŸèƒ½æ³¨é‡Š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è„šæœ¬æƒé™"><span class="toc-number">3.1.2.</span> <span class="toc-text"> è„šæœ¬æƒé™</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#gm_xmlhttprequest-demo"><span class="toc-number">3.1.2.1.</span> <span class="toc-text"> GM_xmlhttpRequest DEMOï¼š</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mycode"><span class="toc-number">3.1.3.</span> <span class="toc-text"> MyCode</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#bilibiliå€é€Ÿ"><span class="toc-number">3.1.3.1.</span> <span class="toc-text"> Bilibiliå€é€Ÿ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å­¦ä¹ baidupanæºç "><span class="toc-number">3.2.</span> <span class="toc-text"> å­¦ä¹ baidupanæºç </span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ç¨‹åºçš„é€»è¾‘"><span class="toc-number">3.2.1.</span> <span class="toc-text"> ç¨‹åºçš„é€»è¾‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#panhelperé€»è¾‘"><span class="toc-number">3.2.2.</span> <span class="toc-text"> PanHelperé€»è¾‘</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é™„å½•"><span class="toc-number">4.</span> <span class="toc-text"> é™„å½•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å®˜æ–¹æ–‡æ¡£"><span class="toc-number">4.1.</span> <span class="toc-text"> å®˜æ–¹æ–‡æ¡£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tampermonkeyæ²¹çŒ´ç”¨æˆ·è„šæœ¬apiæ–‡æ¡£-æ•™ç¨‹"><span class="toc-number">4.2.</span> <span class="toc-text"> Tampermonkeyæ²¹çŒ´ç”¨æˆ·è„šæœ¬APIæ–‡æ¡£-æ•™ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è„šæœ¬debugå»ºè®®"><span class="toc-number">4.3.</span> <span class="toc-text"> è„šæœ¬debugå»ºè®®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#jqueryä½¿ç”¨"><span class="toc-number">4.3.1.</span> <span class="toc-text"> jqueryä½¿ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#debugæ–¹æ³•"><span class="toc-number">4.3.2.</span> <span class="toc-text"> debugæ–¹æ³•ï¼š</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å°†æ–‡ç« åŒæ­¥å¤åˆ¶åˆ°csdnå’Œæ€å¦ç¼–è¾‘å™¨çš„è„šæœ¬demo"><span class="toc-number">4.4.</span> <span class="toc-text"> å°†æ–‡ç« åŒæ­¥å¤åˆ¶åˆ°Csdnå’Œæ€å¦ç¼–è¾‘å™¨çš„è„šæœ¬demoï¼š</span></a></li></ol></li></ol></div><!-- top--><i class="fa fa-arrow-up close" id="go-up" aria-hidden="true"></i></body></html>