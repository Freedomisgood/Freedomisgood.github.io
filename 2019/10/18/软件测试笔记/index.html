<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="author" content="Mrli"><meta name="renderer" content="webkit"><meta name="copyright" content="Mrli"><meta name="keywords" content="Mrli's Blog"><meta name="description" content="想和你讲，说了会心动 ，缄默会心安。"><meta name="Cache-Control" content="no-cache"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>软件测试笔记 · Mr.li's Blog</title><link rel="stylesheet" href="/css/style.css?v=2018.7.9"><link rel="stylesheet" href="/css/animation.css?v=2018.7.9"><link rel="icon" href="/img/assets/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.6"><!-- scripts--><script>(function( w ){
  "use strict";
  // rel=preload support test
  if( !w.loadCSS ){
    w.loadCSS = function(){};
  }
  // define on the loadCSS obj
  var rp = loadCSS.relpreload = {};
  // rel=preload feature support test
  // runs once and returns a function for compat purposes
  rp.support = (function(){
    var ret;
    try {
      ret = w.document.createElement( "link" ).relList.supports( "preload" );
    } catch (e) {
      ret = false;
    }
    return function(){
      return ret;
    };
  })();

  // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
  // then change that media back to its intended value on load
  rp.bindMediaToggle = function( link ){
    // remember existing media attr for ultimate state, or default to 'all'
    var finalMedia = link.media || "all";

    function enableStylesheet(){
      link.media = finalMedia;
    }

    // bind load handlers to enable media
    if( link.addEventListener ){
      link.addEventListener( "load", enableStylesheet );
    } else if( link.attachEvent ){
      link.attachEvent( "onload", enableStylesheet );
    }

    // Set rel and non-applicable media type to start an async request
    // note: timeout allows this to happen async to let rendering continue in IE
    setTimeout(function(){
      link.rel = "stylesheet";
      link.media = "only x";
    });
    // also enable media after 3 seconds,
    // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
    setTimeout( enableStylesheet, 3000 );
  };

  // loop through link elements in DOM
  rp.poly = function(){
    // double check this to prevent external calls from running
    if( rp.support() ){
      return;
    }
    var links = w.document.getElementsByTagName( "link" );
    for( var i = 0; i < links.length; i++ ){
      var link = links[ i ];
      // qualify links to those with rel=preload and as=style attrs
      if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
        // prevent rerunning on link
        link.setAttribute( "data-loadcss", true );
        // bind listeners to toggle media back
        rp.bindMediaToggle( link );
      }
    }
  };

  // if unsupported, run the polyfill
  if( !rp.support() ){
    // run once at least
    rp.poly();

    // rerun poly on an interval until onload
    var run = w.setInterval( rp.poly, 500 );
    if( w.addEventListener ){
      w.addEventListener( "load", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    } else if( w.attachEvent ){
      w.attachEvent( "onload", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    }
  }


  // commonjs
  if( typeof exports !== "undefined" ){
    exports.loadCSS = loadCSS;
  }
  else {
    w.loadCSS = loadCSS;
  }
}( typeof global !== "undefined" ? global : this ) );</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" defer></script><script src="/js/main.js?v=2018.7.9" defer></script><!-- fancybox--><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script><!-- busuanzi--><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></head><body><section class="profile-close" id="cxo-profile"><div class="profile-avatar"><i class="fa fa-caret-left"></i><img src="https://avatars1.githubusercontent.com/u/31088082?s=400&amp;u=7a99ff83916afb3f4c5312bd78a1be17fe0e34ed&amp;v=4"></div><!--.profile-saying
  i.fa.fa-comment
  .saying--><div class="cxo-profile-inner"><div class="profile-name">Mrli</div><div class="profile-signature">别装作很努力,<br>因为结局不会陪你演戏。</div><div class="contacts"><div>Contacts:</div><span><a href="http://sighttp.qq.com/msgrd?v=1&amp;uin=1063052964" target="_black">QQ</a></span><span><a href="https://www.cnblogs.com/nymrli/" target="_black">博客园</a></span></div><div class="read-progress"></div></div></section><header id="cxo-intro" style="height: 60vh;background-image: url(/img/intro/index-bg.png);"><nav id="cxo-intro-nav"><section><div class="intro-nav-title"><a href="/">Mr.li's Blog</a></div><div class="intro-nav-label-box"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div><i class="fa fa-bars intro-nav-menu"><div class="intro-nav-drop"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div></i><div class="clear"></div></section></nav><h1 class="post-title">软件测试笔记</h1><div class="post-intros"><div class="post-intro-meta"><span class="post-intro-time"><i class="post-intro-calendar fa fa-edit"></i><span>2019/11/02</span></span><span class="busuanzi-pv" id="busuanzi_container_page_pv"><i class="post-intro-calendar fa fa-user-o"></i><span id="busuanzi_value_page_pv"></span></span><span class="post-intro-tags"><a class="intro-tag fa fa-tag" href="javascript:void(0)" date-tags="Java"> Java</a><a class="intro-tag fa fa-tag" href="javascript:void(0)" date-tags="软件测试"> 软件测试</a></span></div><div class="post-intro-read"><span> Word count: <span class="post-count">3,310</span> | Reading time: <span class="post-count">14</span>min</span></div></div></header><article class="cxo-up" id="cxo-content-outer"><section id="cxo-content-inner"><article class="article-entry" id="post"><h1 id="软件测试笔记"><a class="markdownIt-Anchor" href="#软件测试笔记"></a> 软件测试笔记</h1>
<h2 id="移动应用测试"><a class="markdownIt-Anchor" href="#移动应用测试"></a> 移动应用测试</h2>
<h3 id="appnium使用"><a class="markdownIt-Anchor" href="#appnium使用"></a> appnium使用</h3>
<blockquote>
<p>安装的是appnium-desktop,没有教程中所说的<code>Appium/node_modules/.bin/</code>路径，使用命令行输入<code>appnium</code>和<code>appium-doctor</code>也都没啥反应，后来索性没管，直接跑代码</p>
</blockquote>
<h4 id="真机测试"><a class="markdownIt-Anchor" href="#真机测试"></a> 真机测试</h4>
<p>使用的时候报错<code>Build info: version: 'unknown', revision: 'unknown', time: 'unknown'</code>，以为是appnium版本的问题，第一次安装的是1.13，后来换成了1.9，其实没多大区别，只不过据说要保证版本在1.6以上。</p>
<p>更换版本后，发现还是<code>Build info: version: 'unknown', revision: 'unknown', time: 'unknown'</code>问题，于是试了多次，才终于解决。</p>
<p>步骤一：</p>
<blockquote>
<p>这边是设置appnium连接参数的</p>
</blockquote>
<p>由于群里的高分脚本也是这么设置的，我就以为没多大问题，其实这边还是要修改不少东西的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置自动化相关参数</span></span><br><span class="line">DesiredCapabilities capabilities = <span class="keyword">new</span> DesiredCapabilities();</span><br><span class="line">capabilities.setCapability(<span class="string">"browserName"</span>, <span class="string">""</span>);</span><br><span class="line"><span class="comment">// 确定自己的手机系统是Android、ios的话需要需改</span></span><br><span class="line">capabilities.setCapability(<span class="string">"platformName"</span>, <span class="string">"Android"</span>);</span><br><span class="line"><span class="comment">// 这边要设置成自己的设备uuid，通过adb devices查看</span></span><br><span class="line">capabilities.setCapability(<span class="string">"deviceName"</span>, <span class="string">"Android Emulator"</span>);</span><br><span class="line"><span class="comment">// 这个demo代码会提供好，就不需要自己去找了</span></span><br><span class="line">capabilities.setCapability(<span class="string">"appPackage"</span>, <span class="string">"cn.etouch.ecalendar"</span>);</span><br><span class="line">capabilities.setCapability(<span class="string">"appActivity"</span>, <span class="string">".ECalendar"</span>);</span><br><span class="line">capabilities.setCapability(<span class="string">"noSign"</span>, <span class="string">"true"</span>);</span><br></pre></td></tr></table></figure>
<p>appPackage查看包名(可以找到唯一的应用)：<code>adb shell dumpsys activity | find &quot;mFocusedActivity&quot;</code>，需要的结果即<code>cn.etouch.ecalendar</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys activity | find  "mFocusedActivity"</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; mFocusedActivity: ActivityRecord&#123;1510a73 u0 cn.etouch.ecalendar/.MainActivity t2&#125;</span></span><br></pre></td></tr></table></figure>
<p>activityName查询类名(找到应用上的某个界面)：<code>aapt dump badging &lt;apkPath&gt;</code>然后找到<strong>launchable-activity</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> e.g.</span></span><br><span class="line">E:\android-sdk-windows\build-tools\28.0.3\aapt dump badging C:\mooctest\projects\3399\52660\Zhwnl\apk\Zhwnl.apk | grep launchable-activity</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; launchable-activity: name=<span class="string">'cn.etouch.ecalendar.ECalendar'</span>  label=<span class="string">'中华万年历'</span> icon=<span class="string">''</span></span></span><br></pre></td></tr></table></figure>
<p>步骤二：</p>
<blockquote>
<p>除了代码上设置好连接手机的参数，手机也需要设置电脑能操作手机</p>
</blockquote>
<p>需要打开三个选项：“USB调试”、“USB安装”、“USB调试（安全设置）”</p>
<p>以小米6手机为例:“更多设置”-&gt;“开发者选项”-&gt;“USB调试”、“USB安装”、“USB调试（安全设置）”</p>
<p>由于之前使用python玩过ADB，所以**“USB调试”、&quot;USB调试（安全设置）&quot;<strong>是开启的，而没打开</strong>USB安装**，所以导致了一直失败。实际上打开USB安装后，会安装几个程序比如Unlock、appnium settings等。<strong>其实报错一开始也提示了，没检测到手机，啥啥安装不上</strong>，只不过当时没留意</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; org.openqa.selenium.WebDriverException: An unknown server-side error occurred while processing the command. Original error: Unable to find an active device or emulator with OS 4.1.1. The following are available: cf46749d (8.0.0) (WARNING: The server did not provide any stacktrace information)</span><br><span class="line">Command duration or timeout: 469 milliseconds</span><br><span class="line">Build info: version: &apos;unknown&apos;, revision: &apos;unknown&apos;, time: &apos;unknown&apos;</span><br></pre></td></tr></table></figure>
<p>▲后来又发现，不设置<strong>platformVersion</strong>、<strong>deviceName</strong>直接设置成<strong>Android Emulator</strong>也行，看来最主要的原因还是<strong>手机第一次使用Appnium之前需要安装写appnium的软件</strong></p>
<p><img src="/2019/10/18/软件测试笔记/E:%5Chexo%5Csource_posts%5C%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%AC%94%E8%AE%B0%5Cunicode.png" alt="unicode"></p>
<p>这个应该就是这两行所安装的东西</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置使用unicode键盘，支持输入中文和特殊字符</span></span><br><span class="line">capabilities.setCapability(<span class="string">"unicodeKeyboard"</span>,<span class="string">"true"</span>);</span><br><span class="line"><span class="comment">//设置用例执行完成后重置键盘</span></span><br><span class="line">capabilities.setCapability(<span class="string">"resetKeyboard"</span>,<span class="string">"true"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="夜深模拟器测试"><a class="markdownIt-Anchor" href="#夜深模拟器测试"></a> 夜深模拟器测试</h4>
<p><strong>1 开启USB调试</strong></p>
<p>设置-&gt;关于平板电脑-&gt;多次点击&quot;版本号&quot;进入开发者模式-&gt;开发者选项-&gt;打开**“USB调试”<strong>和</strong>&quot;允许模拟位置&quot;**</p>
<p>2 查看deviceName</p>
<p>命令行中输入<code>adb devices</code>，如果一直没检测到，解决方案如下（我是需要这么做的）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">如果在设备连接过程中，确定设备已经开启USB调试且正确连接到PC，但是仍旧使用adb devices指令查到设备列表为空，则有可能是已安装的安卓SDK中的adb程序版本和模拟器自带的adb程序版本不一致导致的。</span><br><span class="line"></span><br><span class="line">解决办法可能有很多种，这里暂介绍楼主亲测实用的方案：</span><br><span class="line"></span><br><span class="line">第一步：关闭正在运行的的模拟器</span><br><span class="line"></span><br><span class="line">第二步：替换adb.exe程序。</span><br><span class="line"></span><br><span class="line">逍遥模拟器：进入安装目录（默认为..\Microvirt\MEmu），找到adb.exe文件，执行删除。然后进入SDK的安装目录（默认为..\android-sdk-windows\platform-tools），拷贝系统adb.exe到逍遥的原目录即可。</span><br><span class="line"></span><br><span class="line">夜神模拟器：进入安装目录，找到nox_adb.exe文件，执行删除。然后进入SDK的安装目录（默认为..\android-sdk-windows\platform-tools），拷贝系统adb.exe到逍遥的原目录，重命名为“nox_adb.exe”即可。</span><br><span class="line"></span><br><span class="line">第三步：启动模拟器。启动完毕后，打开cmd命令窗口输入 adb devices 再次检查设备连接情况，一般就能正常看到已连接的虚拟设备信息了。</span><br></pre></td></tr></table></figure>
<p>运行代码main.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置自动化相关参数</span></span><br><span class="line">DesiredCapabilities capabilities = <span class="keyword">new</span> DesiredCapabilities();</span><br><span class="line">capabilities.setCapability(<span class="string">"browserName"</span>, <span class="string">""</span>);</span><br><span class="line">capabilities.setCapability(<span class="string">"platformName"</span>, <span class="string">"Android"</span>);</span><br><span class="line"><span class="comment">//        capabilities.setCapability("platformVersion", "8.0.0");</span></span><br><span class="line">capabilities.setCapability(<span class="string">"deviceName"</span>, <span class="string">"127.0.0.1:62001"</span>);</span><br><span class="line">capabilities.setCapability(<span class="string">"appPackage"</span>, <span class="string">"cn.etouch.ecalendar"</span>);</span><br><span class="line">capabilities.setCapability(<span class="string">"appActivity"</span>, <span class="string">".ECalendar"</span>);</span><br><span class="line">capabilities.setCapability(<span class="string">"noSign"</span>, <span class="string">"true"</span>);</span><br></pre></td></tr></table></figure>
<p>然后运行测试代码就能看到这样的画面了</p>
<p><img src="/2019/10/18/软件测试笔记/E:%5Chexo%5Csource_posts%5C%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%AC%94%E8%AE%B0%5C%E5%A4%9C%E7%A5%9E%E6%A8%A1%E6%8B%9F%E5%99%A8.jpg" alt="夜神模拟器"></p>
<h5 id="进入元素审查"><a class="markdownIt-Anchor" href="#进入元素审查"></a> 进入元素审查</h5>
<p><img src="/2019/10/18/软件测试笔记/E:%5Chexo%5Csource_posts%5C%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E7%AC%94%E8%AE%B0%5C%E5%85%83%E7%B4%A0%E5%AE%A1%E6%9F%A5.jpg" alt="元素审查"></p>
<p><a href="https://www.cnblogs.com/amoyshmily/p/10500687.html" target="_blank" rel="noopener">安装教程</a>，我是安装软件测试大赛提供的教程安装下来的，只不过感觉这篇可能将的更好一点。（ appium-doctor 是需要额外用npm安装的，而不是像比赛教程中写的那样）</p>
<h5 id="踩坑记录"><a class="markdownIt-Anchor" href="#踩坑记录"></a> 踩坑记录：</h5>
<p>出现报错<code>UiAutomator exited unexpectedly with code 0, signal null</code></p>
<p><img src="https://img-blog.csdnimg.cn/20181130102850624.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyMzExNTY4,size_16,color_FFFFFF,t_70" alt=""></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> adb shell</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /data/<span class="built_in">local</span>/tmp （如果一次性进不去，可以分层一层层进入）</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3、进入data/<span class="built_in">local</span>/tmp 后ls查看全部目录，应该有一个 AppiumBootstrap.jar，可能你的名字是 AppiumBoots 或者 AppiumBootstrap.jar。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4、将andriod sdk下的AppiumBootstrap.jar发送上去</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> adb push C:\Users\10630\AppData\Local\Programs\Appium\resources\app\node_modules\appium\node_modules\appium-android-driver\bootstrap\bin\AppiumBootstrap.jar /data/<span class="built_in">local</span>/tmp</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5、ok，大功告成</span></span><br></pre></td></tr></table></figure>
<h6 id="adb-unauthorized"><a class="markdownIt-Anchor" href="#adb-unauthorized"></a> adb unauthorized</h6>
<p>1.使用adb连接手机时，即使打开了usb调试，<strong>手机添加了信任</strong>，仍然出现unauthorized的提示</p>
<p>2.<code>C:\Users\(Username)\.android</code>里面删掉adbkey和adbkey.pub两个文件(没添加过信任的话是没有的)，然后重新插拔手机</p>
<p>执行：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb kill-server</span><br><span class="line">adb <span class="built_in">start</span>-server</span><br></pre></td></tr></table></figure>
<p>△如果上述方式还是无效的话，选择“开发者测试”-&gt;&quot;调试&quot;中的撤销USB调试授权，然后重新上述操作</p>
<h3 id="特殊元素定位之获取toast"><a class="markdownIt-Anchor" href="#特殊元素定位之获取toast"></a> 特殊元素定位之获取toast</h3>
<ul>
<li>java-client版本必须满足5.0+</li>
<li>desiredCapabilities中指定automationName为：UIAutomator2</li>
<li>UIAutomator2只支持安卓版本5.0+</li>
<li><code>getElement(By.xpath(&quot;//*[contains(@text,'tips')]&quot;));</code></li>
</ul>
<h3 id="monkey使用"><a class="markdownIt-Anchor" href="#monkey使用"></a> Monkey使用</h3>
<blockquote>
<p>脚本优势：简单、快捷、不需要借助任何工具，可以做简单的性能测试<br>
脚本缺点：只能简单实现坐标、按键等基本操作（根据像素点来进行操作）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#头文件、控制monkey发送消息的参数</span><br><span class="line">type=raw events</span><br><span class="line">count=10</span><br><span class="line">speed=1.0</span><br><span class="line">#以下monkey命令</span><br><span class="line">start data&gt;&gt; </span><br><span class="line"># 开启柠檬杯app</span><br><span class="line">LaunchActivity（com.lemon.lemonban，com.lemon.lemonban.activity.WelcomeActivity）</span><br><span class="line">#让脚本暂停运行4S UserWait（4000）</span><br><span class="line">#点击我的柠檬元素</span><br><span class="line">Tap（600，1220）</span><br><span class="line">#点击我的头像登录</span><br><span class="line">#让脚本暂停运行1S UserWait（1000）</span><br><span class="line">Tap（300，200）</span><br><span class="line">#让脚本暂停运行1s UserWait（2000）</span><br><span class="line">#输入手机号码</span><br><span class="line">DispatchString（18588220110）</span><br><span class="line">#点击密码输入框</span><br><span class="line">Tap（200，650）</span><br><span class="line">#输入密码</span><br><span class="line">DispatchString（123456）</span><br><span class="line">#点击登录按钮</span><br><span class="line">Tap（320，800）</span><br><span class="line">UserWait（3000）</span><br></pre></td></tr></table></figure>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 上传monkey脚本</span><br><span class="line">adb push monkeyScript.txt /sdcard/</span><br><span class="line"># 运行monkey脚本</span><br><span class="line">adb shell monkey -f /sdcard/monkeyScript.txt</span><br></pre></td></tr></table></figure>
<h3 id="uiautomatorviewer使用"><a class="markdownIt-Anchor" href="#uiautomatorviewer使用"></a> uiautomatorviewer使用</h3>
<blockquote>
<p>位置E:\android-sdk-windows\tools</p>
</blockquote>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> on</span><br><span class="line"></span><br><span class="line">adb shell uiautomator dump /sdcard/app.uix</span><br><span class="line">adb pull /sdcard/app.uix .</span><br><span class="line"></span><br><span class="line">adb shell screencap -p /sdcard/app.png</span><br><span class="line">adb pull /sdcard/app.png .</span><br></pre></td></tr></table></figure>
<p>采坑记录:</p>
<blockquote>
<p>小米手机有点坑啊，进行Android开发时需要设置挺多东西的。</p>
</blockquote>
<ol>
<li><strong>关闭MIUI优化</strong>不然没法调试</li>
<li>如果进行uiautomatorviewer调试的话，必须还要把悬浮球给关了，不然没法获取界面。</li>
</ol>
<p>TouchAction</p>
<ol>
<li>
<p>点击操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// press</span></span><br><span class="line">TouchAction ta=<span class="keyword">new</span> TouchAction(driver);<span class="comment">//创建一个TouchAction对象</span></span><br><span class="line">ta.press(element).release().perform();<span class="comment">//按一个元素</span></span><br><span class="line">ta.press(<span class="number">500</span>, <span class="number">450</span>).release().perform();<span class="comment">//按一个坐标点</span></span><br><span class="line"><span class="comment">//按一个元素上的某个点，从左上角偏移100</span></span><br><span class="line">ta.press(element,<span class="number">100</span>,<span class="number">100</span>).release().perform();</span><br><span class="line"></span><br><span class="line"><span class="comment">// tap</span></span><br><span class="line">ta.tap(element).release().perform();<span class="comment">//点一个元素</span></span><br><span class="line">ta.tap(<span class="number">300</span>, <span class="number">500</span>).release().perform();<span class="comment">//点一个坐标点</span></span><br><span class="line"><span class="comment">//按一个元素的某个点，从左上角偏移100</span></span><br><span class="line">ta.tap(element, <span class="number">100</span>, <span class="number">100</span>).release().perform();</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>长按操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// longPress</span></span><br><span class="line">TouchAction ta=<span class="keyword">new</span> TouchAction(driver);<span class="comment">//创建一个TouchAction对象</span></span><br><span class="line">ta.longPress(element).release().perform();<span class="comment">//长按某个元素</span></span><br><span class="line">ta.longPress(element, <span class="number">5000</span>).release().perform();<span class="comment">//长按某个元素，时间是5秒</span></span><br><span class="line">ta.longPress(<span class="number">300</span>, <span class="number">500</span>).release().perform();<span class="comment">//长按某个坐标点</span></span><br><span class="line">ta.longPress(<span class="number">300</span>, <span class="number">500</span>, <span class="number">3000</span>).release().perform();<span class="comment">//长按某个坐标点，时间是5秒</span></span><br><span class="line"><span class="comment">//长按某元素上的某个点，从左上角偏移100</span></span><br><span class="line">ta.longPress(element, <span class="number">100</span>, <span class="number">100</span>).release().perform();</span><br><span class="line"><span class="comment">//长按某元素上的某个点，从左上角偏移100，时间是3秒</span></span><br><span class="line">ta.longPress(element, <span class="number">100</span>, <span class="number">100</span>, <span class="number">3000</span>).release().perform();</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>组合操作–拖拽</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// press + moveTo</span></span><br><span class="line">TouchAction ta=<span class="keyword">new</span> TouchAction(driver);<span class="comment">//创建一个TouchAction对象</span></span><br><span class="line">ta.press(element1).moveTo(element2).release().perform();<span class="comment">//两个元素互换位置</span></span><br><span class="line"><span class="comment">//将元素拖拽到另外一个位置，moveTo中的是相对偏移量</span></span><br><span class="line">ta.press(element1).waitAction(<span class="number">500</span>).moveTo(<span class="number">0</span>,<span class="number">200</span>).waitAction(<span class="number">500</span>).release().perform();</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>连续滑动手势（可用于手势解锁）</p>
</li>
</ol>
   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// press + moveTo</span></span><br><span class="line">TouchAction ta=<span class="keyword">new</span> TouchAction(driver);<span class="comment">//创建一个TouchAction对象</span></span><br><span class="line"><span class="comment">//从第一个点一直滑动到第四个点</span></span><br><span class="line">ta.press(<span class="number">200</span>, <span class="number">200</span>).moveTo(<span class="number">0</span>, <span class="number">100</span>).moveTo(<span class="number">100</span>, <span class="number">0</span>).moveTo(<span class="number">100</span>, <span class="number">100</span>).release().perform();</span><br><span class="line"><span class="comment">//从第一个元素一直滑动到第四元素</span></span><br><span class="line">ta.press(element1).moveTo(element2).moveTo(element3).moveTo(element4).release().perform()</span><br><span class="line"><span class="comment">// swipe</span></span><br><span class="line">driver.swipe(width * <span class="number">3</span> / <span class="number">4</span>, height / <span class="number">2</span>, width / <span class="number">4</span>, height / <span class="number">2</span>, during);</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>其他 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在 0% 到 100% 内双指缩放屏幕 </span></span><br><span class="line">driver.pinch(element=el)</span><br><span class="line"><span class="comment">//放大屏幕 在 100% 以上放大屏幕 </span></span><br><span class="line">driver.zoom(element=el)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><a href="http://www.mamicode.com/info-detail-2390132.html" target="_blank" rel="noopener">appnium定位+操作方式(python)——老版本</a></p>
<p>▲Appium java-client库更新到6.x后，滑动 swipe() 已弃用，且TouchAction类中很多方法也有改变。</p>
<ul>
<li>（ 总的来看，弃用的是 press() longPress() moveTo() tap() 参数使用 x、y轴和webElement 的这种类型，和用到Duration类型的方法 ）</li>
<li>取而代之的是参数类型变了，涉及到XY轴定位的方法，参数使用了<strong>PointOption.point(X坐标, Y坐标)</strong>；涉及到Duration的方法waitAction()，参数使用了WaitOptions.waitOptions(Duration.ofNanos(时间间隔))</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java-client 4.x 滑动 swipe() 案例：</span></span><br><span class="line">driver.swipe(width * <span class="number">3</span> / <span class="number">4</span>, height / <span class="number">2</span>, width / <span class="number">4</span>, height / <span class="number">2</span>, during); </span><br><span class="line"></span><br><span class="line"><span class="comment">//java-client 6.x 滑动案例：</span></span><br><span class="line"><span class="keyword">int</span> nanos=(<span class="keyword">int</span>) (second*<span class="number">1000</span>); </span><br><span class="line">TouchAction action = <span class="keyword">new</span> TouchAction(driver).press(PointOption.point(width* <span class="number">3</span>/<span class="number">4</span>,height/<span class="number">2</span>)).waitAction(WaitOptions.waitOptions(Duration.ofNanos(nanos))).moveTo(PointOption.point(width/<span class="number">4</span>, height/<span class="number">2</span>)).release().perform();</span><br></pre></td></tr></table></figure>
<p><a href="https://discuss.appium.io/t/some-of-the-methods-from-mobileelement-and-appiumdriver-class-missing-in-5-0-4/19039" target="_blank" rel="noopener"> java-client  5.0.4后被移除的函数</a></p>
<h3 id="众测的思路"><a class="markdownIt-Anchor" href="#众测的思路"></a> 众测的思路：</h3>
<ul>
<li>常见输入框的输入范围、限制
<ul>
<li>手机号11位、验证码6位、敏感信息、特殊字符</li>
</ul>
</li>
<li>toast提示框是否正确</li>
<li>控件是否有错别字</li>
</ul>
<h3 id="附录"><a class="markdownIt-Anchor" href="#附录"></a> 附录：</h3>
<h4 id="众包测试报告评分规则"><a class="markdownIt-Anchor" href="#众包测试报告评分规则"></a> 众包测试报告评分规则</h4>
<p>1、众包测试得分=bug报告得分（包括单一状bug报告、fork的bug报告）<br>
+评审得分（点赞，点踩）<br>
2、每个Bug报告满分10分，Bug报告基础分1-5分，选手提交的Bug等级仅供参考，以评审人员判定为准；<br>
3、Bug描述简洁清晰、<strong>复现步骤连贯</strong>、<strong>按序号排序</strong>，评审人员可根据其描述顺利的进行操作并复现Bug，附加3分。<br>
4、Bug截图相关则附加1分，截图上使用红框标注Bug位置则附加1分；<br>
5、点赞点踩得分规则：即为<strong>正确的bug报告点赞</strong>，<strong>错误的bug报告点踩</strong>可得分；反之扣分。<br>
6、若两人提交bug报告相同，依据时间优先原则，后提交的报告计低分，所以若发现的bug已被他人提交，建议Fork（复制并补充修改）或对bug报告进行评审（点赞，点踩）。</p>
<h2 id="开发者测试"><a class="markdownIt-Anchor" href="#开发者测试"></a> 开发者测试</h2>
<p><strong>语句覆盖</strong>： 保证程序中的每一个语句至少被执行一次。 被认为是“最弱的覆盖”</p>
<blockquote>
<p>语句覆盖率：被执行语句的比例</p>
</blockquote>
<p><strong>判定覆盖(分支覆盖)</strong>：CFG (control Flow Graph控制流图 )所有的边都被访问/所有的分支都被访问</p>
<p>▲针对判断语句，在设定案例的时候，要设定True和False的两种案例；与语句覆盖不同的是增加了False的情况</p>
<blockquote>
<p>分支覆盖率：被访问的分支的比例</p>
</blockquote>
<p><strong>条件覆盖</strong></p>
<p>针对判断语句里面案例的取值都要去一次，不考虑条件的取值。</p>
<blockquote>
<p>每个小判断分别为真，其他为假的情况</p>
</blockquote>
<p><strong>判定/条件覆盖</strong></p>
<p>判定覆盖各条件覆盖交叉，针对于判定中的条件取值  、</p>
<blockquote>
<p>每个判定真假各一次(判定覆盖)<br>
每个判定中的条件各取一次(条件覆盖)</p>
</blockquote>
<p><strong>组合覆盖</strong></p>
<p>判定-条件覆盖的加强版</p>
<blockquote>
<p>判定中所有可能的条件组合</p>
</blockquote>
<p><strong>路径覆盖</strong></p>
<p>走完所有可能的路径</p>
<p><a href="https://blog.csdn.net/qq_38712932/article/details/83818589" target="_blank" rel="noopener">语句覆盖、条件覆盖（分支覆盖）、判定覆盖、条件-判定覆盖、组合覆盖、路径覆盖 </a></p>
<h2 id="输入域上的测试"><a class="markdownIt-Anchor" href="#输入域上的测试"></a> 输入域上的测试</h2>
<p>–随机测试</p>
<p>–等价类划分</p>
<p>–边界值分析</p>
<ul>
<li>最小值(min)</li>
<li>略大于最小值(min+)</li>
<li>输入值域内的任意值(nom)</li>
<li>略小于最大值(max-)</li>
<li>最大值(max)</li>
</ul>
<h2 id="input-domain-based-techniquescontinue"><a class="markdownIt-Anchor" href="#input-domain-based-techniquescontinue"></a> Input Domain-Based Techniques(continue)</h2>
<p>•Random Testing</p>
<p>•Combinatorial Testing</p>
</article><!-- lincense--><div class="license-wrapper"><p> <span>Author:  </span><a href="https://nymrli.top">Mrli</a></p><p> <span>Link:  </span><a href="https://nymrli.top/2019/10/18/软件测试笔记/">https://nymrli.top/2019/10/18/软件测试笔记/</a></p><p> <span>Copyright:  </span><span>All articles in this blog are licensed under <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/3.0">CC BY-NC-SA 3.0</a> unless stating additionally.</span></p></div><div class="post-paginator"><a class="prevSlogan" href="/2019/10/24/PAT冲冲冲——甲级/" title="PAT冲冲冲"><span>< PreviousPost</span><br><span class="prevTitle">PAT冲冲冲</span></a><a class="nextSlogan" href="/2019/10/15/玩玩Stm32/" title="玩玩Stm32"><span>NextPost ></span><br><span class="nextTitle">玩玩Stm32</span></a><div class="clear"></div></div><div id="comment"><div id="container"></div><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
  id: '软件测试笔记',
  owner: 'Freedomisgood',
  repo: 'Freedomisgood.github.io',
  oauth: {
    client_id: 'bc5a81fe36017dcd8b63',
    client_secret: '949cec3a1b91742c6249c47259791e4b80a6fa69',
  },
})
gitment.render('container')</script></div></section></article><footer id="cxo-footer-outer"><div id="cxo-footer-inner"><p class="footer-container"><span>Site by </span><a href="http://hexo.io"><span>Hexo</span></a><span> | theme </span><a href="https://github.com/Longlongyu/hexo-theme-Cxo"><span>Cxo</span></a></p><i class="fa fa-user"> </i><span id="busuanzi_value_site_uv"></span><span> | </span><i class="fa fa-eye"> </i><span id="busuanzi_value_site_pv"></span></div></footer><!-- catelog--><div class="toc-wrapper" style="top: 60vh;"><div class="toc-catalog"><i class="fa fa-list"> </i><span>CATALOG</span></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#软件测试笔记"><span class="toc-number">1.</span> <span class="toc-text"> 软件测试笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#移动应用测试"><span class="toc-number">1.1.</span> <span class="toc-text"> 移动应用测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#appnium使用"><span class="toc-number">1.1.1.</span> <span class="toc-text"> appnium使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#真机测试"><span class="toc-number">1.1.1.1.</span> <span class="toc-text"> 真机测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#夜深模拟器测试"><span class="toc-number">1.1.1.2.</span> <span class="toc-text"> 夜深模拟器测试</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#进入元素审查"><span class="toc-number">1.1.1.2.1.</span> <span class="toc-text"> 进入元素审查</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#踩坑记录"><span class="toc-number">1.1.1.2.2.</span> <span class="toc-text"> 踩坑记录：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#adb-unauthorized"><span class="toc-number">1.1.1.2.2.1.</span> <span class="toc-text"> adb unauthorized</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#特殊元素定位之获取toast"><span class="toc-number">1.1.2.</span> <span class="toc-text"> 特殊元素定位之获取toast</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#monkey使用"><span class="toc-number">1.1.3.</span> <span class="toc-text"> Monkey使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uiautomatorviewer使用"><span class="toc-number">1.1.4.</span> <span class="toc-text"> uiautomatorviewer使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#众测的思路"><span class="toc-number">1.1.5.</span> <span class="toc-text"> 众测的思路：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#附录"><span class="toc-number">1.1.6.</span> <span class="toc-text"> 附录：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#众包测试报告评分规则"><span class="toc-number">1.1.6.1.</span> <span class="toc-text"> 众包测试报告评分规则</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开发者测试"><span class="toc-number">1.2.</span> <span class="toc-text"> 开发者测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#输入域上的测试"><span class="toc-number">1.3.</span> <span class="toc-text"> 输入域上的测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#input-domain-based-techniquescontinue"><span class="toc-number">1.4.</span> <span class="toc-text"> Input Domain-Based Techniques(continue)</span></a></li></ol></li></ol></div><!-- top--><i class="fa fa-arrow-up close" id="go-up" aria-hidden="true"></i></body></html>