<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>果粒橙的博客</title>
  
  <subtitle>别装作很努力，结局不会陪你演戏。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://nymrli.top/"/>
  <updated>2019-07-07T02:05:09.903Z</updated>
  <id>https://nymrli.top/</id>
  
  <author>
    <name>果粒橙</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>yaml基础语法_spring_boot</title>
    <link href="https://nymrli.top/2019/07/07/yaml%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95-spring-boot/"/>
    <id>https://nymrli.top/2019/07/07/yaml基础语法-spring-boot/</id>
    <published>2019-07-07T02:04:35.000Z</published>
    <updated>2019-07-07T02:05:09.903Z</updated>
    
    <content type="html"><![CDATA[<h1 id="yaml基础语法-spring-boot"><a href="#yaml基础语法-spring-boot" class="headerlink" title="yaml基础语法_spring_boot"></a>yaml基础语法_spring_boot</h1><blockquote><p>yaml aren’t markup language 即yaml不是标语语言：</p><p>xml（标记语言）:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">&gt; <span class="tag">&lt;<span class="name">port</span>&gt;</span>8888<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">&gt; <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>java spring boot默认全局配置文件:</p><ol><li><p><code>application.properties</code> 使用的时 <code>key=value</code></p></li><li><p><code>application.yaml</code>:</p><ul><li><p>k:<space>v</space></p></li><li><p>通过缩进，垂直对齐指定层次关系</p><ul><li>字符串可以默认不写引号，写引号中的转义符会被翻译：e.g.<code>&quot;天\n津&quot;</code></li></ul></li><li><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">8888</span></span><br><span class="line"><span class="attr">student:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">张三</span></span><br><span class="line"><span class="attr">  age:</span> <span class="number">18</span></span><br><span class="line"><span class="attr">  birthday:</span> <span class="number">2019</span><span class="string">/07/19</span></span><br><span class="line"><span class="attr">  location:</span> <span class="comment"># &lt;==&gt; &#123;province: 陕西, city: 西安&#125; 行内写法</span></span><br><span class="line">  <span class="attr">province:</span> <span class="string">陕西</span></span><br><span class="line">  <span class="attr">city:</span> <span class="string">西安</span></span><br><span class="line">  <span class="comment"># 对应java里的字典map</span></span><br><span class="line"><span class="attr">  hobbies:</span> <span class="comment"># &lt;==&gt; [足球,篮球]</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">足球</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">篮球</span></span><br><span class="line">  <span class="comment"># 对应java里的列表List</span></span><br><span class="line"><span class="attr">  skills:</span> <span class="comment"># &lt;==&gt;[编程,金融]</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">编程</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">金融</span></span><br><span class="line">  <span class="comment"># 对应java里的集合set</span></span><br><span class="line"><span class="attr">  pet:</span><span class="comment"># &lt;==&gt;&#123;name: wc, type: hsq&#125;</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">wc</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">hsq</span></span><br><span class="line"> <span class="comment"># entity的另一个类pet.java</span></span><br></pre></td></tr></table></figure></li><li><p>[Set,List,数组\Array]、{Map、对象类型的属性StudentPet}，[]可以省略，{}不可以省略 </p></li></ul></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;yaml基础语法-spring-boot&quot;&gt;&lt;a href=&quot;#yaml基础语法-spring-boot&quot; class=&quot;headerlink&quot; title=&quot;yaml基础语法_spring_boot&quot;&gt;&lt;/a&gt;yaml基础语法_spring_boot&lt;/h1&gt;&lt;
      
    
    </summary>
    
    
      <category term="计算机基础知识" scheme="https://nymrli.top/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>Python类的继承-super()使用</title>
    <link href="https://nymrli.top/2019/07/07/Python%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF-super-%E4%BD%BF%E7%94%A8/"/>
    <id>https://nymrli.top/2019/07/07/Python类的继承-super-使用/</id>
    <published>2019-07-07T02:03:49.000Z</published>
    <updated>2019-07-07T02:05:43.842Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python类的继承即super-使用"><a href="#Python类的继承即super-使用" class="headerlink" title="Python类的继承即super()使用"></a>Python类的继承即super()使用</h1><h2 id="Super"><a href="#Super" class="headerlink" title="Super"></a>Super</h2><blockquote><p><code>super()</code> 函数是用于调用父类(超类)的一个方法，<em>只有在新式类中可以使用</em></p><p>super 是用来解决多重继承问题的，直接用类名调用父类方法在使用单继承的时候没问题，但是如果使用多继承，会涉及到查找顺序（MRO，Method Resolution Order，采用广度优先（区别于深度优先）的规则定义）、重复调用（钻石继承）等种种问题。</p><p>MRO 就是类的方法解析顺序表, 其实也就是继承父类方法时的顺序表。</p></blockquote><p><strong>语法</strong></p><p>以下是 super() 方法的语法:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 菜鸟教程</span></span><br><span class="line">super(type [, object-<span class="keyword">or</span>-type])</span><br><span class="line"><span class="comment"># 个人理解</span></span><br><span class="line">super( ThisClass [, object(self)])</span><br></pre></td></tr></table></figure><p><strong>参数</strong></p><ul><li>type – 类（type），通常是当前子类。</li><li>object-or-type – 类实例，一般是 self</li></ul><p><strong>含义</strong></p><p>用<code>self</code>这个实例对象去查找<code>ThisClass</code>类的父类拥有的属性（成员方法、数据成员）</p><p>▲. Python3.x 和 Python2.x 的一个区别是: Python 3 可以使用直接使用 <strong>super().xxx</strong> 代替 <strong>super(Class, self).xxx</strong> :</p><p>即平时写的</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestClass</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, *arg, **kwarg)</span>:</span></span><br><span class="line">        super(TestClass, self).__init__() <span class="comment"># 此时init里不用self</span></span><br><span class="line">        <span class="comment"># 等价于 super().__init__() , 含义是用父类的构造函数初始化某些变量</span></span><br><span class="line">        <span class="comment"># 相当于旧式类的 object.__init__(self) # 需要传参self</span></span><br><span class="line">        self.arg = arg</span><br><span class="line">        self.kwarg = kwarg</span><br></pre></td></tr></table></figure><p>完整代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">clsSuper</span><span class="params">(object)</span>:</span></span><br><span class="line">    age = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        print(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">clsSub</span><span class="params">(clsSuper)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(super().age)</span><br><span class="line">        <span class="comment"># 当只是单继承的时候可以直接使用 print(clsSuper.age)，</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    a = clsSuper(<span class="string">'cl'</span>)</span><br><span class="line">    b = clsSub()</span><br></pre></td></tr></table></figure><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul><li><code>super().func()</code>是不用传参<code>self</code>的</li><li><code>super(type, obj).func()</code>函数调用的是obj实例在MRO中下一个父类的可调用func()，而不是type的父类中的func()。即调用最近的可用func()</li><li>使用<code>super()</code>不用指定父类的名称，便于修改维护；同时当继承多个类A、B的时候，用<code>super().__init__()</code>相当于调用多个类的<code>A.__ini__(self)</code>、<code>B.__ini__(self)</code></li></ul><h2 id="与java对比"><a href="#与java对比" class="headerlink" title="与java对比"></a>与java对比</h2><ol><li>Python中子类不会默认调用父类的构造函数，即下面代码。并不会要要求给传<code>name</code>。当然也可以理解为跟java一样调用了一个全空、没有任何内容的构造函数，但是在python中不需要显性写出来，原因部分是特点2（java中存在有参数的构造函数时，必须将空参数的构造函数显式写出，不然子类默认隐式调用空参数的构造函数时会报错说不存在）。</li><li>Python中的构造函数只有一个。但由于存在<code>*arg,**kwarg</code>的存在，所以只要执行类型检查执行不同的代码；即实现了多个构造函数</li><li>Python的类可以多继承，java只能单继承。</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">clsSuper</span><span class="params">(object)</span>:</span></span><br><span class="line">    age = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        print(self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">clsSub</span><span class="params">(clsSuper)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, age)</span>:</span></span><br><span class="line">        print(age)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">class clsSub(clsSuper):</span></span><br><span class="line"><span class="string">    def __init__(self, age):</span></span><br><span class="line"><span class="string">        super().__init__() #调用父类的构造函数</span></span><br><span class="line"><span class="string">        print(age)</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    b = clsSub(<span class="number">18</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python类的继承即super-使用&quot;&gt;&lt;a href=&quot;#Python类的继承即super-使用&quot; class=&quot;headerlink&quot; title=&quot;Python类的继承即super()使用&quot;&gt;&lt;/a&gt;Python类的继承即super()使用&lt;/h1&gt;&lt;h2
      
    
    </summary>
    
    
      <category term="Python" scheme="https://nymrli.top/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Base64编码原理与应用[转]</title>
    <link href="https://nymrli.top/2019/06/15/Base64%E7%BC%96%E7%A0%81%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8-%E8%BD%AC/"/>
    <id>https://nymrli.top/2019/06/15/Base64编码原理与应用-转/</id>
    <published>2019-06-15T04:08:53.000Z</published>
    <updated>2019-06-15T04:09:38.494Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Base64编码原理与应用-转"><a href="#Base64编码原理与应用-转" class="headerlink" title="Base64编码原理与应用[转]"></a><a href="http://blog.xiayf.cn/2016/01/24/base64-encoding/" target="_blank" rel="noopener">Base64编码原理与应用[转]</a></h1><p>2015年，我们在青云平台上实现了“百度云观测”应用。青云应用本质上是一个iframe，在向iframe服务方发送的请求中会携带一些数据，青云平台会使用<code>Base64 URL</code>对这些数据进行编码，其提供的编码解码算法示例如下：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// php版本</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">base64_URL_encode</span><span class="params">($data)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> rtrim(strtr(base64_encode($data), <span class="string">'+/'</span>, <span class="string">'-_'</span>), <span class="string">'='</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">base64_URL_decode</span><span class="params">($data)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> base64_decode(str_pad(strtr($data, <span class="string">'-_'</span>, <span class="string">'+/'</span>), </span><br><span class="line">                            strlen($data) % <span class="number">4</span>, <span class="string">'='</span>, STR_PAD_RIGHT));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以看出，<code>Base64 URL</code> 是标准Base64编码的一个变种，分别用 <code>-</code>、<code>_</code> 替换标准Base64编码结果中的 <code>+</code> 、 <code>/</code> ，并删除结果最后的 <code>=</code> 。</p><p>在实现 “百度云观测” 青云应用时，我在想：</p><ul><li>为什么要使用Base64编码？</li><li>Base64编码算法是什么样的？</li></ul><p>本文是围绕这两个问题思考和实践的结果。</p><p>我认为，理解Base64或其他类似编码的关键有两点：</p><ol><li>计算机最终存储和执行的是01二进制序列，这个二进制序列的含义则由解码程序/解释程序决定</li><li>很多场景下的数据传输要求数据只能由简单通用的字符组成，比如HTTP协议要求请求的首行和请求头都必须是ASCII编码</li></ol><p>以青云应用为例，简单解释这两点。青云平台通过POST一个表单来获取iframe，表单有 <code>payload</code> 和 <code>signature</code> 两项， <code>payload</code> 原本是一个JSON对象，其中的键值可能包含一些特殊字符，比如 <code>&amp;</code>、<code>/</code> 等，由于青云设计的一种通用的请求交互方案，需要考虑iframe服务方服务器端的各种可能实现，有些服务器端实现没有考虑表单值有这些特殊字符，或者POST请求被中间服务器转换成GET请求再次发出，对于URL来说，<code>&amp;</code>、<code>/</code>都是具有特殊含义的字符，所以需要对请求数据进行特殊编码避免这些字符出现 - 数据发送方对数据按规则进行编码，接收方对应地按规则解码数据。</p><h2 id="Base64编码原理"><a href="#Base64编码原理" class="headerlink" title="Base64编码原理"></a>Base64编码原理</h2><p>Base64编码之所以称为Base64，是因为其使用64个字符来对任意数据进行编码，同理有Base32、Base16编码。标准Base64编码使用的64个字符为：</p><p><img src="http://blog.xiayf.cn/2016/01/24/base64-encoding/media/14542616644295.jpg" alt="img"></p><p>这64个字符是各种字符编码（比如ASCII编码）所使用字符的子集，基本，并且可打印。唯一有点特殊的是最后两个字符，因对最后两个字符的选择不同，Base64编码又有很多变种，比如Base64 URL编码。</p><p>Base64编码本质上是一种将二进制数据转成文本数据的方案。对于非二进制数据，是先将其转换成二进制形式，然后每连续6比特（2的6次方=64）计算其十进制值，根据该值在上面的索引表中找到对应的字符，最终得到一个文本字符串。</p><p>假设我们要对 <code>Hello!</code> 进行Base64编码，按照ASCII表，其转换过程如下图所示：</p><p><img src="http://blog.xiayf.cn/2016/01/24/base64-encoding/media/14542967158550.jpg" alt="img"></p><p>可知 <code>Hello!</code> 的Base64编码结果为 <code>SGVsbG8h</code> ，原始字符串长度为6个字符，编码后长度为8个字符，每3个原始字符经Base64编码成4个字符，编码前后长度比4/3，这个长度比很重要 - 比原始字符串长度短，则需要使用更大的编码字符集，这并不我们想要的；长度比越大，则需要传输越多的字符，传输时间越长。Base64应用广泛的原因是在字符集大小与长度比之间取得一个较好的平衡，适用于各种场景。</p><p>是不是觉得Base64编码原理很简单？</p><p>但这里需要注意一个点：Base64编码是<strong>每3个原始字符编码成4个字符</strong>(如<code>Hel</code>被编成了<code>SGVs</code>)，如果原始字符串长度不能被3整除，那怎么办？使用0值来补充原始字符串。===&gt;Base64的编码长度为4的倍数。</p><p>以 <code>Hello!!</code> 为例，其转换过程为：</p><p><img src="http://blog.xiayf.cn/2016/01/24/base64-encoding/media/14542966298000.jpg" alt="img"></p><p><em>注：图表中蓝色背景的二进制0值是额外补充的。</em></p><p><code>Hello!!</code> Base64编码的结果为 <code>SGVsbG8hIQAA</code> 。最后2个零值只是为了Base64编码而补充的，在原始字符中并没有对应的字符，那么Base64编码结果中的最后两个字符 <code>AA</code> 实际不带有效信息，所以需要特殊处理，以免解码错误。</p><p>标准Base64编码通常用 <code>=</code> 字符来替换最后的 <code>A</code>（完全由补充的0组成的A，跟<code>b&#39;H&#39;</code>的结果<code>SA==</code>区别一下），即编码结果为 <code>SGVsbG8hIQ==</code>。因为 <code>=</code> 字符并不在Base64编码索引表中，其意义在于结束符号，在Base64解码时遇到 <code>=</code> 时即可知道一个Base64编码字符串结束。</p><p>如果Base64编码字符串不会相互拼接再传输，那么最后的 <code>=</code> 也可以省略，解码时如果发现Base64编码字符串长度不能被4整除，则先补充 <code>=</code> 字符，再解码即可。</p><p>解码是对编码的逆向操作，但注意一点：<strong>对于最后的两个 = 字符，转换成两个 A 字符，再转成对应的两个6比特二进制0值，接着转成原始字符之前，需要将最后的两个6比特二进制0值丢弃，因为它们实际上不携带有效信息</strong>。</p><p>为了理解Base64编码解码过程，个人实现了一个非常简陋的Base64编码解码程序，见：<a href="https://github.com/youngsterxyf/xiaBase64" target="_blank" rel="noopener">youngsterxyf/xiaBase64</a>。</p><p>由于Base64应用广泛，所以很多编程语言的标准库都内置Base64编码解码包，如：</p><ul><li>PHP：<a href="http://php.net/manual/en/function.base64-encode.php" target="_blank" rel="noopener">base64_encode</a>、<a href="http://php.net/manual/en/function.base64-decode.php" target="_blank" rel="noopener">base64_decode</a></li><li>Python：<a href="https://docs.python.org/2/library/base64.html" target="_blank" rel="noopener">base64包</a></li><li>Go：<a href="https://golang.org/pkg/encoding/base64/" target="_blank" rel="noopener">encoding/base64</a></li><li>…</li></ul><h2 id="Base64编码应用"><a href="#Base64编码应用" class="headerlink" title="Base64编码应用"></a>Base64编码应用</h2><p>本文开始提到的青云应用例子只是Base64编码的应用场景之一。由于Base64编码在字符集大小与编码后数据长度之间做了较好的平衡，以及Base64编码变种形式的多样，使得Base64编码的应用场景非常广泛。下面举2个常用常见的例子。</p><h3 id="HTML内嵌Base64编码图片"><a href="#HTML内嵌Base64编码图片" class="headerlink" title="HTML内嵌Base64编码图片"></a>HTML内嵌Base64编码图片</h3><p>前端在实现页面时，对于一些简单图片，通常会选择将图片内容直接内嵌在页面中，避免不必要的外部资源加载，增大页面加载时间，但是图片数据是二进制数据，该怎么嵌入呢？<a href="http://caniuse.com/#search=Data URI" target="_blank" rel="noopener">绝大多数现代浏览器</a>都支持一种名为 <code>Data URLs</code> 的特性，允许使用Base64对图片或其他文件的二进制数据进行编码，将其作为文本字符串嵌入网页中。以百度搜索首页为例，其中语音搜索的图标是个背景图片，其内容以 <code>Data URLs</code> 形式直接写在css中，这个css内容又直接嵌在HTML页面中，如下图所示：</p><p><img src="http://blog.xiayf.cn/2016/01/24/base64-encoding/media/14543011032759.jpg" alt="img"></p><p><code>Data URLs</code> 格式为：<code>url(data:文件类型;编码方式,编码后的文件内容)</code>。</p><p>当然，也可以直接基于image标签嵌入图片，如下所示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img alt=&quot;Embedded Image&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIA...&quot; /&gt;</span><br></pre></td></tr></table></figure><p>但请注意：如果图片较大，图片的色彩层次比较丰富，则不适合使用这种方式，因为其Base64编码后的字符串非常大，会明显增大HTML页面，影响加载速度。</p><h3 id="MIME（多用途互联网邮件扩展）"><a href="#MIME（多用途互联网邮件扩展）" class="headerlink" title="MIME（多用途互联网邮件扩展）"></a>MIME（多用途互联网邮件扩展）</h3><p>我们的电子邮件系统，一般是使用SMTP（简单邮件传输协议）将邮件从客户端发往服务器端，邮件客户端使用POP3（邮局协议，第3版本）或IMAP（交互邮件访问协议）从服务器端获取邮件。</p><p>SMTP协议一开始是基于纯ASCII文本的，对于二进制文件（比如邮件附件中的图像、声音等）的处理并不好，所以后来新增MIME标准来编码二进制文件，使其能够通过SMTP协议传输。</p><p>举例来说，我给自己发封邮件，正文为空，带一个名为hello.txt的附件，内容为 <code>您好！世界！</code>。导出邮件源码，其关键部分如下图所示：</p><p><img src="http://blog.xiayf.cn/2016/01/24/base64-encoding/media/14543057568109.jpg" alt="img"></p><p><code>MIME-Version: 1.0</code>：表示当前使用MIME标准1.0版本。</p><p><code>Content-Type: text/plain; name=&quot;hello.txt&quot;</code>：表示附件文件名为 <code>hello.txt</code> ，格式为纯文本。</p><p><code>Content-Transfer-Encoding: base64</code>：表示附件文件内容使用base64编码后传输。</p><p><code>5oKo5aW977yM5LiW55WM77yB</code>：则是文件内容 <code>您好，世界！</code> Base64编码后的结果。</p><p>不过，MIME使用的不是标准Base64编码。</p><h2 id="切忌误用"><a href="#切忌误用" class="headerlink" title="切忌误用"></a>切忌误用</h2><p>可能会有人在不理解Base64编码的情况下，将其误用于数据加密或数据校验。</p><p>Base64是一种数据编码方式，目的是让数据符合传输协议的要求。标准Base64编码解码无需额外信息即完全可逆，即使你自己自定义字符集设计一种类Base64的编码方式用于数据加密，在多数场景下也较容易破解。</p><p>对于数据加密应该使用专门的<strong>目前还没有有效方式快速破解的</strong>加密算法。比如：对称加密算法<code>AES-128-CBC</code>，对称加密需要密钥，只要密钥没有泄露，通常难以破解；也可以使用非对称加密算法，如 <code>RSA</code>，利用极大整数因数分解的计算量极大这一特点，使得使用公钥加密的数据，只有使用私钥才能快速解密。</p><p>对于数据校验，也应该使用专门的消息认证码生成算法，如 <code>HMAC</code> - 一种使用单向散列函数构造消息认证码的方法，其过程是不可逆的、唯一确定的，并且使用密钥来生成认证码，其目的是防止数据在传输过程中被篡改或伪造。将原始数据与认证码一起传输，数据接收端将原始数据使用相同密钥和相同算法再次生成认证码，与原有认证码进行比对，校验数据的合法性。</p><p>那么针对各大网站被脱库的问题，请问应该怎么存储用户的登录密码？</p><p>答案是：在注册时，根据用户设置的登录密码，生成其<strong>消息认证码</strong>，然后存储用户名和消息认证码，不存储原始密码。每次用户登录时，根据登录密码，生成消息认证码，与数据库中存储的消息认证码进行比对，以确认是否为有效用户，这样即使网站被脱库，用户的原始密码也不会泄露，不会为用户使用的其他网站带来账号风险。</p><p>当然，使用的消息认证码算法其哈希碰撞的概率应该极低才行，目前一般在HMAC算法中使用SHA256。对于这种方式需要注意一点：防止用户使用弱密码，否则也可能会被暴力破解。现在的网站一般要求用户密码6个字符以上，并且同时有数字和大小写字母，甚至要求有特殊字符。</p><p>另外，也可以使用加入随机salt的哈希算法来存储校验用户密码。这里暂不细述。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Base64兼顾字符集大小和编码后数据长度，并且可以灵活替换字符集的最后两个字符，以应对多样的需求，使其适用场景非常广泛。</p><p>当然，很多场景下有多种编码方式可选择，并非Base64编码不可，视需求，权衡利弊而定。</p><h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><h3 id="Base64、Base32、Base16区别"><a href="#Base64、Base32、Base16区别" class="headerlink" title="Base64、Base32、Base16区别"></a>Base64、Base32、Base16区别</h3><p>标准Base64：<br>包含大写字母（A-Z）,小写字母（a-z），数字（0-9）以及+/;<br>Base32:<br>而Base32中只有大写字母（A-Z）和数字234567；<br>Base16:<br>而Base16就是16进制，他的范围是数字(0-9)，字母（ABCDEF）；</p><p>顺便说一句，当ASCll用Base加密达不到所对应的位数的时候用=号补齐；<br>在这里附带由三种Base加密的:I love you！<br>Base64:SSBsb3ZlIHlvde+8gQ==<br>Base32:JEQGY33WMUQHS33V566IC===<br>Base16:49206c6f766520796f75efbc81</p><hr><p>1.由上可知，Base64编码后字符串长度为4的倍数</p><p>2.标准Base64编码通常用 <code>=</code> 字符来替换最后的 <code>A</code>（完全由补充的0组成的A，跟<code>b&#39;H&#39;</code>的结果<code>SA==</code>区别一下，<code>SA==</code>的A并不是全部由补充的0组成）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Base64编码原理与应用-转&quot;&gt;&lt;a href=&quot;#Base64编码原理与应用-转&quot; class=&quot;headerlink&quot; title=&quot;Base64编码原理与应用[转]&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://blog.xiayf.cn/2016/01/24
      
    
    </summary>
    
    
      <category term="爬虫" scheme="https://nymrli.top/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Python的构建工具setup.py</title>
    <link href="https://nymrli.top/2019/06/15/Python%E7%9A%84%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7setup-py/"/>
    <id>https://nymrli.top/2019/06/15/Python的构建工具setup-py/</id>
    <published>2019-06-15T04:08:44.000Z</published>
    <updated>2019-06-15T04:09:21.657Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python的构建工具setup-py"><a href="#Python的构建工具setup-py" class="headerlink" title="Python的构建工具setup.py"></a>Python的构建工具setup.py</h1><h2 id="setup-py各参数介绍："><a href="#setup-py各参数介绍：" class="headerlink" title="setup.py各参数介绍："></a>setup.py各参数介绍：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">--name 库名称，▲需要注意的是不要大写，不然会有坑</span><br><span class="line">--version (-V) 包版本</span><br><span class="line">--author 程序的作者</span><br><span class="line">--author_email 程序的作者的邮箱地址</span><br><span class="line">--maintainer 维护者</span><br><span class="line">--maintainer_email 维护者的邮箱地址</span><br><span class="line">--url 程序的官网地址</span><br><span class="line">--license 程序的授权信息</span><br><span class="line">--description 程序的简单描述</span><br><span class="line">--long_description 程序的详细描述</span><br><span class="line">--platforms 程序适用的软件平台列表</span><br><span class="line">--classifiers 程序的所属分类列表</span><br><span class="line">--keywords 程序的关键字列表</span><br><span class="line">--packages 需要处理的包目录（包含__init__.py的文件夹） </span><br><span class="line">--py_modules 需要打包的python文件列表</span><br><span class="line">--download_url 程序的下载地址</span><br><span class="line">--cmdclass </span><br><span class="line">--data_files 打包时需要打包的数据文件，如图片，配置文件等</span><br><span class="line">--scripts 安装时需要执行的脚步列表</span><br><span class="line">--package_dir 告诉setuptools哪些目录下的文件被映射到哪个源码包。一个例子：package_dir = &#123;&apos;&apos;: &apos;lib&apos;&#125;，表示“root package”中的模块都在lib 目录中。</span><br><span class="line">--requires 定义依赖哪些模块 </span><br><span class="line">--provides定义可以为哪些模块提供依赖 </span><br><span class="line">--find_packages() 对于简单工程来说，手动增加packages参数很容易，刚刚我们用到了这个函数，它默认在和setup.py同一目录下搜索各个含有 __init__.py的包。</span><br><span class="line">--install_requires = [&quot;requests&quot;] 需要安装的依赖包</span><br><span class="line">--entry_points 动态发现服务和插件，下面详细讲</span><br></pre></td></tr></table></figure><p>find_packages()还可以将包统一放在一个src目录中，另外，这个包内可能还有aaa.txt文件和data数据文件夹。另外，也可以排除一些特定的包 <code>find_packages(exclude=[&quot;*.tests&quot;, &quot;*.tests.*&quot;, &quot;tests.*&quot;, &quot;tests&quot;])</code></p><h2 id="实测操作"><a href="#实测操作" class="headerlink" title="实测操作"></a>实测操作</h2><h3 id="需要事前交代的内容"><a href="#需要事前交代的内容" class="headerlink" title="需要事前交代的内容"></a>需要事前交代的内容</h3><h4 id="模板setup-py"><a href="#模板setup-py" class="headerlink" title="模板setup.py"></a>模板setup.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Note: To use the 'upload' functionality of this file, you must:</span></span><br><span class="line"><span class="comment">#   $ pip install twine</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> shutil <span class="keyword">import</span> rmtree</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> setuptools <span class="keyword">import</span> find_packages, setup, Command</span><br><span class="line"></span><br><span class="line"><span class="comment"># Package meta-data.</span></span><br><span class="line">NAME = <span class="string">'cltest'</span></span><br><span class="line">DESCRIPTION = <span class="string">'know how to'</span></span><br><span class="line">URL = <span class="string">''</span></span><br><span class="line">EMAIL = <span class="string">'10630529664@qq.com'</span></span><br><span class="line">AUTHOR = <span class="string">'Gao Liang'</span></span><br><span class="line">REQUIRES_PYTHON = <span class="string">'&gt;=3.0.0'</span></span><br><span class="line">VERSION = <span class="string">'0.3.0'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># What packages are required for this module to be executed?</span></span><br><span class="line">REQUIRED = [</span><br><span class="line">    <span class="string">'requests &gt;= 2.20.0'</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># The rest you shouldn't have to touch too much :)</span></span><br><span class="line"><span class="comment"># ------------------------------------------------</span></span><br><span class="line"><span class="comment"># Except, perhaps the License and Trove Classifiers!</span></span><br><span class="line"><span class="comment"># If you do change the License, remember to change the Trove Classifier for that!</span></span><br><span class="line"></span><br><span class="line">here = os.path.abspath(os.path.dirname(__file__))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Import the README and use it as the long-description.</span></span><br><span class="line"><span class="comment"># Note: this will only work if 'README.md' is present in your MANIFEST.in file!</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> io.open(os.path.join(here, <span class="string">'README.md'</span>), encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        long_description = <span class="string">'\n'</span> + f.read()</span><br><span class="line"><span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">    long_description = DESCRIPTION</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load the package's __version__.py module as a dictionary.</span></span><br><span class="line">about = &#123;&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> VERSION:</span><br><span class="line">    <span class="keyword">with</span> open(os.path.join(here, NAME, <span class="string">'__version__.py'</span>)) <span class="keyword">as</span> f:</span><br><span class="line">        exec(f.read(), about)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    about[<span class="string">'__version__'</span>] = VERSION</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UploadCommand</span><span class="params">(Command)</span>:</span></span><br><span class="line">    <span class="string">"""Support setup.py upload."""</span></span><br><span class="line"></span><br><span class="line">    description = <span class="string">'Build and publish the package.'</span></span><br><span class="line">    user_options = []</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">status</span><span class="params">(s)</span>:</span></span><br><span class="line">        <span class="string">"""Prints things in bold."""</span></span><br><span class="line">        print(<span class="string">'\033[1m&#123;0&#125;\033[0m'</span>.format(s))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initialize_options</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">finalize_options</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.status(<span class="string">'Removing previous builds…'</span>)</span><br><span class="line">            rmtree(os.path.join(here, <span class="string">'dist'</span>))</span><br><span class="line">        <span class="keyword">except</span> OSError:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">        self.status(<span class="string">'Building Source and Wheel (universal) distribution…'</span>)</span><br><span class="line">        os.system(<span class="string">'&#123;0&#125; setup.py sdist bdist_wheel --universal'</span>.format(sys.executable))</span><br><span class="line"></span><br><span class="line">        self.status(<span class="string">'Uploading the package to PyPI via Twine…'</span>)</span><br><span class="line">        os.system(<span class="string">'twine upload dist/*'</span>)</span><br><span class="line"></span><br><span class="line">        self.status(<span class="string">'Pushing git tags…'</span>)</span><br><span class="line">        os.system(<span class="string">'git tag v&#123;0&#125;'</span>.format(about[<span class="string">'__version__'</span>]))</span><br><span class="line">        os.system(<span class="string">'git push --tags'</span>)</span><br><span class="line"></span><br><span class="line">        sys.exit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Where the magic happens:</span></span><br><span class="line">setup(</span><br><span class="line">    name=NAME,</span><br><span class="line">    version=about[<span class="string">'__version__'</span>],</span><br><span class="line">    description=DESCRIPTION,</span><br><span class="line">    long_description=long_description,</span><br><span class="line">    long_description_content_type=<span class="string">'text/markdown'</span>,</span><br><span class="line">    author=AUTHOR,</span><br><span class="line">    author_email=EMAIL,</span><br><span class="line">    python_requires=REQUIRES_PYTHON,</span><br><span class="line">    url=URL,</span><br><span class="line">    packages=find_packages(exclude=(<span class="string">'tests'</span>,)),</span><br><span class="line">    <span class="comment"># If your package is a single module, use this instead of 'packages':</span></span><br><span class="line">    <span class="comment"># py_modules=['mypackage'],</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># entry_points=&#123;</span></span><br><span class="line">    <span class="comment">#     'console_scripts': ['mycli=mymodule:cli'],</span></span><br><span class="line">    <span class="comment"># &#125;,</span></span><br><span class="line">    install_requires=REQUIRED,</span><br><span class="line">    include_package_data=<span class="keyword">True</span>,</span><br><span class="line">    license=<span class="string">'MIT'</span>,</span><br><span class="line">    classifiers=[</span><br><span class="line">        <span class="comment"># Trove classifiers</span></span><br><span class="line">        <span class="comment"># Full list: https://pypi.python.org/pypi?%3Aaction=list_classifiers</span></span><br><span class="line">        <span class="string">'License :: OSI Approved :: MIT License'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: 3'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: 3.6'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: Implementation :: CPython'</span>,</span><br><span class="line">        <span class="string">'Programming Language :: Python :: Implementation :: PyPy'</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># $ setup.py publish support.</span></span><br><span class="line">    cmdclass=&#123;</span><br><span class="line">        <span class="string">'upload'</span>: UploadCommand,</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="待打包的目录树："><a href="#待打包的目录树：" class="headerlink" title="待打包的目录树："></a>待打包的目录树：</h4><blockquote><p>E:.<br>│  MANIFEST.in<br>│  out.json<br>│  README.md<br>│  setup.py<br>│<br>└─files<br>     in.json<br>     txt.txt<br>     world.py<br>     <code>__init__.py</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ACCOUNT = <span class="string">'mrli'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHello</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"hello &#123;&#125;"</span>.format(ACCOUNT))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">readTXT</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'txt.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        print(f.read())</span><br><span class="line">    <span class="comment"># print( os.listdir() )</span></span><br></pre></td></tr></table></figure><h4 id="MANIFEST-in内容"><a href="#MANIFEST-in内容" class="headerlink" title="MANIFEST.in内容"></a><code>MANIFEST.in</code>内容</h4><p><code>MANIFEST.in</code>决定了除了Py文件外的什么说明、配置文件会被打包进去(如<code>.txt、.json</code>)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Include the README</span><br><span class="line">include *.md</span><br><span class="line"></span><br><span class="line"># Include the txt file</span><br><span class="line">include */*.txt</span><br><span class="line"></span><br><span class="line"># Include the data files</span><br><span class="line"># recursive-include xxxx/utils */*.json</span><br></pre></td></tr></table></figure><p>注意我操作这边时并没有include json文件，所以生成的项目树中也没有任何的json文件（无论是<code>in.json</code>还是<code>out.json</code>），而<code>txt.txt</code>是包含的，并且之后甚至能用readTXT()函数，直接读取打包的<code>txt.txt</code>的内容。</p><h5 id="关于MANIFEST-in"><a href="#关于MANIFEST-in" class="headerlink" title="关于MANIFEST.in"></a>关于<code>MANIFEST.in</code></h5><p>项目里会有一些非py文件，比如html和js等，这时候就要靠<code>include_package_data</code> 和 <code>package_data</code>及<code>packages</code>来指定了。<code>package_data</code>一般写成 <code>{&#39;your_package_name&#39;: [&quot;files&quot;]}</code>。keywords便于pypi索引。</p><p>▲.然而只设置了<code>include_package_data</code>还没完，还需要一个<code>MANIFEST.in</code>文件来明确指定哪些文件需要打到包中。===&gt;如果<code>include_package_data=True</code>的话，那么还需要写个<code>MANIFEST.in</code>来明确。</p><h3 id="python-setup-py-install安装"><a href="#python-setup-py-install安装" class="headerlink" title="python setup.py install安装"></a><code>python setup.py install</code>安装</h3><p>安装后的目录树</p><blockquote><p>│  MANIFEST.in<br>│  out.json(这是原来就在的)<br>│  README.md<br>│  setup.py<br>│<br>├─build（生成的文件夹）<br>│  ├─bdist.win-amd64<br>│  └─lib<br>│      └─files<br>│              txt.txt<br>│              world.py<br>│              <strong>init</strong>.py<br>│<br>├─cltest.egg-info（生成的文件夹）<br>│      dependency_links.txt<br>│      PKG-INFO<br>│      requires.txt<br>│      SOURCES.txt<br>│      top_level.txt<br>│<br>├─dist（生成的文件夹）<br>│      cltest-0.3.0-py3.7.egg<br>│<br>└─files<br>     in.json<br>     txt.txt<br>     world.py<br>     <code>__init__.py</code></p></blockquote><p>一共生成了<strong>3个文件夹</strong>为<code>build</code>、<code>dist</code>、<code>cltest.egg-info</code>，</p><ul><li><p><code>build\lib</code>下的就是自己想要打包的库的内容，即<code>files</code>里的模块。</p></li><li><p><code>dist</code>是加入到虚拟环境库下的文件<code>venv\Lib\site-packages</code>中可以找到<code>cltest-0.3.0-py3.7.egg</code></p></li><li><p><code>cltest.egg-info</code>中有生成很多文件</p><ul><li><p><code>dependency_links.txt</code>空的</p></li><li><p><code>PKG-INFO</code>内容是setup.py中设置的，关于库的描述</p><ul><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Metadata-Version: 2.1</span><br><span class="line">Name: cltest</span><br><span class="line">Version: 0.3.0</span><br><span class="line">Summary: know how to</span><br><span class="line">Home-page: UNKNOWN</span><br><span class="line">Author: Gao Liang</span><br><span class="line">Author-email: 10630529664@qq.com</span><br><span class="line">License: MIT</span><br><span class="line">Description: </span><br><span class="line">        # 测试Setup工具</span><br><span class="line">        </span><br><span class="line">        hhhh</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">Platform: UNKNOWN</span><br><span class="line">Classifier: License :: OSI Approved :: MIT License</span><br><span class="line">Classifier: Programming Language :: Python</span><br><span class="line">Classifier: Programming Language :: Python :: 3</span><br><span class="line">Classifier: Programming Language :: Python :: 3.6</span><br><span class="line">Classifier: Programming Language :: Python :: Implementation :: CPython</span><br><span class="line">Classifier: Programming Language :: Python :: Implementation :: PyPy</span><br><span class="line">Requires-Python: &gt;=3.0.0</span><br><span class="line">Description-Content-Type: text/markdown</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>requires.txt</code>：内容是<code>setup.py</code>中<code>install_requires=REQUIRED</code>里设置的依赖内容，写法参看<code>requirements.txt</code></p></li><li><p><code>SOURCES.txt</code>：列出了所有被打包的文件</p><ul><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MANIFEST.in</span><br><span class="line">README.md</span><br><span class="line">setup.py</span><br><span class="line">cltest.egg-info/PKG-INFO</span><br><span class="line">cltest.egg-info/SOURCES.txt</span><br><span class="line">cltest.egg-info/dependency_links.txt</span><br><span class="line">cltest.egg-info/requires.txt</span><br><span class="line">cltest.egg-info/top_level.txt</span><br><span class="line">files/__init__.py</span><br><span class="line">files/txt.txt</span><br><span class="line">files/world.py</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>top_level.txt</code>：列出了可用的模块，应该是由<code>packages=find_packages(exclude=(&#39;tests&#39;,)),</code>决定的，由于我只写了一个包<code>files</code>，所以内容也只有</p><ul><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">files</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h3 id="如何使用？"><a href="#如何使用？" class="headerlink" title="如何使用？"></a>如何使用？</h3><p>这边需要注意的是在<code>setup.py</code>中设置<code>name=&#39;cltest&#39;</code>是指的整个库的名字，但真正使用的是要看这个库下有哪些可用的包，包下有哪些模块。</p><p>在我的这个例子下面，可以通过库名<code>cltest</code>来找到、下载我这个库。在安装完以后，导入就得知道包名了，这边是<code>files</code>，所以使用得代码应该是</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> files <span class="keyword">import</span> world</span><br><span class="line">world.readTXT()</span><br></pre></td></tr></table></figure><p>这个现象其实还挺常见的，比如<code>beautifulSoup4</code>库，使用的时候是<code>from bs4 import ..</code>；以及<code>python-opencv2</code>库，需要<code>import cv2 as cv</code>。其实就是这边<strong>库名与包名</strong>的区别。</p><h3 id="坑点记录"><a href="#坑点记录" class="headerlink" title="坑点记录:"></a>坑点记录:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> files <span class="keyword">import</span> world</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">def readTXT():</span></span><br><span class="line"><span class="string">    with open('txt.txt', 'r') as f:</span></span><br><span class="line"><span class="string">        print(f.read())</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">world.readTXT()</span><br></pre></td></tr></table></figure><p>由于’txt.txt’是相对路径，所以只有在运行脚本位置有<code>txt.txt</code>文件时才不会报错，一开始<code>from files import world</code>时报错<code>txt.txt</code>以为时<code>txt.txt</code>没有被打包进去（其实可以通过<code>Sources.txt</code>文件查看到底有没有被打包进去），后来才明白是使用<code>readTXT()</code>的当前目录下不存在而已。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python的构建工具setup-py&quot;&gt;&lt;a href=&quot;#Python的构建工具setup-py&quot; class=&quot;headerlink&quot; title=&quot;Python的构建工具setup.py&quot;&gt;&lt;/a&gt;Python的构建工具setup.py&lt;/h1&gt;&lt;h2 i
      
    
    </summary>
    
    
      <category term="Python" scheme="https://nymrli.top/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Oauth2原理、使用</title>
    <link href="https://nymrli.top/2019/06/03/Oauth2%E5%8E%9F%E7%90%86%E3%80%81%E4%BD%BF%E7%94%A8/"/>
    <id>https://nymrli.top/2019/06/03/Oauth2原理、使用/</id>
    <published>2019-06-03T13:22:30.000Z</published>
    <updated>2019-06-03T13:24:00.063Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Oauth2原理、使用"><a href="#Oauth2原理、使用" class="headerlink" title="Oauth2原理、使用"></a>Oauth2原理、使用</h1><h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p>快递员–&gt;门禁–&gt;小区–&gt;我家    &lt;=====&gt; 第三方应用 –&gt; 微信墙 —&gt;账号–&gt;个人数据</p><blockquote><p>简单说，<em>OAuth</em> 就是一种授权机制。数据的所有者告诉系统，同意授权第三方应用进入系统，获取这些数据。系统从而产生一个<strong>短期的进入令牌</strong>（token），用来<u>代替密码</u>，供第三方应用使用。</p></blockquote><h2 id="OAuth-的核心就是向第三方应用颁发令牌"><a href="#OAuth-的核心就是向第三方应用颁发令牌" class="headerlink" title="OAuth 的核心就是向第三方应用颁发令牌"></a><strong>OAuth 的核心就是向第三方应用颁发令牌</strong></h2><h3 id="令牌特点："><a href="#令牌特点：" class="headerlink" title="令牌特点："></a>令牌特点：</h3><p>（1）令牌是短期的，到期会自动失效，用户自己无法修改。密码一般长期有效，用户不修改，就不会发生变化。</p><p>（2）令牌可以被数据所有者撤销，会立即失效。以上例而言，屋主可以随时取消快递员的令牌。密码一般不允许被他人撤销。</p><p>（3）令牌有权限范围（scope），比如只能进小区的二号门。对于网络服务来说，只读令牌就比读写令牌更安全。密码一般是完整权限。</p><h2 id="OAuth是什么？"><a href="#OAuth是什么？" class="headerlink" title="OAuth是什么？"></a>OAuth是什么？</h2><p> 引入了一个授权层，用来分离两种不同的角色：客户端和资源所有者。……资源所有者同意以后，资源服务器可以向客户端颁发令牌。客户端通过令牌，去请求数据。</p><h2 id="四种获得令牌的流程"><a href="#四种获得令牌的流程" class="headerlink" title="四种获得令牌的流程:"></a><strong>四种获得令牌的流程</strong>:</h2><ul><li><p>授权码（authorization-code）</p><ul><li><p>1.发送请求A-&gt;B</p><ul><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https://b.com/oauth/authorize?</span><br><span class="line">  response_type=code&amp;</span><br><span class="line">  client_id=CLIENT_ID&amp;</span><br><span class="line">  redirect_uri=CALLBACK_URL&amp;</span><br><span class="line">  scope=read</span><br></pre></td></tr></table></figure></li><li><p>A（客户端）-&gt;B（）<code>response_type</code>参数表示要求返回授权码（<code>code</code>），<code>client_id</code>参数让 B 知道是谁在请求，<code>redirect_uri</code>参数是 B 接受或拒绝请求后的跳转网址，<code>scope</code>参数表示要求的授权范围（这里是只读）。</p></li></ul></li><li><p>第二步，用户跳转后，B 网站会要求用户登录，然后询问是否同意给予 A 网站授权。用户表示同意，这时 B 网站就会跳回<code>redirect_uri</code>参数指定的网址。跳转时，会传回一个授权码，就像<code>https://a.com/callback?code=AUTHORIZATION_CODE</code></p></li><li><p>第三步，A 网站拿到授权码以后，就可以在后端，向 B 网站请求令牌。</p><ul><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">https://b.com/oauth/token?</span><br><span class="line"> client_id=CLIENT_ID&amp;</span><br><span class="line"> client_secret=CLIENT_SECRET&amp;</span><br><span class="line"> grant_type=authorization_code&amp;</span><br><span class="line"> code=AUTHORIZATION_CODE&amp;</span><br><span class="line"> redirect_uri=CALLBACK_URL</span><br></pre></td></tr></table></figure><p>上面 URL 中，<code>client_id</code>参数和<code>client_secret</code>参数用来让 B 确认 A 的身份（<code>client_secret</code>参数是保密的，因此只能在后端发请求），<code>grant_type</code>参数的值是<code>AUTHORIZATION_CODE</code>，表示采用的授权方式是授权码，<code>code</code>参数是上一步拿到的授权码，<code>redirect_uri</code>参数是令牌颁发后的回调网址。</p></li></ul></li><li><p>第四步，B 网站收到请求以后，就会颁发令牌。具体做法是向<code>redirect_uri</code>指定的网址，发送一段 JSON 数据。</p><ul><li><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;    </span><br><span class="line">  <span class="attr">"access_token"</span>:<span class="string">"ACCESS_TOKEN"</span>,</span><br><span class="line">  <span class="attr">"token_type"</span>:<span class="string">"bearer"</span>,</span><br><span class="line">  <span class="attr">"expires_in"</span>:<span class="number">2592000</span>,</span><br><span class="line">  <span class="attr">"refresh_token"</span>:<span class="string">"REFRESH_TOKEN"</span>,</span><br><span class="line">  <span class="attr">"scope"</span>:<span class="string">"read"</span>,</span><br><span class="line">  <span class="attr">"uid"</span>:<span class="number">100101</span>,</span><br><span class="line">  "info":&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面 JSON 数据中，<code>access_token</code>字段就是令牌，A 网站在后端拿到了。</p></li></ul></li></ul></li><li><p>隐藏式（implicit）</p><ul><li><blockquote><p>有些 Web 应用是纯前端应用，没有后端。这时就不能用上面的方式了，必须将令牌储存在前端。</p></blockquote></li><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https://b.com/oauth/authorize?</span><br><span class="line">  response_type=token&amp;</span><br><span class="line">  client_id=CLIENT_ID&amp;</span><br><span class="line">  redirect_uri=CALLBACK_URL&amp;</span><br><span class="line">  scope=read</span><br></pre></td></tr></table></figure><p><code>response_type</code>参数为<code>token</code>，表示要求直接返回令牌。</p></li><li><p><code>https://a.com/callback#token=ACCESS_TOKEN`</code>token`参数就是令牌，A 网站因此直接在前端拿到令牌。</p></li><li><p>▲注意，令牌的位置是 URL 锚点（fragment），而不是查询字符串（querystring），这是因为 OAuth 2.0 允许跳转网址是 HTTP 协议，因此存在”中间人攻击”的风险，而浏览器跳转时，锚点不会发到服务器，就减少了泄漏令牌的风险。</p></li></ul></li><li><p>密码式（password）：</p><ul><li><blockquote><p>如果你高度信任某个应用，RFC 6749 也允许用户把用户名和密码，直接告诉该应用。该应用就使用你的密码，申请令牌，这种方式称为”密码式”（password）。</p></blockquote></li></ul></li><li><p>客户端凭证（client credentials）</p><ul><li><blockquote><p>适用于没有前端的命令行应用，即在命令行下请求令牌。</p></blockquote></li></ul></li></ul><p>clientID和ClientSecret均是App需要申请的API密钥</p><p><img src="/2019/06/03/Oauth2原理、使用/Oauth_ClientID.png" alt="Oauth_ClientID"></p><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="Github-Oauth"><a href="#Github-Oauth" class="headerlink" title="Github Oauth"></a>Github Oauth</h2><h2 id="QQ-Oauth"><a href="#QQ-Oauth" class="headerlink" title="QQ Oauth"></a>QQ Oauth</h2><p>本地测试QQ的写法</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"># 方法一：在hosts中将nymrli.top修改到<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">@app.route('/login')</span><br><span class="line">def login():</span><br><span class="line">params = &#123;</span><br><span class="line">'response_type' : 'code',</span><br><span class="line">'client_id' : '101568872',</span><br><span class="line">'redirect_uri' : 'http://beta.nymrli.top/oauth/qq',</span><br><span class="line">'state' : '1',</span><br><span class="line">&#125;</span><br><span class="line">url = 'https://graph.qq.com/oauth2.0/authorize?'</span><br><span class="line">urlParams = urlencode(params)</span><br><span class="line">    # ▲需要url编码</span><br><span class="line">comleteUrl = url + urlParams</span><br><span class="line"># <span class="keyword">return</span> url_for( )</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line">    ▲应该用redirect，而不是requests.get的text内容或者是url_for</span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="keyword">return</span> redirect( comleteUrl)</span><br><span class="line">        </span><br><span class="line">@app.route('/oauth/qq')</span><br><span class="line">def getCode():</span><br><span class="line">return request.args.get('code')</span><br><span class="line">        </span><br><span class="line"># 方法二：随便申请一个应用</span><br><span class="line">@app.route('/login')</span><br><span class="line">def login():</span><br><span class="line">params = &#123;</span><br><span class="line">'response_type' : 'code',</span><br><span class="line">'client_id' : '101584056',</span><br><span class="line"># 'redirect_uri' : 'http://beta.nymrli.top/oauth/qq',</span><br><span class="line">'redirect_uri' : 'http://127.0.0.1:8000/oauth/redirect',</span><br><span class="line">'state' : 'test'</span><br><span class="line">&#125;</span><br><span class="line">url = 'https://graph.qq.com/oauth2.0/authorize?'</span><br><span class="line">urlParams = urlencode(params)</span><br><span class="line">comleteUrl = url + urlParams</span><br><span class="line"><span class="keyword">return</span> redirect( comleteUrl)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.route('/oauth/redirect')</span><br><span class="line">def getCode():</span><br><span class="line">print(request.args)</span><br><span class="line">return 'hello'</span><br></pre></td></tr></table></figure><p><img src="/2019/06/03/Oauth2原理、使用/QQoauth_test.png" alt="QQoauth_test"></p><h3 id="坑点记录：部署"><a href="#坑点记录：部署" class="headerlink" title="坑点记录：部署"></a>坑点记录：部署</h3><blockquote><p>经过调试发现部署上去后，在<a href="http://beta.nymrli.top/info" target="_blank" rel="noopener">http://beta.nymrli.top/info</a>页面下获得不到    <code>access_token = session.get(&#39;access_token&#39;)</code>于是猜想session设置有问题。果然linux下<code>os.urandom(24)</code>有问题， 结果是无法获得到信息。经修改后能正常获得结果</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SECRET_KEY= os.urandom(<span class="number">24</span>)  <span class="comment"># 设置为24位的字符,每次运行服务器都是不同的，所以服务器启动一次上次的session就清除。</span></span><br></pre></td></tr></table></figure><p><img src="/2019/06/03/Oauth2原理、使用/no.png" alt="no"></p><p>改成随便的SECRET_KEY的就行了，比如<code>SECRET_KEY=&#39;asdzxcqwe&#39;</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Oauth2原理、使用&quot;&gt;&lt;a href=&quot;#Oauth2原理、使用&quot; class=&quot;headerlink&quot; title=&quot;Oauth2原理、使用&quot;&gt;&lt;/a&gt;Oauth2原理、使用&lt;/h1&gt;&lt;h1 id=&quot;原理&quot;&gt;&lt;a href=&quot;#原理&quot; class=&quot;head
      
    
    </summary>
    
    
      <category term="flask" scheme="https://nymrli.top/tags/flask/"/>
    
      <category term="后端" scheme="https://nymrli.top/tags/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="Web" scheme="https://nymrli.top/tags/Web/"/>
    
  </entry>
  
  <entry>
    <title>lua学习</title>
    <link href="https://nymrli.top/2019/06/03/lua%E5%AD%A6%E4%B9%A0/"/>
    <id>https://nymrli.top/2019/06/03/lua学习/</id>
    <published>2019-06-03T13:22:03.000Z</published>
    <updated>2019-06-03T13:22:15.930Z</updated>
    
    <content type="html"><![CDATA[<h1 id="lua学习"><a href="#lua学习" class="headerlink" title="lua学习"></a>lua学习</h1><blockquote><p>动态脚本语言，可嵌入C和C++，Lua负责逻辑，C、C++负责功能</p><p>C编译，跨平台性良好</p></blockquote><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 循环结构 [1,10]</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">10</span> <span class="keyword">do</span></span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">function_name</span><span class="params">( ... )</span></span></span><br><span class="line"><span class="comment">-- body</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 选择结构</span></span><br><span class="line"><span class="keyword">if</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h3 id="表-lt-gt-字典"><a href="#表-lt-gt-字典" class="headerlink" title="表{} &lt;==&gt;字典"></a>表<code>{}</code> &lt;==&gt;字典</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Conftg=&#123; hello=<span class="string">"Hello Lua"</span>, world=<span class="string">"World"</span>&#125;</span><br><span class="line">Config.words=<span class="string">"Hello"</span></span><br><span class="line">Config.num=<span class="number">180</span></span><br><span class="line">Config[<span class="string">"name"</span>]=<span class="string">"ZhangSan"</span></span><br><span class="line"><span class="built_in">print</span>(Config[<span class="string">"words"</span>])</span><br><span class="line"><span class="built_in">print</span>(Config. name)</span><br><span class="line"><span class="built_in">print</span>(Config, hello)</span><br><span class="line"><span class="keyword">for</span> key, var <span class="keyword">in</span> <span class="built_in">pairs</span>(Config) <span class="keyword">do</span> </span><br><span class="line"><span class="built_in">print</span>(key, var)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h3 id="数组"><a href="#数组" class="headerlink" title="数组{}"></a>数组<code>{}</code></h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">'hello'</span>&#125;</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(arr) <span class="keyword">do</span></span><br><span class="line"><span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; </span><br><span class="line"><span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">2</span> <span class="number">2</span> </span><br><span class="line"><span class="number">3</span> <span class="number">3</span> </span><br><span class="line"><span class="number">4</span> hello</span><br></pre></td></tr></table></figure><p>▲索引从1开始</p><p>使用API<code>table</code></p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 数组插入</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">10</span> <span class="keyword">do</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>( arr , <span class="number">1</span>, i)</span><br><span class="line">    <span class="comment">-- 经sxh发现结果是逆序的,19-&gt;2,20-&gt;1 ， 原因是每次都从头部插入，相当于LIFO , 此时感觉像是数组（带索引key）...并且table.insert( arr , 2, i)结果只有2--&gt;20 ，此时像字典（只有键2）</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">-- 正序的顺出</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>( arr , i) <span class="comment">-- 默认在尾部开始插入</span></span><br><span class="line">    <span class="comment">-- 或者arr[i] = i</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- 获得数组长度</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">maxn</span>(arr)</span><br></pre></td></tr></table></figure><h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><blockquote><p>没有class类关键字，但可以自己实现类的功能：</p><ul><li>复制表<code>table</code></li><li>函数闭包</li></ul></blockquote><h3 id="复制表table"><a href="#复制表table" class="headerlink" title="复制表table"></a>复制表<code>table</code></h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">people = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 法一</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">people.sayHi</span><span class="params">()</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'Hi'</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 法二</span></span><br><span class="line">people.sayHi = <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'Hi'</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 拷贝</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span><span class="params">( tab )</span></span></span><br><span class="line"><span class="keyword">local</span> arr = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(tab) <span class="keyword">do</span></span><br><span class="line">arr[k] = tab[v]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">return</span> arr</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 相当于是构造方法</span></span><br><span class="line">People.new = <span class="function"><span class="keyword">function</span> <span class="params">(name)</span></span></span><br><span class="line"><span class="keyword">local</span> self = clone(People)</span><br><span class="line">self.name = name </span><br><span class="line"><span class="keyword">return</span> self </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 成员函数</span></span><br><span class="line">People.sayHi = <span class="function"><span class="keyword">function</span><span class="params">(self)</span></span> <span class="comment">-- self是类示例变量</span></span><br><span class="line"><span class="comment">-- ..是字符串连接 </span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"People say hi:"</span>.. self. name)</span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试可以实现类的功能</span></span><br><span class="line"><span class="comment">--local p = clone(People)</span></span><br><span class="line"><span class="comment">--p.sayHi()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 测试构造函数</span></span><br><span class="line"><span class="keyword">local</span> p = People.new(<span class="string">"ZhangSan"</span>)</span><br><span class="line"><span class="comment">-- 需要传类示例</span></span><br><span class="line">p.sayHi(p)</span><br><span class="line"><span class="comment">-- 使用：可以不用传类示例</span></span><br><span class="line">p:sayHi()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Man=&#123;&#125;</span><br><span class="line"><span class="comment">-- 实现类的继承的功能</span></span><br><span class="line">Man.new = <span class="function"><span class="keyword">function</span> <span class="params">(name)</span></span></span><br><span class="line"><span class="keyword">local</span> self =People.new(name)</span><br><span class="line">copy(self, Man)</span><br><span class="line"><span class="keyword">return</span> self </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增添成员函数</span></span><br><span class="line">Man.sayHello=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Man say hello"</span>)</span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 重写成员函数</span></span><br><span class="line">Man.sayHi = <span class="function"><span class="keyword">function</span> <span class="params">(self)</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Man sayHi"</span>.. self.name)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h3 id="函数闭包"><a href="#函数闭包" class="headerlink" title="函数闭包"></a>函数闭包</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">People</span><span class="params">()</span></span></span><br><span class="line"><span class="keyword">local</span> self = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">( name )</span></span></span><br><span class="line">self.name = name</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span><span class="params">()</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Hello "</span>..self.name)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">init()</span><br><span class="line"><span class="keyword">return</span> self</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 继承</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Man</span><span class="params">(name)</span></span></span><br><span class="line"><span class="keyword">local</span> self= People(name)</span><br><span class="line"><span class="comment">-- local function init()</span></span><br><span class="line"><span class="comment">-- end </span></span><br><span class="line">self.sayHello=<span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"hello"</span>..self.name)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">return</span> self</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>学习自 <a href="https://www.bilibili.com/video/av46428956/?p=8" target="_blank" rel="noopener">https://www.bilibili.com/video/av46428956/?p=8</a></p><hr><p>通过表的特性实现<code>switch</code>关键字功能</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> key = <span class="number">1</span>  </span><br><span class="line"><span class="keyword">local</span> switch = &#123;  </span><br><span class="line">    [<span class="number">1</span>] = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"switch:"</span>.<span class="number">.1</span>)  </span><br><span class="line">    <span class="keyword">end</span>,  </span><br><span class="line">    [<span class="number">2</span>] = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"switch:"</span>.<span class="number">.2</span>)  </span><br><span class="line">    <span class="keyword">end</span>,  </span><br><span class="line">    [<span class="string">"test"</span>] = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"switch:test"</span>)  </span><br><span class="line">    <span class="keyword">end</span>,  </span><br><span class="line">&#125;  </span><br><span class="line"> switch[<span class="number">2</span>]()</span><br><span class="line"><span class="comment">-- &gt;&gt;&gt; 2</span></span><br></pre></td></tr></table></figure><p>伪随机数的生成</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 因此“短时间内多次运行程序” 这样的需求下 os.time 还真不大好。可是又没有比 time 函数更方便的种子生成器， 怎么办呢？</span></span><br><span class="line"><span class="built_in">math</span>.<span class="built_in">randomseed</span>(<span class="built_in">tostring</span>(<span class="built_in">os</span>.<span class="built_in">time</span>()):<span class="built_in">reverse</span>():<span class="built_in">sub</span>(<span class="number">1</span>, <span class="number">6</span>))</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>, <span class="number">5</span> <span class="keyword">do</span></span><br><span class="line"> <span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">4</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- 就是把 time返回的数值字串倒过来（低位变高位）， 再取高位6位。 这样， 即使 time变化很小， 但是因为低位变了高位， 种子数值变化却很大，就可以使伪随机序列生成的更好一些</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;lua学习&quot;&gt;&lt;a href=&quot;#lua学习&quot; class=&quot;headerlink&quot; title=&quot;lua学习&quot;&gt;&lt;/a&gt;lua学习&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;动态脚本语言，可嵌入C和C++，Lua负责逻辑，C、C++负责功能&lt;/p&gt;
&lt;p&gt;C编译，
      
    
    </summary>
    
    
      <category term="lua" scheme="https://nymrli.top/tags/lua/"/>
    
  </entry>
  
  <entry>
    <title>Java课程第三次实验报告</title>
    <link href="https://nymrli.top/2019/06/03/Java%E8%AF%BE%E7%A8%8B%E7%AC%AC%E4%B8%89%E6%AC%A1%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
    <id>https://nymrli.top/2019/06/03/Java课程第三次实验报告/</id>
    <published>2019-06-03T13:21:19.000Z</published>
    <updated>2019-06-03T13:21:43.038Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java课程第三次实验报告"><a href="#Java课程第三次实验报告" class="headerlink" title="Java课程第三次实验报告"></a>Java课程第三次实验报告</h1><p>\1. 在前面实验二已定义的学生类Student的基础上，以Student类为父类，为学生类派生出一个子类为大学生类（CollegeStudent）。</p><p>CollegeStudent 类在学生类上增加一个专业（profession）数据属性；方法上增加获得专业和设置专业两个方法。并对超类中的toString( )方法进行重写，使得CollegeStudent类中的toString( )方法除了显示学生类的信息外，还要显示它的专业属性。</p><p>编写测试程序的主类。在主类中创建一个Student对象和CollegeStudent对象，并显示或修改这两个对象的属性值。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//package homework;  </span></span><br><span class="line"><span class="keyword">package</span> student ;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> UID;  </span><br><span class="line">    <span class="keyword">private</span> String name;  </span><br><span class="line">    <span class="keyword">private</span> Boolean gender; <span class="comment">// G- B-  </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;  </span><br><span class="line">      </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> cnt ;        </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;&#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(<span class="keyword">int</span> UID,String name,Boolean gender,<span class="keyword">int</span> age)</span> </span>&#123;  </span><br><span class="line">        cnt ++ ;  </span><br><span class="line">        <span class="keyword">this</span>.UID = UID;  </span><br><span class="line">        <span class="keyword">this</span>.name = name;  </span><br><span class="line">        <span class="keyword">this</span>.gender = gender;  </span><br><span class="line">        <span class="keyword">this</span>.age = age;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@target</span> 获得私有参数 </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> age;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> name;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Boolean <span class="title">getGender</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> gender;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getUID</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> UID;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@target</span> 修改私有参数 </span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.age = age;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUID</span><span class="params">(<span class="keyword">int</span> uID)</span> </span>&#123;  </span><br><span class="line">        UID = uID;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.name = name;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGender</span><span class="params">(Boolean gender)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.gender = gender;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;  </span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub  </span></span><br><span class="line">        System.out.println(<span class="string">"对象已被销毁"</span>);;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub  </span></span><br><span class="line">        <span class="keyword">if</span> (gender) <span class="keyword">return</span> <span class="string">"该同学的学号为："</span> + UID +<span class="string">"，姓名叫："</span> + name + <span class="string">"，性别：男"</span> + <span class="string">"，年龄："</span> + age;  </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"该同学的学号为："</span> + UID +<span class="string">"，姓名叫："</span> + name + <span class="string">"，性别：女"</span> + <span class="string">"，年龄："</span> + age;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getCnt</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> cnt;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//新建立的CoolegeStudent对象  </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CollegeStudent</span> <span class="keyword">extends</span> <span class="title">Student</span></span>&#123;  </span><br><span class="line">  <span class="keyword">private</span> String profession;  </span><br><span class="line">    </span><br><span class="line">  </span><br><span class="line">  CollegeStudent(<span class="keyword">int</span> studentID, String name, Boolean sex, <span class="keyword">int</span> age, String profession) &#123;  </span><br><span class="line">      <span class="keyword">super</span>( studentID, name, sex, age );  </span><br><span class="line">      <span class="keyword">this</span>.profession = profession;  </span><br><span class="line">  &#125;  </span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getProfession</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">      <span class="keyword">return</span> profession;  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setProfession</span><span class="params">(String profession)</span> </span>&#123;  </span><br><span class="line">      <span class="keyword">this</span>.profession = profession;  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span>  </span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">       <span class="keyword">return</span> <span class="string">"CollegeStudent&#123;"</span> +  </span><br><span class="line">               <span class="string">"profession='"</span> + profession + <span class="string">'\''</span> +  </span><br><span class="line">               <span class="string">"studentID='"</span> + <span class="keyword">super</span>.getUID() + <span class="string">'\''</span> +  </span><br><span class="line">               <span class="string">", name='"</span> + <span class="keyword">super</span>.getName() + <span class="string">'\''</span> +  </span><br><span class="line">               <span class="string">", sex='"</span> + <span class="keyword">super</span>.getGender() + <span class="string">'\''</span> +  </span><br><span class="line">               <span class="string">", age="</span> + <span class="keyword">super</span>.getAge() +  </span><br><span class="line">               <span class="string">'&#125;'</span>;  </span><br><span class="line">   &#125;  </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>设计一个人员类（Person），其中包含一个方法pay，代表人员的工资支出。再从Person类派生出助教类（Assistant）、讲师类（Instructor）、副教授类（Assistant Professor）和教授类（Professor）。其中：工资支出=基本工资+授课时数*每课时兼课金。<br>但助教基本工资为800，每课时兼课金25，讲师基本工资为1000，每课时兼课金35，<br>副教授基本工资为1200，每课时兼课金40，教授基本工资为1400，每课时兼课金50。<br>1.将Person定义为抽象类，pay为抽象方法，设计程序实现多态性。<br>2.将Person定义为接口，设计程序实现多态性。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Person写成类：</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> basic;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> hour;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> charge;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(<span class="keyword">int</span> basic, <span class="keyword">int</span> charge)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">this</span>.basic = basic;  </span><br><span class="line">        <span class="keyword">this</span>.charge = charge;  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">(<span class="keyword">int</span> hour)</span> </span>&#123;  </span><br><span class="line">        System.out.println( hour + <span class="string">"小时后的工资为"</span> + (basic + hour * charge) );  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Assistant</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Assistant</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">super</span>( <span class="number">800</span>, <span class="number">25</span> );  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Instructor</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Instructor</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">super</span>( <span class="number">1000</span>, <span class="number">35</span> );  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">    </span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">AssistantProfessor</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AssistantProfessor</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">super</span>( <span class="number">1200</span>, <span class="number">40</span> );  </span><br><span class="line">  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Professor</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Professor</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">super</span>( <span class="number">1400</span>, <span class="number">50</span> );  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">//Person写成抽象类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">int</span> hour;  </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">(<span class="keyword">int</span> hour)</span></span>;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Assistant</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">   <span class="meta">@Override</span>  </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">(<span class="keyword">int</span> hour)</span> </span>&#123;  </span><br><span class="line">       System.out.println( hour + <span class="string">"小时后的工资为"</span> + (<span class="number">800</span> + hour * <span class="number">25</span>) );  </span><br><span class="line">  &#125;  </span><br><span class="line">     </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Instructor</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">  <span class="meta">@Override</span>  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">(<span class="keyword">int</span> hour)</span> </span>&#123;  </span><br><span class="line">      System.out.println( hour + <span class="string">"小时后的工资为"</span> + (<span class="number">1000</span> + hour * <span class="number">35</span>) );  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AssistantProfessor</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">  <span class="meta">@Override</span>  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">(<span class="keyword">int</span> hour)</span> </span>&#123;  </span><br><span class="line">      System.out.println( hour + <span class="string">"小时后的工资为"</span> + (<span class="number">1200</span> + hour * <span class="number">40</span>) );  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Professor</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">  <span class="meta">@Override</span>  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">(<span class="keyword">int</span> hour)</span> </span>&#123;  </span><br><span class="line">      System.out.println( hour + <span class="string">"小时后的工资为"</span> + (<span class="number">1400</span> + hour * <span class="number">50</span>) );  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">  <span class="comment">/** </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> mrli </span></span><br><span class="line"><span class="comment"> * 接口写法 </span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">pay</span><span class="params">(<span class="keyword">int</span> hour)</span></span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">        </span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Assistant</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">        <span class="meta">@Override</span>  </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">(<span class="keyword">int</span> hour)</span> </span>&#123;  </span><br><span class="line">            System.out.println( hour + <span class="string">"小时后的工资为"</span> + (<span class="number">800</span> + hour * <span class="number">25</span>) );  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Instructor</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">(<span class="keyword">int</span> hour)</span> </span>&#123;  </span><br><span class="line">        System.out.println( hour + <span class="string">"小时后的工资为"</span> + (<span class="number">1000</span> + hour * <span class="number">35</span>) );  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;  </span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">AssistantProfessor</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">(<span class="keyword">int</span> hour)</span> </span>&#123;  </span><br><span class="line">        System.out.println( hour + <span class="string">"小时后的工资为"</span> + (<span class="number">1200</span> + hour * <span class="number">40</span>) );  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">    </span><br><span class="line">  </span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Professor</span> <span class="keyword">implements</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">(<span class="keyword">int</span> hour)</span> </span>&#123;  </span><br><span class="line">        System.out.println( hour + <span class="string">"小时后的工资为"</span> + (<span class="number">1400</span> + hour * <span class="number">50</span>) );  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>从键盘输入两个数，进行相除，显示商。当输入串中含有非数字时或除数为0时，通过异常处理机制，使程序能正确运行。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.InputMismatchException;  </span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">yichang</span> </span>&#123;  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  </span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub  </span></span><br><span class="line">  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            Scanner scanner = <span class="keyword">new</span> Scanner(System.in);  </span><br><span class="line">            System.out.print( <span class="string">"请输入除数:"</span> );  </span><br><span class="line">            <span class="keyword">int</span> dividedNum = scanner.nextInt();  </span><br><span class="line">            System.out.print( <span class="string">"请输入被除数:"</span> );  </span><br><span class="line">            <span class="keyword">int</span> divNum = scanner.nextInt();  </span><br><span class="line">              </span><br><span class="line">            System.out.println( <span class="string">"计算结果："</span> + dividedNum / divNum );  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (InputMismatchException e1) &#123;  </span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> handle exception  </span></span><br><span class="line">            System.out.println(<span class="string">"输入不为数字!"</span>);  </span><br><span class="line">        &#125;<span class="keyword">catch</span> (ArithmeticException e2) &#123;  </span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> handle exception  </span></span><br><span class="line">            System.out.println(<span class="string">"不能除0!"</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java课程第三次实验报告&quot;&gt;&lt;a href=&quot;#Java课程第三次实验报告&quot; class=&quot;headerlink&quot; title=&quot;Java课程第三次实验报告&quot;&gt;&lt;/a&gt;Java课程第三次实验报告&lt;/h1&gt;&lt;p&gt;\1. 在前面实验二已定义的学生类Student的基
      
    
    </summary>
    
    
      <category term="java" scheme="https://nymrli.top/tags/java/"/>
    
      <category term="NJUPT" scheme="https://nymrli.top/tags/NJUPT/"/>
    
  </entry>
  
  <entry>
    <title>南京邮电大学java程序设计作业在线编程第八次作业</title>
    <link href="https://nymrli.top/2019/06/03/%E5%8D%97%E4%BA%AC%E9%82%AE%E7%94%B5%E5%A4%A7%E5%AD%A6java%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E5%9C%A8%E7%BA%BF%E7%BC%96%E7%A8%8B%E7%AC%AC%E5%85%AB%E6%AC%A1%E4%BD%9C%E4%B8%9A/"/>
    <id>https://nymrli.top/2019/06/03/南京邮电大学java程序设计作业在线编程第八次作业/</id>
    <published>2019-06-03T13:20:12.000Z</published>
    <updated>2019-06-03T13:20:49.929Z</updated>
    
    <content type="html"><![CDATA[<h2 id="总分：100"><a href="#总分：100" class="headerlink" title="总分：100"></a>总分：100</h2><h3 id="选择题得分：70"><a href="#选择题得分：70" class="headerlink" title="选择题得分：70"></a>选择题得分：70</h3><ul><li><ol><li><code>int[][] a=new int[2</code>][3]，则该数组包含（ ）个数组元素。<br>A.2<br>B.3<br>C.6<br>D.不确定<br>正确答案是: C</li></ol></li><li><ol start="2"><li>已知类person是类student的父类，以下数组定义和赋值正确的是( )。<br>A.person p[]=new person[3]; p[1]=new student();<br>B.student s[]=new person[3]; s[1]=new person();<br>C.person p[]= new student[3];p[1]= new person();<br>D.student s[]=new student[3];s[1]=new person;<br>正确答案是: A</li></ol></li><li><ol start="3"><li>下面关于java中类的说法不正确的是( )。<br>A.类体中包含了变量定义和成员方法的定义<br>B.构造函数是类中的特殊方法<br>C.类一定要声明为public的，才可以执行<br>D.一个java文件中可以有多个class定义<br>正确答案是: C</li></ol></li><li><ol start="4"><li>关于接口下列说法正确的( )。<br>A.实现一个接口必须实现接口的所有方法<br>B.接口间不能有继承关系<br>C.一个类只能实现一个接口<br>D.接口和抽象类是同一回事<br>正确答案是: A</li></ol></li><li><ol start="5"><li>以下有关构造方法的说法，正确的是( )。<br>A.一个类的构造方法可以有多个<br>B.构造方法不可以重载<br>C.构造方法可以有返回值<br>D.构造方法可以和类同名，也可以和类名不同<br>正确答案是: A</li></ol></li><li><ol start="6"><li>下列论述中，错误的是（ ）。<br>A.Java源代码的后缀名是.java。<br>B.Java源代码中的每个类经过编译后都会生成一个.class文件。<br>C.在一个名为A.java的文件中只能定义一个类。<br>D.Java源代码中可以定义类和接口。<br>正确答案是: C</li></ol></li><li><ol start="7"><li>下列论述中，正确的是（ ）。<br>A.抽象方法是没有方法体的方法。<br>B.抽象方法一定存在于抽象类中。<br>C.抽象类中一定要包含抽象方法。<br>D.抽象类可以创建对象。<br>正确答案是: A</li></ol></li><li><ol start="8"><li>MyClass类定义如下： class MyClass{ public MyClass(int x){ } } 如下方式创建对象，（ ）是正确的<br>A.MyClass myobj=new Myclass;<br>B.MyClass myobj=new Myclass();<br>C.MyClass myobj=new Myclass(1);<br>D.MyClass myobj=new Myclass(1,2);<br>正确答案是: C</li></ol></li><li><ol start="9"><li>关于方法void fjv(int x,int y){}，下面（ ）不能成为它的重载。<br>A.void fjv(int x,float y){}<br>B.void fjv(int x){}<br>C.void fjv(float x,int y){}<br>D.int fjv(int y,int x){}<br>正确答案是: D</li></ol></li><li><ol start="10"><li>下述（ ）说法是不正确的<br>A.实例变量是用static关键字声明的；<br>B.实例变量是类的成员变量；<br>C.方法变量可在方法执行时创建；<br>D.方法变量在使用之前必须初始化；<br>正确答案是: A</li></ol></li><li><ol start="11"><li>如果一个方法被修饰为<strong>____</strong>方法，则这个方法不能被重写。<br>A.final<br>B.static<br>C.void<br>D.protected<br>正确答案是: A</li></ol></li><li><ol start="12"><li>在Java中，下面说法正确的是（ ）。<br>A.一个子类可以有多个父类，一个父类也可以有多个子类<br>B.一个子类可以有多个父类，但一个父类只可以有一个子类<br>C.一个子类可以有一个父类，但一个父类可以有多个子类<br>D.上述说法都不对<br>正确答案是: C</li></ol></li><li><ol start="13"><li><strong><strong>___</strong></strong>变量在内存中只有一个拷贝，被该类的所有对象共享。<br>A.成员<br>B.局部<br>C.全局<br>D.类<br>正确答案是: D</li></ol></li><li><ol start="14"><li>MAX_LENGTH是int型public成员变量, 变量值保持为常量100，下面哪句定义语句是正确的。<br>A.public int MAX_LENGTH=100;<br>B.final int MAX_LENGTH=100;<br>C.final public int MAX_LENGTH=100;<br>D.public final int MAX_LENGTH=100;<br>正确答案是: D</li></ol></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 编写Main类，生成若干实例并验证程序的功能，请勿改动Main类的定义内容。</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Pet pet=<span class="keyword">new</span> Dog(<span class="string">"WangCai"</span>);</span><br><span class="line">        System.out.println(pet.getName()+<span class="string">":"</span>+pet.shout());</span><br><span class="line">        pet=<span class="keyword">new</span> Cat(<span class="string">"XiaoHua"</span>);</span><br><span class="line">        System.out.println(pet.getName()+<span class="string">":"</span>+pet.shout());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 请在本行之后添加你的代码内容</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Pet</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> String <span class="title">shout</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Pet</span></span>&#123;</span><br><span class="line">    Dog(String name) &#123;</span><br><span class="line">        setName( name );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">String <span class="title">shout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Wang Wang Wang"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Pet</span></span>&#123;</span><br><span class="line">    Cat(String name) &#123;</span><br><span class="line">        setName( name );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">String <span class="title">shout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Miao Miao Miao"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;总分：100&quot;&gt;&lt;a href=&quot;#总分：100&quot; class=&quot;headerlink&quot; title=&quot;总分：100&quot;&gt;&lt;/a&gt;总分：100&lt;/h2&gt;&lt;h3 id=&quot;选择题得分：70&quot;&gt;&lt;a href=&quot;#选择题得分：70&quot; class=&quot;headerlink&quot; 
      
    
    </summary>
    
    
      <category term="java" scheme="https://nymrli.top/tags/java/"/>
    
      <category term="NJUPT" scheme="https://nymrli.top/tags/NJUPT/"/>
    
  </entry>
  
  <entry>
    <title>Windows下命令行神器cmder</title>
    <link href="https://nymrli.top/2019/06/03/Windows%E4%B8%8B%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A5%9E%E5%A5%87cmder/"/>
    <id>https://nymrli.top/2019/06/03/Windows下命令行神奇cmder/</id>
    <published>2019-06-03T13:17:28.000Z</published>
    <updated>2019-06-03T13:17:54.686Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Cmder"><a href="#Cmder" class="headerlink" title="Cmder"></a>Cmder</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><a href="http://cmder.net/" target="_blank" rel="noopener">http://cmder.net/</a> 有两个版本，分别是mini与full版</p><ul><li>mini 没有内建msysgit工具，这是Git for Windows的标准配备；</li><li>全安装版 cmder 自带了 msysgit, 压缩包 108M</li><li>除了 git 本身这个命令之外, 里面可以使用大量的 linux 命令；比如 grep, curl(没有 wget)； 像vim, grep, tar, unzip, ssh, ls, bash, perl</li><li>可以交叉使用 <a href="http://www.cygwin.com/" target="_blank" rel="noopener">cygwin</a> 的部分增强命令</li></ul><h2 id="把-cmder-加到环境变量"><a href="#把-cmder-加到环境变量" class="headerlink" title="把 cmder 加到环境变量"></a>把 cmder 加到环境变量</h2><p>将解压后的文件夹路径加入到系统环境变量的Path中</p><h2 id="添加-cmder-到右键菜单"><a href="#添加-cmder-到右键菜单" class="headerlink" title="添加 cmder 到右键菜单"></a>添加 cmder 到右键菜单</h2><p>配置环境变量后，在<strong>管理员权限</strong>的终端输入以下语句</p><blockquote><p>Win 8 或者 Win10 可以直接 <code>win+x</code> 再按 <code>a</code> 键进入</p><p>或者在开始中输入<strong>命令</strong>，然后在弹出的<strong>最佳匹配</strong>中，选择<strong>命令行工具右键</strong>-&gt;以管理员身份打开</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cmder.exe /REGISTER ALL</span><br></pre></td></tr></table></figure><h2 id="修改命令提示符号"><a href="#修改命令提示符号" class="headerlink" title="修改命令提示符号"></a>修改命令提示符号</h2><h3 id="1-3-之后版本"><a href="#1-3-之后版本" class="headerlink" title="1.3 之后版本"></a>1.3 之后版本</h3><p>修改文件 <code>${CMDER_HOME}\vendor\clink.lua</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if env == nil then</span><br><span class="line">    lambda = &quot;λ&quot;</span><br><span class="line">else</span><br><span class="line">    lambda = &quot;(&quot;..env..&quot;) λ&quot;</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>改成</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if env == nil then</span><br><span class="line">    lambda = &quot;$&quot;</span><br><span class="line">else</span><br><span class="line">    lambda = &quot;(&quot;..env..&quot;) $&quot;</span><br><span class="line">end</span><br></pre></td></tr></table></figure><blockquote><p>其他符号也行，看你自己的喜好</p></blockquote><h3 id="1-3-以前版本"><a href="#1-3-以前版本" class="headerlink" title="1.3 以前版本"></a>1.3 以前版本</h3><p>编辑Cmder安装目录下的 <code>vendor\init.bat</code> 批处理文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@prompt $E[1;32;40m$P$S&#123;git&#125;&#123;hg&#125;$S$_$E[1;30;40m &#123;lamb&#125; $S$E[0m</span><br></pre></td></tr></table></figure><p>修改为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@prompt $E[1;32;40m$P$S&#123;git&#125;&#123;hg&#125;$S$_$E[1;30;40m $$ $S$E[0m</span><br></pre></td></tr></table></figure><p><code>PowerShell.exe</code> 需要另外设置</p><p>打开文件 <code>config/cmder.lua</code>（<code>prompt.lua</code> 也有版本是这个），将第二行中的<strong>λ</strong>修改为<strong>$</strong></p><h2 id="新标签打开个管理员权限终端"><a href="#新标签打开个管理员权限终端" class="headerlink" title="新标签打开个管理员权限终端"></a>新标签打开个管理员权限终端</h2><p>快捷键 Ctrl + t 后勾选<code>Run as administrator</code></p><h2 id="设置默认终端"><a href="#设置默认终端" class="headerlink" title="设置默认终端"></a>设置默认终端</h2><p>如果你有其它的command希望通过 Cmder 打开，可以在 <code>Startup</code> 下的 <code>Tasks</code> 中添加。里面已经默认帮你配置了 <code>Cmder</code>、<code>PowerShell</code>、<code>MinTTY</code>、<code>Git Bash</code>。</p><p>默认启动的是 Cmder ，如果你想默认启动其它的command，你可以在 <code>Startup</code> 设置为其它的command<br><img src="https://s1.ax1x.com/2018/03/08/92aKJO.png" alt="设置默认终端"></p><p>同时还可以快速的切换当前使用的终端，假设你正在使用的 <code>cmd</code> ，这时输入 <code>bash</code> 回车一下，便可以将当前标签页的终端切换成 <code>Git Bash</code></p><h2 id="中文和命令ll支持"><a href="#中文和命令ll支持" class="headerlink" title="中文和命令ll支持"></a>中文和命令ll支持</h2><ul><li>Cmder 是不支持中文，这需要你在 <code>Startup</code> 下的 <code>Environment</code> 中设置一下。将 <code>set LANG=zh_CN.UTF-8</code> </li><li>cmder原生没有 <strong>ll</strong> 命令，但可以通过设置别名来实现：打开cmder安装目录下的<code>\config\user-aliases.cmd</code>文件，添加以下别名设置：</li></ul><h2 id="Chocolatey软件包管理系统"><a href="#Chocolatey软件包管理系统" class="headerlink" title="Chocolatey软件包管理系统"></a><a href="https://chocolatey.org/" target="_blank" rel="noopener">Chocolatey</a>软件包管理系统</h2><p>chocolatey 是windows 下面的 yum brew 这种包管理器<br> 运行如下命令(需要管理员权限)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@powershell -NoProfile -ExecutionPolicy unrestricted -Command &quot;iex ((new-object net.webclient).DownloadString(&apos;https://chocolatey.org/install.ps1&apos;))&quot; &amp;&amp; SET PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin</span><br></pre></td></tr></table></figure><p>安装软件命令 <code>choco install softwareName</code>,</p><ul><li>短写是 <code>cinst softwareName</code> </li></ul><p>查询安装包是否存在 <code>clist softwareName</code></p><p><a href="https://chocolatey.org/packages" target="_blank" rel="noopener">可安装包列表</a></p><h3 id="window下常用的开发环境应用"><a href="#window下常用的开发环境应用" class="headerlink" title="window下常用的开发环境应用"></a>window下常用的开发环境应用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">choco install autohotkey.portable    #安装 AutoHotkey (Portable)</span><br><span class="line">choco install nodejs.install  #安装 node</span><br><span class="line">choco install git.install     #安装 git</span><br><span class="line">choco install python          #安装 python</span><br><span class="line">choco install ruby            #安装 ruby</span><br><span class="line">choco install jdk8            #安装 JDK8</span><br><span class="line">choco install googlechrome    #安装 Chrome</span><br><span class="line">choco install google-chrome-x64 #Google Chrome (64-bit only)</span><br><span class="line">choco install firefox         #安装 firefox</span><br><span class="line">choco install notepadplusplus.install #安装 notepad++</span><br><span class="line">choco install Atom                    #安装 Atom</span><br><span class="line">choco install SublimeText3            #安装 SublimeText3</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Cmder&quot;&gt;&lt;a href=&quot;#Cmder&quot; class=&quot;headerlink&quot; title=&quot;Cmder&quot;&gt;&lt;/a&gt;Cmder&lt;/h1&gt;&lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安
      
    
    </summary>
    
    
      <category term="环境配置" scheme="https://nymrli.top/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
      <category term="安利" scheme="https://nymrli.top/tags/%E5%AE%89%E5%88%A9/"/>
    
  </entry>
  
  <entry>
    <title>微信公众号Pyhton</title>
    <link href="https://nymrli.top/2019/05/27/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7Pyhton/"/>
    <id>https://nymrli.top/2019/05/27/微信公众号Pyhton/</id>
    <published>2019-05-27T14:01:10.000Z</published>
    <updated>2019-05-27T14:02:21.379Z</updated>
    
    <content type="html"><![CDATA[<h1 id="微信公众号Pyhton开发"><a href="#微信公众号Pyhton开发" class="headerlink" title="微信公众号Pyhton开发"></a>微信公众号Pyhton开发</h1><h2 id="编写上传代码到SAE"><a href="#编写上传代码到SAE" class="headerlink" title="编写上传代码到SAE"></a>编写上传代码到SAE</h2><p>1.申请SAE（sina application enginer），创建应用，<a href="https://www.sinacloud.com/doc/sae/tutorial/code-deploy.html#shi-yong-git-ke-hu-duan" target="_blank" rel="noopener">SAE使用文档</a></p><p>2.编写上传代码</p><p>weixin.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-*-coding:utf-8-*-</span></span><br><span class="line"><span class="keyword">import</span> web </span><br><span class="line"><span class="keyword">import</span> os </span><br><span class="line"><span class="keyword">import</span> hashlib </span><br><span class="line"><span class="keyword">import</span> time </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeixinInterface</span>:</span> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">self.app_root=os.path.dirname(__file__)</span><br><span class="line">self.templates_root=os.path.join(self.app_root,<span class="string">'templates'</span>)</span><br><span class="line">self.render=web.template.render(self.templates_root)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">GET</span><span class="params">(self)</span>:</span> </span><br><span class="line">data=web.input()</span><br><span class="line">signature=data.signature</span><br><span class="line">timestamp=data.timestamp </span><br><span class="line">nonce=data.nonce </span><br><span class="line">echostr=data.echostr </span><br><span class="line">token=<span class="string">"wxpython"</span></span><br><span class="line"></span><br><span class="line">l=[token,timestamp,nonce]</span><br><span class="line">l.sort()</span><br><span class="line">sha1=hashlib.sha1()</span><br><span class="line">map(sha1.update,l)</span><br><span class="line">hashcode=sha1.hexdigest()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> hashcode == signature:</span><br><span class="line"><span class="keyword">return</span> echostr</span><br></pre></td></tr></table></figure><p>index.wsgi</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#-*-coding:utf-8-*-</span><br><span class="line"></span><br><span class="line">import os </span><br><span class="line">import sae</span><br><span class="line">import web </span><br><span class="line">from weixin import WeixinInterface </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urls=(</span><br><span class="line">&apos;/weixin&apos;,&apos;WeixinInterface&apos;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">app_root=os.path.dirname(__file__)</span><br><span class="line">templates_root=os.path.join(app_root,&apos;templates&apos;)</span><br><span class="line">render=web.template.render(templates_root)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app=web.application(urls,globals()).wsgifunc()</span><br><span class="line">application=sae.create_wsgi_app(app)</span><br></pre></td></tr></table></figure><p>config.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">wxpytest</span> </span><br><span class="line"><span class="attr">version:</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">libraries:</span></span><br><span class="line"><span class="attr">- name:</span> <span class="string">webpy</span> </span><br><span class="line"><span class="attr">  version:</span> <span class="string">"0.36"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">- name:</span> <span class="string">lxml</span> </span><br><span class="line"><span class="attr">  version:</span> <span class="string">"2.3.4"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure><p>​    </p><p>3.微信公众号修改服务器配置</p><p><img src="/2019/05/27/微信公众号Pyhton/weixin.png" alt="weixin"></p><p>Token与代码中编写的保持一致，URL也要与指定的一致(即<code>...\weixin</code>)。</p><p>注意直接访问<code>&lt;http://vxquan.applinzi.com/weixin&gt;</code>是会报错的，但是可以通过微信公众平台的认证（因为直接访问是没有参数的，data=web.input没有异常处理）</p><h2 id="处理普通文本信息"><a href="#处理普通文本信息" class="headerlink" title="处理普通文本信息"></a>处理普通文本信息</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">xml</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ToUserName</span>&gt;</span>&lt;![CDATA[toUser]]&gt;<span class="tag">&lt;/<span class="name">ToUserName</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">FromUserName</span>&gt;</span>&lt;![CDATA[fromUser]]&gt;<span class="tag">&lt;/<span class="name">FromUserName</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">CreateTime</span>&gt;</span>1348831860<span class="tag">&lt;/<span class="name">CreateTime</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">MsgType</span>&gt;</span>&lt;![CDATA[text]]&gt;<span class="tag">&lt;/<span class="name">MsgType</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Content</span>&gt;</span>&lt;![CDATA[this is a test]]&gt;<span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">MsgId</span>&gt;</span>1234567890123456<span class="tag">&lt;/<span class="name">MsgId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">xml</span>&gt;</span></span><br></pre></td></tr></table></figure><p>▲.注意这边的OpenID不是真正的用户ID，不同公众号对相同用户获得的OpenID是不同的，换言之，这个只是该公众号能获得该用户的一个ID。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">POST</span><span class="params">(self)</span>:</span> </span><br><span class="line">str_xml=web. data()</span><br><span class="line">xml=etree.fromstring(str_xml)</span><br><span class="line">msgType=xml.find(<span class="string">"MsgType"</span>).text </span><br><span class="line">fromuser=xml.find(<span class="string">"FromUserName"</span>).text </span><br><span class="line">touser=xml.find(<span class="string">"ToUserName"</span>).text </span><br><span class="line"><span class="keyword">if</span> msgType==<span class="string">"text"</span>: </span><br><span class="line">content=xml. find(<span class="string">"Content"</span>).text</span><br><span class="line"><span class="keyword">return</span> self.render.reply_text(fromuser,touser,int(time.time()),content)</span><br><span class="line">    <span class="comment"># 注意这边To和from的改变，服务器(发送)--&gt;wx后台--&gt;用户(接收)</span></span><br></pre></td></tr></table></figure><p>记遇到的坑：</p><ul><li>1.POST好像必须要有处理，返回信息</li><li><ol start="2"><li>python2.7下字符串加u</li></ol></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;微信公众号Pyhton开发&quot;&gt;&lt;a href=&quot;#微信公众号Pyhton开发&quot; class=&quot;headerlink&quot; title=&quot;微信公众号Pyhton开发&quot;&gt;&lt;/a&gt;微信公众号Pyhton开发&lt;/h1&gt;&lt;h2 id=&quot;编写上传代码到SAE&quot;&gt;&lt;a href=&quot;
      
    
    </summary>
    
    
      <category term="环境部署" scheme="https://nymrli.top/tags/%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/"/>
    
      <category term="Web" scheme="https://nymrli.top/tags/Web/"/>
    
  </entry>
  
  <entry>
    <title>DigitalOcean VPS注册</title>
    <link href="https://nymrli.top/2019/05/27/DigitalOcean-VPS%E6%B3%A8%E5%86%8C/"/>
    <id>https://nymrli.top/2019/05/27/DigitalOcean-VPS注册/</id>
    <published>2019-05-27T13:57:56.000Z</published>
    <updated>2019-05-27T13:59:17.948Z</updated>
    
    <content type="html"><![CDATA[<h1 id="DigitalOcean-VPS搭梯子"><a href="#DigitalOcean-VPS搭梯子" class="headerlink" title="DigitalOcean VPS搭梯子"></a>DigitalOcean VPS搭梯子</h1><h2 id="DigitalOcean-VPS注册"><a href="#DigitalOcean-VPS注册" class="headerlink" title="DigitalOcean VPS注册"></a>DigitalOcean VPS注册</h2><p>首先通过 邀请链接(<a href="https://m.do.co/c/e89da76f57f2" target="_blank" rel="noopener">https://m.do.co/c/e89da76f57f2</a>)点进去<strong>注册</strong>，双方都会获得\$10奖励（注意是注册，我当时就没注意到，少了10\$</p><p>然后在<a href="https://education.github.com/pack" target="_blank" rel="noopener">Github Education</a>申请学生优惠，注意这边的学生优惠邮箱是校园邮箱(<a href="mailto:xxxx@njupt.edu.cn" target="_blank" rel="noopener">xxxx@njupt.edu.cn</a>)那个。我当时是将github账号与校园邮箱进行链接的。</p><p>学生优惠申请到后，pack界面会变成这样</p><p><img src="/2019/05/27/DigitalOcean-VPS注册/1.png" alt="1"></p><p>进入DO的页面后，用学校邮箱注册后，选用Paypal支付（先注册好Paypal），然后支付即可。</p><p>▲由于一开始我并没有使用学校邮箱注册，而是QQ邮箱，后来又注册了以后，发现这个账号被锁了，付的$5也退了回来。按网上的说法，DO会直接锁了我的账号，原因是一个人注册了多个账号。于是找解决方案。</p><p>网上说要发邮件，其中比较关键的是Ticket，一开始一直没找到，后来才发现这个是在<code>support</code>中选出来的.</p><p>等了一天最终收到的答复却是：</p><p><img src="/2019/05/27/DigitalOcean-VPS注册/reply.png" alt="reply"></p><blockquote><p>我们检查了该帐户，发现它符合与违反我们的服务条款和可接受使用策略相关的异常模式。虽然我们无法提供所观察到的特定标志的详细信息，但我们已经确定，恢复对该帐户的访问是不可能的。不便之处，敬请原谅。</p></blockquote><p>最终无奈之下，想起了使用的话跟学校邮箱没关系，那个只是提供优惠券的。于是重新尝试了下第一个注册的账号pay了$5以后就成功了。</p><h2 id="创建主机"><a href="#创建主机" class="headerlink" title="创建主机"></a>创建主机</h2><p><a href="https://blog.ooolg.com/index.php/20181125/131=131.html" target="_blank" rel="noopener"><a href="https://blog.ooolg.com/index.php/20181125/131=131.html" target="_blank" rel="noopener">搭建SSR科学上网（利用DigitalOcean服务器）</a></a></p><h2 id="使用优惠券"><a href="#使用优惠券" class="headerlink" title="使用优惠券"></a>使用优惠券</h2><p><a href="https://www.mf8.biz/digitalocean-github-pack/" target="_blank" rel="noopener">DigitalOcean 的学生包代金券使用教程</a></p><p><img src="/2019/05/27/DigitalOcean-VPS注册/billing.png" alt="billing"></p><p><img src="https://pics.mf8.biz/mf8/ex5gw.jpg" alt=""></p><p>输入<a href="https://education.github.com/pack" target="_blank" rel="noopener">Github Education</a>上获得的优惠券Code，就能拿到$50的优惠券了</p><h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="ubuntu一键更换内核-安装锐速-16-04-14-04可用"><a href="#ubuntu一键更换内核-安装锐速-16-04-14-04可用" class="headerlink" title="ubuntu一键更换内核 安装锐速 - 16.04 14.04可用"></a><a href="https://www.jianshu.com/p/19ab389820ef" target="_blank" rel="noopener">ubuntu一键更换内核 安装锐速 - 16.04 14.04可用</a></h3><h3 id="PAC和全局模式"><a href="#PAC和全局模式" class="headerlink" title="PAC和全局模式"></a>PAC和全局模式</h3><p>1.在全局模式下，所有的网站都默认走代理（使你的所有http/socks数据经过代理服务器的转发送出。）</p><p>2.在PAC模式是只有被墙了的网站才会走代理（连接网站的时候读取PAC文件里的规则，来确定你访问的网站有没有被墙，如果符合，那就会使用代理服务器连接网站）</p><h3 id="优惠网站"><a href="#优惠网站" class="headerlink" title="优惠网站"></a>优惠网站</h3><p><a href="https://xianhuo.org/2016digitalocean-youhuima.html" target="_blank" rel="noopener">https://xianhuo.org/2016digitalocean-youhuima.html</a>  未测试</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;DigitalOcean-VPS搭梯子&quot;&gt;&lt;a href=&quot;#DigitalOcean-VPS搭梯子&quot; class=&quot;headerlink&quot; title=&quot;DigitalOcean VPS搭梯子&quot;&gt;&lt;/a&gt;DigitalOcean VPS搭梯子&lt;/h1&gt;&lt;h2 i
      
    
    </summary>
    
    
      <category term="环境配置" scheme="https://nymrli.top/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
      <category term="生活福利" scheme="https://nymrli.top/tags/%E7%94%9F%E6%B4%BB%E7%A6%8F%E5%88%A9/"/>
    
  </entry>
  
  <entry>
    <title>PyWinAuto使用</title>
    <link href="https://nymrli.top/2019/05/27/PyWinAuto%E4%BD%BF%E7%94%A8/"/>
    <id>https://nymrli.top/2019/05/27/PyWinAuto使用/</id>
    <published>2019-05-27T13:54:45.000Z</published>
    <updated>2019-05-27T13:55:06.264Z</updated>
    
    <content type="html"><![CDATA[<h2 id="PyWinAuto使用"><a href="#PyWinAuto使用" class="headerlink" title="PyWinAuto使用"></a>PyWinAuto使用</h2><p>简单操作示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app = application.Application().start(<span class="string">r'C:\Program Files (x86)\Google\Chrome\Application\chrome.exe'</span>)</span><br><span class="line"><span class="comment"># app = application.Application().start('notepad.exe')</span></span><br></pre></td></tr></table></figure><h3 id="一-判断程序的backend"><a href="#一-判断程序的backend" class="headerlink" title="(一) 判断程序的backend"></a>(一) 判断程序的backend</h3><p>注意，首先需要判断你要进行的程序是用什么语言写的，在实例化的时候会有区别，主要是判断backend是什么。 </p><p><img src="https://img-blog.csdn.net/20171007160746542?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2hhd3Bhbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></p><h3 id="二-确定自动化入口点"><a href="#二-确定自动化入口点" class="headerlink" title="(二)确定自动化入口点"></a>(二)确定自动化入口点</h3><p>这里主要是限制自动化控制进程的范围。如一个程序有多个实例，自动化控制一个实例，而保证其他实例(进程)不受影响。<br>主要有两种对象可以建立这种入口点——Application() , Desktop(). </p><ul><li>Application的作用范围是一个进程，如一般的桌面应用程序都为此类。 </li><li>Desktop的作用范围可以跨进程。主要用于像win10的计算器这样包含多个进程的程序。这种目前比较少见。使用方法见<a href="https://pywinauto.readthedocs.io/en/latest/getting_started.html#entry-points-for-automation" target="_blank" rel="noopener">entry-points-for-automation</a></li></ul><h3 id="三-连接到进程"><a href="#三-连接到进程" class="headerlink" title="(三)连接到进程"></a>(三)连接到进程</h3><p>建立好入口后，我们需要连接到进程中。这里有两种方法: </p><ul><li>使用Application对象的start()方法</li></ul><p><code>app = Application().start(r&quot;D:\Program Files (x86)\tlxsoft\屏幕录像专家 共享版 V2017\屏录专家.exe&quot;)</code></p><ul><li>连接到已有的进程。使用Application对象的connect()方法。这个方法对已有进程的绑定非常灵活。</li></ul><p><code>app = Application().connect(process=19188)</code></p><ul><li>使用窗口句柄绑定</li></ul><p>app = Application().connect(handle=0x00230DB6)</p><ul><li>使用程序路径绑定★</li></ul><p><code>app = Application().connect(path=r&quot;D:\Program Files (x86)\tlxsoft\屏幕录像专家 共享版 V2017\屏录专家.exe&quot;)</code></p><ul><li>使用标题、类型等匹配★★（灵活性比较高）</li></ul><p><code>app = Application().connect(title_re=&quot;屏幕录像专家.*&quot;, class_name=&quot;TMainForm&quot;)</code></p><hr><h3 id="菜单操作"><a href="#菜单操作" class="headerlink" title="菜单操作"></a>菜单操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dlg_spec = app.window(title=<span class="string">'屏幕录像专家 V2017'</span>)</span><br><span class="line">dlg_spec.menu_select(<span class="string">r"转换工具-&gt;EXE/LXE转成MP4"</span>)</span><br></pre></td></tr></table></figure><h3 id="快捷键操作"><a href="#快捷键操作" class="headerlink" title="快捷键操作"></a>快捷键操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dlg_spec = app.window(title=<span class="string">'屏幕录像专家 V2017'</span>)</span><br><span class="line">dlg_spec.type_keys(<span class="string">'%TP'</span>)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">SHIFT                            +      </span><br><span class="line">CTRL                             ^      </span><br><span class="line">ALT                               %</span><br><span class="line">空格键                            &#123;SPACE&#125;</span><br><span class="line"> </span><br><span class="line">BACKSPACE                        &#123;BACKSPACE&#125;、&#123;BS&#125;   or   &#123;BKSP&#125;      </span><br><span class="line">BREAK                            &#123;BREAK&#125;      </span><br><span class="line">CAPS   LOCK                      &#123;CAPSLOCK&#125;      </span><br><span class="line">DEL   or   DELETE                &#123;DELETE&#125;   or   &#123;DEL&#125;      </span><br><span class="line">DOWN   ARROW                     &#123;DOWN&#125;      </span><br><span class="line">END                              &#123;END&#125;      </span><br><span class="line">ENTER                            &#123;ENTER&#125;   or   ~      </span><br><span class="line">ESC                              &#123;ESC&#125;      </span><br><span class="line">HELP                             &#123;HELP&#125;      </span><br><span class="line">HOME                             &#123;HOME&#125;      </span><br><span class="line">INS   or   INSERT                &#123;INSERT&#125;   or   &#123;INS&#125;      </span><br><span class="line">LEFT   ARROW                     &#123;LEFT&#125;      </span><br><span class="line">NUM   LOCK                       &#123;NUMLOCK&#125;      </span><br><span class="line">PAGE   DOWN                      &#123;PGDN&#125;      </span><br><span class="line">PAGE   UP                        &#123;PGUP&#125;      </span><br><span class="line">PRINT   SCREEN                   &#123;PRTSC&#125;      </span><br><span class="line">RIGHT   ARROW                    &#123;RIGHT&#125;      </span><br><span class="line">SCROLL   LOCK                    &#123;SCROLLLOCK&#125;      </span><br><span class="line">TAB                              &#123;TAB&#125;      </span><br><span class="line">UP   ARROW                       &#123;UP&#125;     </span><br><span class="line">+                                &#123;ADD&#125;      </span><br><span class="line">-                                &#123;SUBTRACT&#125;      </span><br><span class="line">*                                &#123;MULTIPLY&#125;      </span><br><span class="line">/                                &#123;DIVIDE&#125;</span><br><span class="line">F1                               &#123;F1&#125; </span><br><span class="line">F2                               &#123;F2&#125; </span><br><span class="line">F3                               &#123;F3&#125; </span><br><span class="line">.....</span><br><span class="line">F15                             &#123;F15&#125; </span><br><span class="line">F16                             &#123;F16&#125;</span><br></pre></td></tr></table></figure><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://blog.csdn.net/qq_37193537/article/details/81207907" target="_blank" rel="noopener">pywinauto 使用</a></p><p><a href="https://www.cnblogs.com/mapu/p/9235587.html" target="_blank" rel="noopener"><a href="https://www.cnblogs.com/mapu/p/9235587.html" target="_blank" rel="noopener">python自动化工具之pywinauto</a></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;PyWinAuto使用&quot;&gt;&lt;a href=&quot;#PyWinAuto使用&quot; class=&quot;headerlink&quot; title=&quot;PyWinAuto使用&quot;&gt;&lt;/a&gt;PyWinAuto使用&lt;/h2&gt;&lt;p&gt;简单操作示例：&lt;/p&gt;
&lt;figure class=&quot;highlig
      
    
    </summary>
    
    
      <category term="Python" scheme="https://nymrli.top/tags/Python/"/>
    
      <category term="自动化运维" scheme="https://nymrli.top/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>Google Colab使用</title>
    <link href="https://nymrli.top/2019/05/27/Google-Colab%E4%BD%BF%E7%94%A8/"/>
    <id>https://nymrli.top/2019/05/27/Google-Colab使用/</id>
    <published>2019-05-27T13:53:31.000Z</published>
    <updated>2019-05-27T13:53:51.206Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Google-Colab使用"><a href="#Google-Colab使用" class="headerlink" title="Google Colab使用"></a>Google Colab使用</h1><blockquote><p>Google colab(Colaboratory)在编辑时候和jupyter notebook类似，并且提供免费的GPU以供使用，这对于需要处理大量数据运算的机器项目来说再合适不过了。挺香的</p></blockquote><p>新建一个笔记本（.ipynb）后，选择”修改-&gt;笔记本设置-&gt;硬件加速器-&gt;GPU”就可以想要用英伟达Tesla K80 GPU啦(2599美元一块)</p><h2 id="colab中文件交互"><a href="#colab中文件交互" class="headerlink" title="colab中文件交互"></a>colab中文件交互</h2><p>文档里提供了四种方式，分别是：</p><ol><li>从本地直接上传</li><li>连接Google Drive</li><li>连接Google Sheet</li><li>连接Google Cloud Storage</li></ol><h3 id="与本地文件交互"><a href="#与本地文件交互" class="headerlink" title="与本地文件交互"></a>与本地文件交互</h3><h4 id="本地文件上传"><a href="#本地文件上传" class="headerlink" title="本地文件上传"></a>本地文件上传</h4><p><code>files.upload()</code> 返回一个由我们上传的所有文件构成的一个字典。 这个字典的<code>key</code>是文件名, 这个字典的<code>value</code>是我们上传的文件的<code>data</code>。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from google.colab import files</span><br><span class="line"></span><br><span class="line">uploaded = files.upload()</span><br><span class="line"></span><br><span class="line">for fn in uploaded.keys():</span><br><span class="line">    print(&apos;User uploaded file &quot;&#123;name&#125;&quot; with length &#123;length&#125; bytes&apos;.format(name=fn, length=len(uploaded[fn])))</span><br></pre></td></tr></table></figure><h4 id="从colab下载文件到本地"><a href="#从colab下载文件到本地" class="headerlink" title="从colab下载文件到本地"></a>从colab下载文件到本地</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from google.colab import files</span><br><span class="line">with open(&apos;example.txt&apos;, &apos;w&apos;) as f:</span><br><span class="line">      f.write(&apos;some content&apos;)</span><br><span class="line">files.download(&apos;example.txt&apos;)</span><br></pre></td></tr></table></figure><h3 id="连接Google-Drive"><a href="#连接Google-Drive" class="headerlink" title="连接Google Drive"></a>连接Google Drive</h3><h4 id="PyDrive"><a href="#PyDrive" class="headerlink" title="PyDrive"></a>PyDrive</h4><p>这里官方有提供了许多种方法。这里我就挑一种介绍了，有兴趣的可以点进这个<a href="https://colab.research.google.com/notebooks/io.ipynb#scrollTo=P3KX0Sm0E2sF" target="_blank" rel="noopener">Colab官方文档</a>进去看。</p><p>这里只介绍使用<code>PyDrive</code>的方法。PyDrive是google-api-python-client的包装库，简化了许多常见的Google Drive API任务。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">!pip install -U -q PyDrive</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pydrive.auth <span class="keyword">import</span> GoogleAuth</span><br><span class="line"><span class="keyword">from</span> pydrive.drive <span class="keyword">import</span> GoogleDrive</span><br><span class="line"><span class="keyword">from</span> google.colab <span class="keyword">import</span> auth</span><br><span class="line"><span class="keyword">from</span> oauth2client.client <span class="keyword">import</span> GoogleCredentials</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 验证身份并创建pydrive客户端.</span></span><br><span class="line">auth.authenticate_user()</span><br><span class="line">gauth = GoogleAuth()</span><br><span class="line">gauth.credentials = GoogleCredentials.get_application_default()</span><br><span class="line">drive = GoogleDrive(gauth)</span><br><span class="line"></span><br><span class="line"><span class="comment"># PyDrive 参考:</span></span><br><span class="line"><span class="comment"># https://gsuitedevs.github.io/PyDrive/docs/build/html/index.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 创建并上传一个文本文档.</span></span><br><span class="line">uploaded = drive.CreateFile(&#123;<span class="string">'title'</span>: <span class="string">'Sample upload.txt'</span>&#125;)</span><br><span class="line">uploaded.SetContentString(<span class="string">'Sample upload file content'</span>)</span><br><span class="line">uploaded.Upload()</span><br><span class="line">print(<span class="string">'Uploaded file with ID &#123;&#125;'</span>.format(uploaded.get(<span class="string">'id'</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 通过id访问文件并输出它的内容.</span></span><br><span class="line">downloaded = drive.CreateFile(&#123;<span class="string">'id'</span>: uploaded.get(<span class="string">'id'</span>)&#125;)</span><br><span class="line">print(<span class="string">'Downloaded content "&#123;&#125;"'</span>.format(downloaded.GetContentString()))</span><br></pre></td></tr></table></figure><h4 id="Mounting-Google-Drive-locally"><a href="#Mounting-Google-Drive-locally" class="headerlink" title="Mounting Google Drive locally"></a>Mounting Google Drive locally</h4><p>首先把整个项目工程上传到 Google Drive 中，然后在该项目文件夹下（执行的主函数文件同一目录）新建一个 run.ipynb。新建方法与之前一样，在项目文件夹中 <strong>右键-更多-Colaboratory</strong>。</p><p>然后，在新建的笔记本中挂载 Google Drive：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from google.colab import drive</span><br><span class="line">drive.mount(&apos;/content/drive/&apos;)</span><br></pre></td></tr></table></figure><p>执行以上语句后，会出现一个链接。点击链接，获取并键入 authorization code，回车，等待圈圈转完就能在左侧刷新，看到挂载的Drive</p><p><img src="https://img-blog.csdnimg.cn/20181129134537107.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NDcyNQ==,size_16,color_FFFFFF,t_70" alt=""></p><p>挂载 Drive 网上还有另一种方法，语句很多很复杂，但这个好像没啥区别。。</p><p>对于这个服务器而言，整体目录结构是这样的：<br>顶级目录为 content，我们进入笔记本后无论笔记本在哪，当前工作目录都是 /content。/content下默认有 sample_data 目录，其中包括运行示例程序的一些必要数据文件。我们的 Google Drive 作为一个 My Drive 文件夹挂载在 /content/drive 文件夹下。我的项目是“我的云端硬盘”里的一个tiny-yolo文件夹，因此我的项目的路径应该为 /content/drive/My Drive/tiny-yolo。这里大家试一试就明白了，比我说啥都快。</p><h5 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h5><ol><li>为了保证资源的合理分配，google 会按照一定机制将服务器回收：它会一定时间后自动回收已连接但闲置的服务器，和有运行代码但未连接的服务器。所以想挂机跑代码，要保证与服务器保持连接（不掉线），否则一早起来可能就会发现它被悄悄的回收了。稍微掉线个几分钟就连回去是没什么问题的。</li><li>在回收服务器后，写到 My Drive 以外其他文件夹下的文件都将被删除，下次再连接就是一台崭新的服务器了。</li><li>挂载 Drive 后再向 Google Drive上传文件，同步到 notebook 那边会有一定的延迟，大概等个几秒钟到半分钟不等，多刷新几下就会出现了。删除文件也是。然而在删除 <a href="http://a.py/" target="_blank" rel="noopener">a.py</a> 后，如果没等 notebook 那边反应过来就重新再传一个 <a href="http://a.py/" target="_blank" rel="noopener">a.py</a>，notebook 那边很可能就出现一个被重命名的文件 a(1).py。。难道是我姿势不对？？</li><li>有一次我上传近 3000 张图片作为训练集到 Drive，上传成功，但是 notebook 没读全，!ls “/content/drive/My Drive/tiny-yolo/data” | wc -l 看一眼花式少文件，我也不知道为啥。。总是迷之过会 (hen) 儿 (jiu) 就好了。。搞得我也是很醉。</li></ol><p><a href="https://blog.csdn.net/qqqinrui/article/details/84975799" target="_blank" rel="noopener">如何使用google drive的免费GPU进行深度学习</a></p><hr><h3 id="连接Google-Sheet"><a href="#连接Google-Sheet" class="headerlink" title="连接Google Sheet"></a>连接Google Sheet</h3><h3 id="连接Google-Cloud-Storage"><a href="#连接Google-Cloud-Storage" class="headerlink" title="连接Google Cloud Storage"></a>连接Google Cloud Storage</h3><p>参考：<a href="https://www.jianshu.com/p/04622e352113" target="_blank" rel="noopener">colab读写外部文件的四种方式</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Google-Colab使用&quot;&gt;&lt;a href=&quot;#Google-Colab使用&quot; class=&quot;headerlink&quot; title=&quot;Google Colab使用&quot;&gt;&lt;/a&gt;Google Colab使用&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;Google co
      
    
    </summary>
    
    
      <category term="环境配置" scheme="https://nymrli.top/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
      <category term="图像处理" scheme="https://nymrli.top/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Keras使用——图像增强</title>
    <link href="https://nymrli.top/2019/05/27/Keras%E4%BD%BF%E7%94%A8%E2%80%94%E2%80%94%E5%9B%BE%E5%83%8F%E5%A2%9E%E5%BC%BA/"/>
    <id>https://nymrli.top/2019/05/27/Keras使用——图像增强/</id>
    <published>2019-05-27T13:52:14.000Z</published>
    <updated>2019-05-27T13:52:52.924Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Keras使用——图像增强"><a href="#Keras使用——图像增强" class="headerlink" title="Keras使用——图像增强"></a>Keras使用——图像增强</h1><h2 id="使用Keras进行深度学习的图像增强（Image-Augmentation）"><a href="#使用Keras进行深度学习的图像增强（Image-Augmentation）" class="headerlink" title="使用Keras进行深度学习的图像增强（Image Augmentation）"></a>使用Keras进行深度学习的图像增强（Image Augmentation）</h2><blockquote><p>Keras是一个高层神经网络API，Keras由纯Python编写而成并基Tensorflow、Theano以及CNTK后端。<br>Keras为支持快速实验而生，能够把你的idea迅速转换为结果，如果你有如下需求，请选择Keras：</p><ul><li>简易和快速的原型设计（keras具有高度模块化，极简，和可扩充特性）</li><li>支持CNN和RNN，或二者的结合</li><li>无缝CPU和GPU切换</li></ul></blockquote><h3 id="ImageDataGenerator"><a href="#ImageDataGenerator" class="headerlink" title="ImageDataGenerator"></a>ImageDataGenerator</h3><p>Keras提供了ImageDataGenerator类，定义关于图片准备和增强的配置。包括以下功能：样本级的标准化特征级的标准化ZCA白化.随机旋转、转换、剪切、翻转维度重排.将增强的图片保存在本地.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.preprocessing.image <span class="keyword">import</span> ImageDataGenerator, array_to_img, img_to_array, load_img</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">Datagen = ImageDataGenerator(rotation_range=<span class="number">20</span>,</span><br><span class="line">        shear_range=<span class="number">0.2</span>,</span><br><span class="line">        zoom_range=<span class="number">0.2</span>,</span><br><span class="line">        horizontal_flip=<span class="keyword">True</span>,</span><br><span class="line">        vertical_flip = <span class="keyword">True</span>,</span><br><span class="line">        fill_mode=<span class="string">'nearest'</span>)</span><br><span class="line"><span class="keyword">for</span> file_name <span class="keyword">in</span> os.listdir(<span class="string">'.'</span>):</span><br><span class="line">    <span class="keyword">if</span> file_name ==<span class="string">'.config'</span> <span class="keyword">or</span> file_name == <span class="string">'sample_data'</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    img = load_img(file_name)</span><br><span class="line">    x_img = img_to_array(img)</span><br><span class="line">    x_img = x_img.reshape((<span class="number">1</span>,)+ x_img.shape)</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> img_batch <span class="keyword">in</span> Datagen.flow(x_img,</span><br><span class="line">                  batch_size=<span class="number">32</span>,</span><br><span class="line">                  save_to_dir=<span class="string">'.'</span>,</span><br><span class="line">                  save_prefix=<span class="string">'candy'</span>,</span><br><span class="line">                  save_format=<span class="string">'jpg'</span>):</span><br><span class="line">        i +=<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> i &gt; <span class="number">10</span>:</span><br><span class="line">           <span class="keyword">break</span></span><br></pre></td></tr></table></figure><h4 id="ImageDataGenerator参数详解及用法实例"><a href="#ImageDataGenerator参数详解及用法实例" class="headerlink" title="ImageDataGenerator参数详解及用法实例"></a>ImageDataGenerator参数详解及用法实例</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">keras.preprocessing.image.ImageDataGenerator(featurewise_center=<span class="keyword">False</span>,</span><br><span class="line">    samplewise_center=<span class="keyword">False</span>,</span><br><span class="line">    featurewise_std_normalization=<span class="keyword">False</span>,</span><br><span class="line">    samplewise_std_normalization=<span class="keyword">False</span>,</span><br><span class="line">    zca_whitening=<span class="keyword">False</span>,</span><br><span class="line">    zca_epsilon=<span class="number">1e-6</span>,</span><br><span class="line">    rotation_range=<span class="number">0.</span>,</span><br><span class="line">    width_shift_range=<span class="number">0.</span>,</span><br><span class="line">    height_shift_range=<span class="number">0.</span>,</span><br><span class="line">    shear_range=<span class="number">0.</span>,</span><br><span class="line">    zoom_range=<span class="number">0.</span>,</span><br><span class="line">    channel_shift_range=<span class="number">0.</span>,</span><br><span class="line">    fill_mode=<span class="string">'nearest'</span>,</span><br><span class="line">    cval=<span class="number">0.</span>,</span><br><span class="line">    horizontal_flip=<span class="keyword">False</span>,</span><br><span class="line">    vertical_flip=<span class="keyword">False</span>,</span><br><span class="line">    rescale=<span class="keyword">None</span>,</span><br><span class="line">    preprocessing_function=<span class="keyword">None</span>,</span><br><span class="line">    data_format=K.image_data_format())</span><br></pre></td></tr></table></figure><p>▲用以生成一个batch的图像数据，支持实时数据提升。训练时该函数会无限生成数据，直到达到规定的epoch次数为止。</p><blockquote><ul><li>featurewise_center：布尔值，使输入数据集去中心化（均值为0）, 按feature执行</li><li>samplewise_center：布尔值，使输入数据的每个样本均值为0</li><li>featurewise_std_normalization：布尔值，将输入除以数据集的标准差以完成标准化, 按feature执行</li><li>samplewise_std_normalization：布尔值，将输入的每个样本除以其自身的标准差</li><li>zca_whitening：布尔值，对输入数据施加ZCA白化</li><li>zca_epsilon: ZCA使用的eposilon，默认1e-6</li><li>rotation_range：整数，数据提升时图片随机转动的角度</li><li>width_shift_range：浮点数，图片宽度的某个比例，数据提升时图片水平偏移的幅度</li><li>height_shift_range：浮点数，图片高度的某个比例，数据提升时图片竖直偏移的幅度</li><li>shear_range：浮点数，剪切强度（逆时针方向的剪切变换角度）</li><li>zoom_range：浮点数或形如[lower,upper]的列表，随机缩放的幅度，若为浮点数，则相当于[lower,upper] = [1 - zoom_range, 1+zoom_range]</li><li>channel_shift_range：浮点数，随机通道偏移的幅度</li><li>fill_mode：；‘constant’，‘nearest’，‘reflect’或‘wrap’之一，当进行变换时超出边界的点将根据本参数给定的方法进行处理</li><li>cval：浮点数或整数，当fill_mode=constant时，指定要向超出边界的点填充的值</li><li>horizontal_flip：布尔值，进行随机水平翻转</li><li>vertical_flip：布尔值，进行随机竖直翻转</li><li>rescale: 重放缩因子,默认为None. 如果为None或0则不进行放缩,否则会将该数值乘到数据上(在应用其他变换之前)</li><li>preprocessing_function: 将被应用于每个输入的函数。该函数将在图片缩放和数据提升之后运行。该函数接受一个参数，为一张图片（秩为3的numpy array），并且输出一个具有相同shape的numpy array</li><li>data_format：字符串，“channel_first”或“channel_last”之一，代表图像的通道维的位置。该参数是Keras 1.x中的image_dim_ordering，“channel_last”对应原本的“tf”，“channel_first”对应原本的“th”。以128x128的RGB图像为例，“channel_first”应将数据组织为（3,128,128），而“channel_last”应将数据组织为（128,128,3）。该参数的默认值是~/.keras/keras.json中设置的值，若从未设置过，则为“channel_last”</li></ul></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.preprocessing.image <span class="keyword">import</span> ImageDataGenerator, array_to_img, img_to_array, load_img</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">Datagen = ImageDataGenerator(</span><br><span class="line">        rotation_range=<span class="number">5</span>,<span class="comment">#图片随机翻转的角度</span></span><br><span class="line">        width_shift_range=[<span class="number">0</span>,<span class="number">0.15</span>],</span><br><span class="line">        height_shift_range=[<span class="number">0</span>,<span class="number">0.2</span>],</span><br><span class="line">        zoom_range=[<span class="number">0.8</span>,<span class="number">1.5</span>], <span class="comment">#随机放大</span></span><br><span class="line">        zca_whitening=<span class="keyword">True</span>,</span><br><span class="line">        brightness_range=[<span class="number">0.1</span>, <span class="number">1.5</span>] ,    </span><br><span class="line">        fill_mode=<span class="string">'nearest'</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">IMG_PATH = <span class="string">'./images'</span></span><br><span class="line">OUT_PATH = <span class="string">'./add'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in os.listdir(OUT_PATH):</span></span><br><span class="line"><span class="comment">#     if i.startswith('N'):</span></span><br><span class="line"><span class="comment">#         os.remove(os.path.join(OUT_PATH,i) )</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file_name <span class="keyword">in</span> os.listdir(IMG_PATH):</span><br><span class="line">    img = load_img( os.path.join(IMG_PATH,file_name) )</span><br><span class="line">    x_img = img_to_array(img)</span><br><span class="line">    x_img = x_img.reshape( (<span class="number">1</span>,)+ x_img.shape )</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">not</span> os.path.exists( os.path.join( OUT_PATH,file_name ) ) ):</span><br><span class="line">        os.mkdir( os.path.join( OUT_PATH,file_name ))</span><br><span class="line">    <span class="keyword">for</span> img_batch <span class="keyword">in</span> Datagen.flow(x_img,</span><br><span class="line">                  batch_size=<span class="number">2</span>, <span class="comment">#batch_size一次增强的图片个数</span></span><br><span class="line">                  save_to_dir= os.path.join(OUT_PATH,file_name),</span><br><span class="line">                  save_prefix=<span class="string">'N'</span>,</span><br><span class="line">                  save_format=<span class="string">'jpg'</span>):</span><br><span class="line">        i +=<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">80</span>:</span><br><span class="line">           <span class="keyword">break</span></span><br><span class="line">print(<span class="string">'done'</span>)</span><br></pre></td></tr></table></figure><p>参考资料：</p><p><a href="https://blog.csdn.net/jacke121/article/details/79245732#commentBox" target="_blank" rel="noopener">参数说明</a></p><p><a href="https://keras.io/zh/preprocessing/image/" target="_blank" rel="noopener">keras中文手册</a></p><p><a href="https://www.cnblogs.com/hutao722/p/10075150.html" target="_blank" rel="noopener">https://www.cnblogs.com/hutao722/p/10075150.html</a></p><p><a href="https://www.cnblogs.com/hutao722/p/10075150.html" target="_blank" rel="noopener">https://www.cnblogs.com/hutao722/p/10075150.html</a></p><h3 id="flow-from-directory实现从文件夹中提取图片和进行简单归一化处理"><a href="#flow-from-directory实现从文件夹中提取图片和进行简单归一化处理" class="headerlink" title="flow_from_directory实现从文件夹中提取图片和进行简单归一化处理"></a>flow_from_directory实现从文件夹中提取图片和进行简单归一化处理</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">flow_from_directory(self, directory,</span><br><span class="line">                            target_size=(<span class="number">256</span>, <span class="number">256</span>), color_mode=<span class="string">'rgb'</span>,</span><br><span class="line">                            classes=<span class="keyword">None</span>, class_mode=<span class="string">'categorical'</span>,</span><br><span class="line">                            batch_size=<span class="number">32</span>, shuffle=<span class="keyword">True</span>, seed=<span class="keyword">None</span>,</span><br><span class="line">                            save_to_dir=<span class="keyword">None</span>,</span><br><span class="line">                            save_prefix=<span class="string">''</span>,</span><br><span class="line">                            save_format=<span class="string">'jpeg'</span>,</span><br><span class="line">                            follow_links=<span class="keyword">False</span>)</span><br></pre></td></tr></table></figure><p>最值得注意的是directory这个参数：</p><blockquote><p>directory: path to the target directory. It should contain one subdirectory per class. Any PNG, JPG, BMP, PPM or TIF images inside each of the subdirectories directory tree will be included in the generator. </p></blockquote><p>这是官方文档的定义，它的目录格式一定要注意是包含一个子目录下的所有图片这种格式，driectoty路径只要写到标签路径上面的那个路径即可。</p><ul><li>target_size：可是实现对图片的尺寸转换，是预处理中比较常用的方法</li><li>save_to_dir: 可以设置保存处理后图片的路径。</li><li>save_prefix: 可以对处理后图片设置前缀。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span>  plt</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> keras.preprocessing <span class="keyword">import</span> image</span><br><span class="line"> </span><br><span class="line">path = <span class="string">'train/'</span></span><br><span class="line">gen_path = <span class="string">'result/'</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_result</span><span class="params">(path)</span>:</span></span><br><span class="line">    name_list = glob.glob(path)</span><br><span class="line">    fig = plt.figure()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>):</span><br><span class="line">        img = Image.open(name_list[i])</span><br><span class="line">        <span class="comment"># add_subplot(331) 参数一：子图总行数，参数二：子图总列数，参数三：子图位置</span></span><br><span class="line">        sub_img = fig.add_subplot(<span class="number">331</span> + i)</span><br><span class="line">        sub_img.imshow(img)</span><br><span class="line">    plt.show()</span><br><span class="line">    <span class="keyword">return</span> fig</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 打印图片列表</span></span><br><span class="line">name_list = glob.glob(path + <span class="string">'*/*'</span>)</span><br><span class="line">print(name_list)</span><br><span class="line"><span class="comment"># ['train\\00a366d4b4a9bbb6c8a63126697b7656.jpg', 'train\\00f34ac0a16ef43e6fd1de49a26081ce.jpg', 'train\\0a5f744c5077ad8f8d580081ba599ff5.jpg', 'train\\0a70f64352edfef4c82c22015f0e3a20.jpg', 'train\\0a783538d5f3aaf017b435ddf14cc5c2.jpg', 'train\\0a896d2b3af617df543787b571e439d8.jpg', 'train\\0abdda879bb143b19e3c480279541915.jpg', 'train\\0ac12f840df2b15d46622e244501a88c.jpg', 'train\\0b6c5bc46b7a0e29cddfa45b0b786d09.jpg']</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 打印图片</span></span><br><span class="line">fig = print_result(path + <span class="string">'*/*'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 保存图片</span></span><br><span class="line">fig.savefig(gen_path + <span class="string">'/original_0.png'</span>, dpi=<span class="number">200</span>, papertype=<span class="string">'a5'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 原图</span></span><br><span class="line">datagen = image.ImageDataGenerator()</span><br><span class="line">gen_data = datagen.flow_from_directory(path, batch_size=<span class="number">1</span>, shuffle=<span class="keyword">False</span>, save_to_dir=gen_path ,</span><br><span class="line">                                       save_prefix=<span class="string">'dog_gen'</span>, target_size=(<span class="number">224</span>, <span class="number">224</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>):</span><br><span class="line">    gen_data.next()</span><br><span class="line"> </span><br><span class="line">fig = print_result(gen_path + <span class="string">'/*'</span>)</span><br><span class="line">fig.savefig(gen_path + <span class="string">'/original_1.png'</span>, dpi=<span class="number">200</span>, papertype=<span class="string">'a5'</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Keras使用——图像增强&quot;&gt;&lt;a href=&quot;#Keras使用——图像增强&quot; class=&quot;headerlink&quot; title=&quot;Keras使用——图像增强&quot;&gt;&lt;/a&gt;Keras使用——图像增强&lt;/h1&gt;&lt;h2 id=&quot;使用Keras进行深度学习的图像增强（Im
      
    
    </summary>
    
    
      <category term="图像处理" scheme="https://nymrli.top/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
      <category term="深度学习" scheme="https://nymrli.top/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Python机器学习及实践——从零开始通往Kaggle竞赛之路</title>
    <link href="https://nymrli.top/2019/05/27/Python%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%8F%8A%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E9%80%9A%E5%BE%80Kaggle%E7%AB%9E%E8%B5%9B%E4%B9%8B%E8%B7%AF/"/>
    <id>https://nymrli.top/2019/05/27/Python机器学习及实践——从零开始通往Kaggle竞赛之路/</id>
    <published>2019-05-27T13:50:34.000Z</published>
    <updated>2019-05-27T13:50:52.094Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python机器学习及实践——从零开始通往Kaggle竞赛之路"><a href="#Python机器学习及实践——从零开始通往Kaggle竞赛之路" class="headerlink" title="Python机器学习及实践——从零开始通往Kaggle竞赛之路"></a>Python机器学习及实践——从零开始通往Kaggle竞赛之路</h1><h1 id="监督学习模型"><a href="#监督学习模型" class="headerlink" title="监督学习模型"></a>监督学习模型</h1><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><h3 id="线性模型"><a href="#线性模型" class="headerlink" title="线性模型"></a>线性模型</h3><h4 id="Logistic"><a href="#Logistic" class="headerlink" title="Logistic"></a>Logistic</h4><p>逻辑回归函数 ： $g(z)=\frac {1}{1+_e^{-z}} $</p><p>逻辑回归模型$h_{w,b}(x)=g(f(w,x,b)) = \frac{1}{1+e^{-z}} = \frac {1}{1+e^{-(w^{T}x+b)}}$</p><h5 id="处理缺省值的方法："><a href="#处理缺省值的方法：" class="headerlink" title="处理缺省值的方法："></a>处理缺省值的方法：</h5><p>1.缺省值较少时直接删除数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = data.replace(to_replace=<span class="string">'? '</span> ,value = np.nan)</span><br><span class="line">data = data.dropna(how=<span class="string">'any'</span>)</span><br></pre></td></tr></table></figure><h5 id="分割数据"><a href="#分割数据" class="headerlink" title="分割数据"></a>分割数据</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.cross_validation <span class="keyword">import</span> train_test_split</span><br><span class="line">X_train , Y_train , X_test , Y_test = train_test_split(data[names[<span class="number">1</span>:<span class="number">10</span>]],data[names[<span class="number">10</span>]],test_size = <span class="number">0.25</span>,random_state = <span class="number">33</span>)</span><br><span class="line"><span class="comment"># 参数说明 ： $1X，$2Y，$3分割规模，$4分割种子</span></span><br></pre></td></tr></table></figure><h5 id="标准化数据"><a href="#标准化数据" class="headerlink" title="标准化数据"></a>标准化数据</h5><blockquote><p>保证每个维度的特征数据方差为1，均值为0，使得预测结果不回被某些维度过大的特征值主导</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line">s = StandardScaler()</span><br><span class="line">X_train = s.fit_transform(X_train)</span><br><span class="line">X_test = s.transform(X_test)</span><br></pre></td></tr></table></figure><h5 id="混淆矩阵"><a href="#混淆矩阵" class="headerlink" title="混淆矩阵"></a>混淆矩阵</h5><blockquote><p>….</p></blockquote><p>:dart:逻辑回归对参数的计算采用精确解析的方式，时间长性能高；SGD（随机梯度上升）分类估计模型参数，时间短性能低。数据规模在10W量级时考虑对时间的消耗，更推荐使用随机梯度方法对模型参数进行估计。</p><p>:memo:说明用例：良恶性肿瘤</p><h4 id="支持向量机（​​分类）"><a href="#支持向量机（​​分类）" class="headerlink" title="支持向量机（​​分类）"></a>支持向量机（​​分类）</h4><p>决定直线位置的并不是所有数据，而是其中 <em>两个空间间隔最小</em> 的 <em>两个不同类别</em> 的数据点，把着中国真正帮助决策最有线性分类模型的数据点叫做“<strong>支持向量</strong>” 。同时要指出的是，logistic模型考虑了所有数据样本对参数的影响，所以不一定能获得最佳的分类器。</p><h5 id="多分类的SVM"><a href="#多分类的SVM" class="headerlink" title="多分类的SVM"></a>多分类的SVM</h5><p>将其中一类看作是阳性（正）样本，其余的全看成负样本。如有10个类别，则创造10个二分类任务。</p><p>:dart:SVM具有精妙的模型假设，可以在高维度的数据中筛选对预测任务有效的少数训练样本，不仅节省模型学习需要的数据内存，还提高了模型的预测性能，但是同时是以CPU资源和计算时间为代价的。</p><p>:memo:手写体数据​： 需要知道的是，经典模型没有对结构性信息学习的能力，所以这边对图片的处理其实是将2D图片像素矩阵（scikit-learn数据集里的是8*8）逐行首尾拼接为1D的像素特征向量。</p><h3 id="非线性模型"><a href="#非线性模型" class="headerlink" title="非线性模型"></a>非线性模型</h3><h4 id="朴素贝叶斯"><a href="#朴素贝叶斯" class="headerlink" title="朴素贝叶斯"></a>朴素贝叶斯</h4><blockquote><p>单独考量每一个维度特征被分类的条件概论，进而综合这些概率并对其所在的特征向量做出分类预测。</p><p><strong>数学假设</strong>：各个维度上的特征被分类的条件概率之间是相互独立的。</p></blockquote><p>:dart:具有较强的特征条件独立假设，使得模型预测所需要估计的参数规模从幂指数量级向线性量级减少，极大​节约了内存消耗和计算时间。但也受限与这种强假设的限制，训练时<strong>无法将各个特征之间的联系</strong>考量在内，使得该模型再其他数据特征关联性较强的分类任务上的性能表现不佳。</p><p>:memo:文本分类：互联网新闻分类、垃圾邮件筛选</p><h4 id="K近邻（KNN）"><a href="#K近邻（KNN）" class="headerlink" title="K近邻（KNN）"></a>K近邻（KNN）</h4><p>设有一个测试样本点，以及已经分好类（带有标签）的训练样本。那么该样本点的类别判定会根据在特征空间中最近的K个已标记样本作为参考。因此模型的性能很大程度上取决于K值的设定，但是K值不属于训练数据后学习的参数，而是模型初始化时需要提前确定的。</p><p>:dart:是无参数模型中最简单的一种，由于需要对预先加载在内存的训练样本进行遍历，逐一计算相似度、排序且选择K个最近邻训练样本的标记。所以是O(N2)的算法复杂度，一旦数据量大，可能会花费更多的时间（另一种理解为空间换时间，可探讨）</p><p>:memo: iris鸢尾花数据集​ : ▲在对数据进行分割时请保证随机取样！<br>由于scikit-learn获得的Iris数据集是根据类别依次排列的，所以如果只采样前25%那么所有采样的样本都是同一个类别，同时由于训练样本是<strong>不平衡的</strong>(Unbalanced)，这样取得的结果存在偏差，且可信度低。因此随机采样<code>train_test_split(data[names[1:10]],data[names[10]],test_size = 0.25,random_state = 33)</code>设置随机种子是必要的。</p><h4 id="决策树"><a href="#决策树" class="headerlink" title="决策树"></a>决策树</h4><blockquote><p>每个节点可以看作是二分类任务，根据不同特征组合搭建多层决策树，在学习时需要考虑特征节点的选择顺序。（度量方式：信息熵、基尼不纯性）</p></blockquote><h5 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h5><h6 id="缺省值："><a href="#缺省值：" class="headerlink" title="缺省值："></a>缺省值：</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">X = titannic[[<span class="string">'pclass'</span>,<span class="string">'age'</span>,<span class="string">'sex'</span>]]</span><br><span class="line">...</span><br><span class="line"><span class="comment"># 补充age里的数据，使用平均数或者中位数都是对模型偏离成都造成最小影响的策略</span></span><br><span class="line">X[<span class="string">'age'</span>].fillna(X[<span class="string">'age'</span>].mean(),inplace = <span class="keyword">True</span>)</span><br></pre></td></tr></table></figure><h6 id="特征值转换"><a href="#特征值转换" class="headerlink" title="特征值转换"></a>特征值转换</h6><p>类别性特征值转换为数值特征，用0/1代替</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction <span class="keyword">import</span> DictVectorizer</span><br><span class="line">vec = DictVectorizer(sparse = <span class="keyword">False</span>)</span><br><span class="line">X_train = vec.fit_transform(X_train.to_dict(orient=<span class="string">'record'</span>))</span><br><span class="line">print(vec.feature_names)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">'age'</span>,<span class="string">'plcass=1st'</span>,<span class="string">'pclass=2nd'</span>, <span class="string">'sex=female'</span>,<span class="string">'sex=male'</span>]</span><br></pre></td></tr></table></figure><p>:dart:决策树在模型描述上有巨大的优势，推断逻辑非常直观，有清晰的可解释性，也方便模型的可视化。同时这些特性也保证了使用决策树时，无需考虑对数据量化甚至标准化。决策树属于有参数模型，需要花费更多时间在训练数据上面</p><p>:memo:泰坦尼克号沉船事故</p><h2 id="回归"><a href="#回归" class="headerlink" title="回归"></a>回归</h2><h3 id="线性回归器"><a href="#线性回归器" class="headerlink" title="线性回归器"></a>线性回归器</h3><p>:dart:美国波士顿地区房价</p><h3 id="KNN"><a href="#KNN" class="headerlink" title="KNN"></a>KNN</h3><h3 id="支持向量机"><a href="#支持向量机" class="headerlink" title="支持向量机"></a>支持向量机</h3><h3 id="回归树"><a href="#回归树" class="headerlink" title="回归树"></a>回归树</h3><h3 id="集成模型"><a href="#集成模型" class="headerlink" title="集成模型"></a>集成模型</h3><h1 id="无监督学习模型"><a href="#无监督学习模型" class="headerlink" title="无监督学习模型"></a>无监督学习模型</h1><h2 id="数据聚类"><a href="#数据聚类" class="headerlink" title="数据聚类"></a>数据聚类</h2><h3 id="K均值（K-means）"><a href="#K均值（K-means）" class="headerlink" title="K均值（K-means）"></a>K均值（K-means）</h3><h2 id="特征降维"><a href="#特征降维" class="headerlink" title="特征降维"></a>特征降维</h2><h3 id="主成分分析（PCA）"><a href="#主成分分析（PCA）" class="headerlink" title="主成分分析（PCA）"></a>主成分分析（PCA）</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python机器学习及实践——从零开始通往Kaggle竞赛之路&quot;&gt;&lt;a href=&quot;#Python机器学习及实践——从零开始通往Kaggle竞赛之路&quot; class=&quot;headerlink&quot; title=&quot;Python机器学习及实践——从零开始通往Kaggle竞赛之
      
    
    </summary>
    
    
      <category term="机器学习" scheme="https://nymrli.top/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="Python" scheme="https://nymrli.top/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ACM-强连通分量</title>
    <link href="https://nymrli.top/2019/04/25/ACM-%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F/"/>
    <id>https://nymrli.top/2019/04/25/ACM-强连通分量/</id>
    <published>2019-04-25T01:27:03.000Z</published>
    <updated>2019-04-25T01:28:12.459Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Tarjan-算法-amp-模板"><a href="#Tarjan-算法-amp-模板" class="headerlink" title="Tarjan 算法&amp;模板"></a><a href="https://www.cnblogs.com/shadowland/p/5872257.html" target="_blank" rel="noopener">Tarjan 算法&amp;模板</a></h1><blockquote><p>Tarjan 算法一种由Robert Tarjan提出的求解有向图强连通分量的算法，它能做到线性时间的复杂度。</p></blockquote><p>如果两个顶点可以相互通达，则称两个顶点强连通(strongly connected)。如果有向图G的每两个顶点都强连通，称G是一个强连通图。有向图的极大强连通子图，称为<strong>强连通分量</strong>(strongly connected components)。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Tarjan</span> <span class="params">( <span class="keyword">int</span> x )</span> </span>&#123;</span><br><span class="line">         dfn[ x ] = ++dfs_num ;</span><br><span class="line">         low[ x ] = dfs_num ;</span><br><span class="line">         vis [ x ] = <span class="literal">true</span> ;<span class="comment">//是否在栈中</span></span><br><span class="line">         <span class="built_in">stack</span> [ ++top ] = x ;</span><br><span class="line">         <span class="keyword">for</span> ( <span class="keyword">int</span> i=head[ x ] ; i!=<span class="number">0</span> ; i=e[i].next )&#123;</span><br><span class="line">                  <span class="keyword">int</span> temp = e[ i ].to ;</span><br><span class="line">                  <span class="keyword">if</span> ( !dfn[ temp ] )&#123;</span><br><span class="line">                           Tarjan ( temp ) ;</span><br><span class="line">                           low[ x ] = gmin ( low[ x ] , low[ temp ] ) ;</span><br><span class="line">                 &#125;</span><br><span class="line">                 <span class="keyword">else</span> <span class="keyword">if</span> ( vis[ temp ])low[ x ] = gmin ( low[ x ] , dfn[ temp ] ) ;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span> ( dfn[ x ]==low[ x ] ) &#123;<span class="comment">//构成强连通分量</span></span><br><span class="line">                  vis[ x ] = <span class="literal">false</span> ;</span><br><span class="line">                  color[ x ] = ++col_num ;<span class="comment">//染色</span></span><br><span class="line">                  <span class="keyword">while</span> ( <span class="built_in">stack</span>[ top ] != x ) &#123;<span class="comment">//清空</span></span><br><span class="line">                           color [<span class="built_in">stack</span>[ top ]] = col_num ;</span><br><span class="line">                           vis [ <span class="built_in">stack</span>[ top-- ] ] = <span class="literal">false</span> ;</span><br><span class="line">                 &#125;</span><br><span class="line">                 top -- ;</span><br><span class="line">         &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Tarjan-算法-amp-模板&quot;&gt;&lt;a href=&quot;#Tarjan-算法-amp-模板&quot; class=&quot;headerlink&quot; title=&quot;Tarjan 算法&amp;amp;模板&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.cnblogs.com/shado
      
    
    </summary>
    
    
      <category term="ACM" scheme="https://nymrli.top/tags/ACM/"/>
    
  </entry>
  
  <entry>
    <title>ACM-并查集</title>
    <link href="https://nymrli.top/2019/04/25/ACM-%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
    <id>https://nymrli.top/2019/04/25/ACM-并查集/</id>
    <published>2019-04-25T01:21:30.000Z</published>
    <updated>2019-04-26T08:32:10.450Z</updated>
    
    <content type="html"><![CDATA[<h1 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h1><blockquote><p> ACM竞赛中，并查集（DisjointSets）这个数据结构经常使用。顾名思义，并查集即表示集合，并且支持快速查找、合并操作。</p><p>用于高效的查找某两个元素是否属于同一个集合；</p></blockquote><p>并查集如何表示一个集合？它借助树的思想，将一个集合看成一棵有根树。那又如何表示一棵树？初始状态下，一个元素即一棵树，根即是元素本身。</p><h3 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h3><p>并查集如何支持合并操作？不难发现，按照树的思想，在同一棵树中的所有元素，根都是相同的。也就是说，<u>合并两个不同的集合，只需要将其中一个集合的根设置为另一个集合的根即可</u>，而需要改变根的那个集合，其实只需要改变根节点的父节点即可。</p><h3 id="如何支持快速查找操作"><a href="#如何支持快速查找操作" class="headerlink" title="如何支持快速查找操作"></a>如何支持快速查找操作</h3><p>如果完全按照上面的合并方法进行合并操作，最后生成的树，可能是完全线性的，那么查询的时间复杂度就退化成了O(n)，因为在这种情况下，程序不得不遍历完所有节点才能查询到当前元素所属的根节点。</p><p>路径压缩算法优化并查集查询操作。按照集合原来的定义，集合中的元素是满足无序性的，因此可以在查询操作进行的过程中，当程序遍历到根节点然后返回的时候，将所有属于当前根节点的元素的父节点直接设置为当前根节点。如此一来，原来的一条链就变成了一般的树了。当下一次查询的时候，就可以很快的遍历到根节点了，复杂度下降为O(1)。</p><p>还有一种优化查询速度的方法，那就是合并两个集合的时候，按秩进行合并，这里的秩代表的以当前元素为根节点的元素个数。很明显，将秩较小的树合并到秩较大的树上更优。</p><p>最后，就是具体如何用代码实现并查集？其实，并查集中只涉及到了保存当前元素的父节点这一信息，所以利用一个数组set[i]代表节点i的父节点即可，如果set[i]=i那么代表当前集合的根即为i元素本身。</p><p>以一道例题为例，HDOJ：1212，时空转移（<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1213" target="_blank" rel="noopener">点击打开链接</a>）：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> NumSets = <span class="number">1005</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> DisjSet[NumSets + <span class="number">1</span>];</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> Rank[NumSets + <span class="number">1</span>];</span><br><span class="line">DisjSet S;</span><br><span class="line">Rank R;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Initialize the set and rank</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Initialize</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;NumSets; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        S[i] = i;</span><br><span class="line">        R[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Find father of the value, with the function of path compression</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(S[value] != value) S[value] = Find(S[value]);</span><br><span class="line">    <span class="keyword">return</span> S[value];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Union the value1 and value2 by the rank of the set which them local in</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SetUnion</span><span class="params">(<span class="keyword">int</span> value1, <span class="keyword">int</span> value2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> fa1 = Find(value1);</span><br><span class="line">    <span class="keyword">int</span> fa2 = Find(value2);</span><br><span class="line">    <span class="keyword">if</span>(fa1 == fa2) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="keyword">if</span>(R[fa1] &gt;= R[fa2])</span><br><span class="line">    &#123;</span><br><span class="line">        S[fa2] = fa1;</span><br><span class="line">        R[fa1] += R[fa2];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        S[fa1] = fa2;</span><br><span class="line">        R[fa2] += R[fa1];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">//freopen("sample.txt", "r", stdin);</span></span><br><span class="line">    <span class="keyword">int</span> cas;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;cas);</span><br><span class="line">    <span class="keyword">while</span>(cas--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> n, m;</span><br><span class="line">        Initialize();</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> a, b;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">            <span class="keyword">if</span>(Find(a) != Find(b))</span><br><span class="line">            &#123;</span><br><span class="line">                SetUnion(a, b);</span><br><span class="line">                --n;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;！</span><br></pre></td></tr></table></figure><p>摘自(<a href="https://blog.csdn.net/u011787119/article/details/46834903" target="_blank" rel="noopener">https://blog.csdn.net/u011787119/article/details/46834903</a>)</p><hr><h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><h4 id="解密犯罪团伙"><a href="#解密犯罪团伙" class="headerlink" title="解密犯罪团伙"></a><a href="https://bbs.codeaha.com/forum.php?mod=viewthread&amp;tid=11223&amp;fromuid=1" target="_blank" rel="noopener">解密犯罪团伙</a></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">1001</span>]=&#123;<span class="number">0</span>&#125;,n,m,sum=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//这里是初始化，非常地重要，数组里面存的是自己数组下标的编号就好了。</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        f[i]=i;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这是找爹的递归函数，不停地去找爹，直到找到祖宗为止，其实就是去找犯罪团伙的最高领导人，</span></span><br><span class="line"><span class="comment">//“擒贼先擒王”原则。</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getf</span><span class="params">(<span class="keyword">int</span> v)</span>   </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(f[v]==v) <span class="keyword">return</span> v;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//这里是路径压缩，每次在函数返回的时候，顺带把路上遇到的人的“BOSS”改为最后找</span></span><br><span class="line">        <span class="comment">//到的祖宗编号，也就是犯罪团伙的最高领导人编号。这样可以提高今后找到犯罪团伙的</span></span><br><span class="line">        <span class="comment">//最高领导人（其实就是树的祖先）的速度。</span></span><br><span class="line">        f[v]=getf(f[v]);<span class="comment">//这里进行了路径压缩</span></span><br><span class="line">        <span class="keyword">return</span> f[v];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这里是合并两子集合的函数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> u)</span>   </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t1,t2;<span class="comment">//t1、t2分别为v和u的大BOSS（首领），每次双方的会谈都必须是各自最高领导人才行</span></span><br><span class="line">    t1=getf(v);</span><br><span class="line">    t2=getf(u);</span><br><span class="line">    <span class="keyword">if</span>( t1!=t2 ) <span class="comment">//判断两个结点是否在同一个集合中，即是否为同一个祖先。</span></span><br><span class="line">         f[t2]=t1; <span class="comment">//“靠左”原则，左边变成右边的BOSS。即把右边的集合，作为左边集合的子集合。</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//请从此处开始阅读程序，从主函数开始阅读程序是一个好习惯。</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,x,y;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">    init();  <span class="comment">//初始化是必须的</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        <span class="comment">//开始合并犯罪团伙</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;x,&amp;y);</span><br><span class="line">        merge(x,y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//最后扫描有多少个独立的犯罪团伙</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(f[i]==i)</span><br><span class="line">            sum++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum);</span><br><span class="line">    getchar();getchar();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="用并查集判断无向图的连通性-或求连通分支个数"><a href="#用并查集判断无向图的连通性-或求连通分支个数" class="headerlink" title="用并查集判断无向图的连通性(或求连通分支个数)~"></a>用并查集判断无向图的连通性(或求连通分支个数)~</h4><p>给定一个无向图和其中的所有边，判断这个图是否所有顶点都是连通的。<br>输入：每组数据的第一行是两个整数n 和m（0&lt; n &lt;=1000）。n 表示图的顶点<br>数目，m 表示图中边的数目。如果n 为0 表示输入结束。随后有m 行数据，每<br>行有两个值x 和y（0&lt;x, y &lt;=n），表示顶点x 和y 相连，顶点的编号从1 开始计<br>算。输入不保证这些边是否重复。<br>输出：对于每组输入数据，如果所有顶点都是连通的，输出 ’YES’ ，否则输<br>出 ’NO’。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">===样例输入===</span><br><span class="line">4 3</span><br><span class="line">1 2</span><br><span class="line">2 3</span><br><span class="line">3 2</span><br><span class="line">3 2</span><br><span class="line">1 2</span><br><span class="line">2 3</span><br><span class="line">0 0</span><br><span class="line">===样例输出===</span><br><span class="line">NO</span><br><span class="line">YES</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> <span class="built_in">map</span>[<span class="number">1005</span>];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">map</span>[i]==i?i:find(<span class="built_in">map</span>[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    <span class="built_in">map</span>[i]=i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m)==<span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        init();</span><br><span class="line">        <span class="keyword">int</span> a,b;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a,&amp;b);</span><br><span class="line">            a--;b--;</span><br><span class="line">            <span class="built_in">map</span>[find(a)]=<span class="built_in">map</span>[find(b)];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">map</span>[i]==i)</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(cnt==<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"YES\n"</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"NO\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><p>题目链接：<a href="http://poj.org/problem?id=1611" target="_blank" rel="noopener">http://poj.org/problem?id=1611</a><br>题目大意： 中文就不解释了；<br>做法：把同一个集合的所有元素都放到同一个集合里， 当放完之后， 检查一下0号同学在哪个集合， 再判断一下剩下的同学是否和它在同一个集合里面；</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by fkjs on 2015-09-17</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2015 fkjs. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//#pragma comment(linker, "/STACK:1024000000,1024000000")</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> clr(x) memset(x, 0, sizeof(x))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm = <span class="number">505</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">30000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> pa[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//并查集的基础-&gt;find函数， 它的特点就是pa[x] = find(pa[x]), 这一语句可以把该路径上的所有点的父亲都改成根节点；</span></span><br><span class="line">    <span class="keyword">return</span> x == pa[x] ? x : pa[x] = find(pa[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;<span class="comment">//链接两个并查集</span></span><br><span class="line">    <span class="keyword">int</span> fa = find(x);<span class="comment">//找到根节点， 当然找的过程中会更新路上的点；</span></span><br><span class="line">    <span class="keyword">int</span> fb = find(y);<span class="comment">//同上；</span></span><br><span class="line">    pa[fa] = fb;<span class="comment">//链接两个集合；</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> LOCAL</span></span><br><span class="line">    <span class="comment">//freopen("C:\\Users\\Administrator\\Desktop\\in.txt", "r", stdin);</span></span><br><span class="line">    <span class="comment">//freopen("C:\\Users\\Administrator\\Desktop\\out.txt", "w", stdout);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="comment">//ios_base::sync_with_stdio(0);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m) == <span class="number">2</span> &amp;&amp; (n || m))&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) pa[i] = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> len; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;len);</span><br><span class="line">            <span class="keyword">int</span> x; <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">            <span class="keyword">int</span> tp = x;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++)&#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">                connect(x, tp);</span><br><span class="line">                tp = x;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> p = find(<span class="number">0</span>);<span class="comment">//找到最初感染者所在的集合， 它的根是p；</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)<span class="comment">//凡是根是p的人都被感染了；</span></span><br><span class="line">            <span class="keyword">if</span>(find(i) == p)</span><br><span class="line">                ans++;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;并查集&quot;&gt;&lt;a href=&quot;#并查集&quot; class=&quot;headerlink&quot; title=&quot;并查集&quot;&gt;&lt;/a&gt;并查集&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt; ACM竞赛中，并查集（DisjointSets）这个数据结构经常使用。顾名思义，并查集即表示集合，并且支
      
    
    </summary>
    
    
      <category term="ACM" scheme="https://nymrli.top/tags/ACM/"/>
    
  </entry>
  
  <entry>
    <title>Java课程第二次实验报告</title>
    <link href="https://nymrli.top/2019/04/25/Java%E8%AF%BE%E7%A8%8B%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
    <id>https://nymrli.top/2019/04/25/Java课程第二次实验报告/</id>
    <published>2019-04-25T00:58:21.000Z</published>
    <updated>2019-04-25T01:17:49.431Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java课程第二次实验报告"><a href="#Java课程第二次实验报告" class="headerlink" title="Java课程第二次实验报告"></a>Java课程第二次实验报告</h1><h2 id="1-寻找并输出11-999之间的数m，它满足m、m2、m3均为回文数。回文数是各位数字左右对称的整数。判断是否为回文要求通过编写方法来完成。"><a href="#1-寻找并输出11-999之间的数m，它满足m、m2、m3均为回文数。回文数是各位数字左右对称的整数。判断是否为回文要求通过编写方法来完成。" class="headerlink" title="1.寻找并输出11~999之间的数m，它满足m、m2、m3均为回文数。回文数是各位数字左右对称的整数。判断是否为回文要求通过编写方法来完成。"></a>1.寻找并输出11~999之间的数m，它满足m、m2、m3均为回文数。回文数是各位数字左右对称的整数。判断是否为回文要求通过编写方法来完成。</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line">String str = Integer.toString(s);</span><br><span class="line"><span class="keyword">if</span>( str.charAt(<span class="number">0</span>) == str.charAt(str.length() - <span class="number">1</span>) )</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">11</span>; s &lt; <span class="number">1000</span>; s++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (isPalindrome(s) &amp;&amp; isPalindrome(s*s) &amp;&amp; isPalindrome(s*s*s) )</span><br><span class="line">    System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-由键盘输入10个整数，比较并输出其中的最大值和最小值。"><a href="#2-由键盘输入10个整数，比较并输出其中的最大值和最小值。" class="headerlink" title="2.由键盘输入10个整数，比较并输出其中的最大值和最小值。"></a>2.由键盘输入10个整数，比较并输出其中的最大值和最小值。</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> </span>&#123;</span><br><span class="line">    Scanner s = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    <span class="keyword">int</span> []arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> maxn = -<span class="number">1000000000</span>;</span><br><span class="line">    <span class="keyword">int</span> minn = <span class="number">1000000000</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">arr[i] = s.nextInt();</span><br><span class="line"><span class="keyword">if</span> ( arr[i] &lt; minn ) minn = arr[i];</span><br><span class="line"><span class="keyword">if</span> ( arr[i] &gt; maxn) maxn = arr[i];</span><br><span class="line">&#125;</span><br><span class="line">    System.out.printf(<span class="string">"最大值:%d ，最小值:%d \n"</span>,maxn,minn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-随机产生50个1-100之间的整数，存放于一个10´5的二维数组中，要求按照10´5的格式打印这个数组（即共显示10行，每行5个数，数与数之间间隔一个空格），并求出该数组所有元素之和。"><a href="#3-随机产生50个1-100之间的整数，存放于一个10´5的二维数组中，要求按照10´5的格式打印这个数组（即共显示10行，每行5个数，数与数之间间隔一个空格），并求出该数组所有元素之和。" class="headerlink" title="3.随机产生50个1-100之间的整数，存放于一个10´5的二维数组中，要求按照10´5的格式打印这个数组（即共显示10行，每行5个数，数与数之间间隔一个空格），并求出该数组所有元素之和。"></a>3.随机产生50个1-100之间的整数，存放于一个10´5的二维数组中，要求按照10´5的格式打印这个数组（即共显示10行，每行5个数，数与数之间间隔一个空格），并求出该数组所有元素之和。</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> row = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> col = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> [][]arr = <span class="keyword">new</span> <span class="keyword">int</span>[row][col];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line">arr[i][j] = (<span class="keyword">int</span>)(Math.random()*<span class="number">100</span> + <span class="number">1</span>);</span><br><span class="line">sum += arr[i][j];</span><br><span class="line">System.out.printf(<span class="string">"%d "</span>,arr[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line">    System.out.println(<span class="string">"SUM:"</span>+sum+<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-学生类的创建和使用"><a href="#4-学生类的创建和使用" class="headerlink" title="4.学生类的创建和使用"></a>4.学生类的创建和使用</h2><p>①创建一个学Student类，成员变量包括：学号、班号、姓名、性别、年龄等，且都是private类型。</p><p>②声明一个构造方法，初始化所有成员变量。</p><p>③分别声明获得各属性的public类型的成员方法，方法名要求以get开头。</p><p>④分别声明修改各属性的public类型的成员方法，方法名要求以set开头。</p><p>⑤声明一个public类型的toString（）方法，把该类中的所有域信息组合成一个字符串。</p><p>⑥声明统计创建Student对象的个数的私有域count和得到Student对象的个数的public方法。</p><p>⑦将类Student放在子包student中。</p><p>⑧在子包student外，创建测试类Student的主类。</p><p>在主类中：创建2个Student对象，输出对象的所有域信息；修改对象的姓名和年龄，输出修改后的姓名和年龄；比较两个Student对象的年龄的大小，输出年龄较大的Student对象。</p><h4 id="Student-java"><a href="#Student-java" class="headerlink" title="Student.java"></a>Student.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> uid;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> classNum;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> String gender;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(<span class="keyword">int</span> uid , <span class="keyword">int</span> classNum , String name , String gender , <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.uid = uid;</span><br><span class="line"><span class="keyword">this</span>.classNum =classNum;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line"><span class="keyword">this</span>.gender = gender;</span><br><span class="line"><span class="keyword">this</span>.age = age;</span><br><span class="line">cnt += <span class="number">1</span>;</span><br><span class="line"><span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUid</span><span class="params">(<span class="keyword">int</span> uid)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.uid = uid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getUid</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> uid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setClassNum</span><span class="params">(<span class="keyword">int</span> classNum)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.classNum = classNum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getClassNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> classNum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGender</span><span class="params">(String gender)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.gender = gender;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getGender</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> gender;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getCnt</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="keyword">return</span> String.format(<span class="string">"学号为%d的同学，在%d班，姓名为%s，性别为%s，年龄为%d，"</span>,</span><br><span class="line">uid,classNum,name,gender,age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="HelloWorld-java"><a href="#HelloWorld-java" class="headerlink" title="HelloWorld.java"></a>HelloWorld.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> student.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> </span>&#123;</span><br><span class="line">    Student stu1 = <span class="keyword">new</span> Student(<span class="number">1</span>,<span class="number">1</span>,<span class="string">"cl"</span>, <span class="string">"male"</span>, <span class="number">20</span>);</span><br><span class="line">    Student stu2 = <span class="keyword">new</span> Student(<span class="number">3</span>,<span class="number">2</span>,<span class="string">"cjl"</span>, <span class="string">"female"</span>, <span class="number">20</span>);</span><br><span class="line">    System.out.println(stu1);</span><br><span class="line">    System.out.println(stu2);</span><br><span class="line">    stu1.setName(<span class="string">"cl2"</span>);</span><br><span class="line">    stu1.setAge(<span class="number">21</span>);</span><br><span class="line">    System.out.printf(<span class="string">"修改之后的姓名:%s,修改后的年龄:%d\n"</span>,stu1.getName(),stu1.getAge());</span><br><span class="line">    System.out.println( stu1.getAge() &gt; stu2.getAge() ?stu1 : stu2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java课程第二次实验报告&quot;&gt;&lt;a href=&quot;#Java课程第二次实验报告&quot; class=&quot;headerlink&quot; title=&quot;Java课程第二次实验报告&quot;&gt;&lt;/a&gt;Java课程第二次实验报告&lt;/h1&gt;&lt;h2 id=&quot;1-寻找并输出11-999之间的数m，它满
      
    
    </summary>
    
    
      <category term="java" scheme="https://nymrli.top/tags/java/"/>
    
      <category term="NJUPT" scheme="https://nymrli.top/tags/NJUPT/"/>
    
  </entry>
  
  <entry>
    <title>ACM-大数定理（高精度）</title>
    <link href="https://nymrli.top/2019/04/25/ACM-%E5%A4%A7%E6%95%B0%E5%AE%9A%E7%90%86%EF%BC%88%E9%AB%98%E7%B2%BE%E5%BA%A6%EF%BC%89/"/>
    <id>https://nymrli.top/2019/04/25/ACM-大数定理（高精度）/</id>
    <published>2019-04-25T00:53:27.000Z</published>
    <updated>2019-04-25T01:21:02.601Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ACM-大数定理（高精度）"><a href="#ACM-大数定理（高精度）" class="headerlink" title="ACM-大数定理（高精度）"></a>ACM-大数定理（高精度）</h1><blockquote><p> 由于c/c++中数据类型的范围比较固定，因此有些题目的数据范围正好卡在这些正常范围之外，此时就需要自己实现大数加减乘除的运算。</p><p>c/c++需要自己手写</p><p>java中有BigInteger类</p></blockquote><h2 id="C-加法实现"><a href="#C-加法实现" class="headerlink" title="C++ 加法实现"></a>C++ 加法实现</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">add</span><span class="params">(<span class="built_in">string</span> a , <span class="built_in">string</span> b)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    a = a.substr(a.find_first_not_of(<span class="string">"0"</span>));</span><br><span class="line">    <span class="comment">// 去前导0</span></span><br><span class="line">    b = b.substr(b.find_first_not_of(<span class="string">"0"</span>));</span><br><span class="line"></span><br><span class="line">    ll lenA = a.length();</span><br><span class="line">    ll lenB = b.length();</span><br><span class="line">    ll len = max(lenA,lenB) + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    reverse(a.begin(),a.end());</span><br><span class="line">    <span class="comment">// 翻转,方便相加</span></span><br><span class="line">    reverse(b.begin(),b.end());</span><br><span class="line"><span class="comment">//    cout &lt;&lt; "a" &lt;&lt; a &lt;&lt; endl;</span></span><br><span class="line"><span class="comment">//    cout &lt;&lt; "b" &lt;&lt; b &lt;&lt; endl;</span></span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">ans</span><span class="params">(len,<span class="string">'0'</span>)</span></span>;</span><br><span class="line">    <span class="comment">// ans全赋值为0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span> ; i &lt; lenA ; i ++) ans[i] = a[i];</span><br><span class="line">    <span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; len;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> ( i &lt; b.length() ) tmp += (ans[i] - <span class="string">'0'</span>) + (b[i] - <span class="string">'0'</span>);</span><br><span class="line">        <span class="keyword">else</span> tmp += (ans[i] - <span class="string">'0'</span>) ;</span><br><span class="line">        ans[i] = (tmp % <span class="number">10</span>) + <span class="string">'0'</span>;</span><br><span class="line">        tmp /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    reverse(ans.begin(),ans.end());</span><br><span class="line">    <span class="comment">// 再将运算结果反转回来</span></span><br><span class="line">    <span class="keyword">return</span> ans.substr(ans.find_first_not_of(<span class="string">"0"</span>));</span><br><span class="line">    <span class="comment">// 仍然需要去前导0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> a = <span class="string">"3"</span>;</span><br><span class="line">    <span class="built_in">string</span> b = <span class="string">"2"</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; add(a,b) &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Java-加减乘除"><a href="#Java-加减乘除" class="headerlink" title="Java 加减乘除"></a>Java 加减乘除</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> </span>&#123;</span><br><span class="line">    BigInteger a = <span class="keyword">new</span> BigInteger(<span class="string">"100"</span>);</span><br><span class="line">    BigInteger b = <span class="keyword">new</span> BigInteger(<span class="string">"2"</span>);</span><br><span class="line">    System.out.println(a.add(b));</span><br><span class="line">        <span class="comment">// 102</span></span><br><span class="line">    System.out.println(a.subtract(b));</span><br><span class="line">        <span class="comment">// 98</span></span><br><span class="line">    System.out.println(a.multiply(b));</span><br><span class="line">        <span class="comment">// 200</span></span><br><span class="line">    System.out.println(a.divide(b));</span><br><span class="line">        <span class="comment">// 50</span></span><br><span class="line">        BigInteger []c = a.divideAndRemainder(b);</span><br><span class="line">    System.out.printf(<span class="string">"除数为:%d,余数为:%d\n"</span>, c[<span class="number">0</span>],c[<span class="number">1</span>]  );</span><br><span class="line">        <span class="comment">// 除数为:50,余数为:0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ACM-大数定理（高精度）&quot;&gt;&lt;a href=&quot;#ACM-大数定理（高精度）&quot; class=&quot;headerlink&quot; title=&quot;ACM-大数定理（高精度）&quot;&gt;&lt;/a&gt;ACM-大数定理（高精度）&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt; 由于c/c++中数据类型
      
    
    </summary>
    
    
      <category term="ACM" scheme="https://nymrli.top/tags/ACM/"/>
    
      <category term="C++" scheme="https://nymrli.top/tags/C/"/>
    
      <category term="java" scheme="https://nymrli.top/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>使用git将项目上传到github（最简单方法）</title>
    <link href="https://nymrli.top/2019/03/28/%E4%BD%BF%E7%94%A8git%E5%B0%86%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0%E5%88%B0github%EF%BC%88%E6%9C%80%E7%AE%80%E5%8D%95%E6%96%B9%E6%B3%95%EF%BC%89/"/>
    <id>https://nymrli.top/2019/03/28/使用git将项目上传到github（最简单方法）/</id>
    <published>2019-03-28T11:39:36.000Z</published>
    <updated>2019-03-28T11:45:09.997Z</updated>
    
    <content type="html"><![CDATA[<h1 id="使用git将项目上传到github（最简单方法）"><a href="#使用git将项目上传到github（最简单方法）" class="headerlink" title="使用git将项目上传到github（最简单方法）"></a>使用git将项目上传到github（最简单方法）</h1><p><strong>首先你需要一个github账号，所有还没有的话先去注册吧！</strong> <strong><a href="https://github.com/" target="_blank" rel="noopener">Github</a></strong></p><p><strong>我们使用git需要先安装git工具，这里给出下载地址，下载后一路直接安装即可：**</strong><a href="https://git-for-windows.github.io/*" target="_blank" rel="noopener">https://git-for-windows.github.io/*</a>*</p><h3 id="1-进入Github首页，点击New-repository新建一个项目"><a href="#1-进入Github首页，点击New-repository新建一个项目" class="headerlink" title="1.进入Github首页，点击New repository新建一个项目"></a><strong>1.进入Github首页，点击New repository新建一个项目</strong></h3><p><img src="https://images2015.cnblogs.com/blog/913913/201608/913913-20160823164154526-418441991.png" alt="img"></p><h3 id="2-填写相应信息后点击create即可"><a href="#2-填写相应信息后点击create即可" class="headerlink" title="2.填写相应信息后点击create即可"></a><strong>2.填写相应信息后点击create即可</strong></h3><blockquote><p><strong>Repository name: 仓库名称</strong></p><p><strong>Description(可选): 仓库描述介绍</strong></p><p><strong>Public, Private : 仓库权限（公开共享，私有或指定合作者）</strong></p><p><strong>Initialize this repository with a README: 添加一个README.md</strong></p><p><strong>gitignore: 不需要进行版本管理的仓库类型，对应生成文件.gitignore</strong></p><p><strong>license: 证书类型，对应生成文件LICENSE</strong></p></blockquote><p><img src="https://images2015.cnblogs.com/blog/913913/201608/913913-20160823165025370-49444506.png" alt="img"></p><p>创建完成后会变成（添加了README.md或者有license)</p><p><img src="https://images2015.cnblogs.com/blog/913913/201608/913913-20160823165107308-439926006.png" alt="img"></p><h3 id="3-点击Clone-or-dowload会出现一个地址，copy这个地址备用。"><a href="#3-点击Clone-or-dowload会出现一个地址，copy这个地址备用。" class="headerlink" title="3.点击Clone or dowload会出现一个地址，copy这个地址备用。"></a><strong>3.点击Clone or dowload会出现一个地址，copy这个地址备用。</strong></h3><p><img src="https://images2015.cnblogs.com/blog/913913/201608/913913-20160823165450636-1167722003.png" alt="img"></p><h3 id="4-接下来就到本地操作了"><a href="#4-接下来就到本地操作了" class="headerlink" title="4.接下来就到本地操作了"></a><strong>4.接下来就到本地操作了</strong></h3><p><strong>首先右键你的项目，如果你之前安装git成功的话，右键会出现两个新选项，分别为Git Gui Here,Git Bash Here,这里我们选择Git Bash Here，进入如下界面，Test_Bluetooth即为我的项目名。</strong></p><p><img src="https://images2015.cnblogs.com/blog/913913/201608/913913-20160823171048308-194895299.png" alt="img"></p><h3 id="5-接下来输入如下代码（关键步骤），把github上面的仓库克隆到本地"><a href="#5-接下来输入如下代码（关键步骤），把github上面的仓库克隆到本地" class="headerlink" title="5.接下来输入如下代码（关键步骤），把github上面的仓库克隆到本地"></a><strong>5.接下来输入如下代码（关键步骤），把github上面的仓库克隆到本地</strong></h3><p><code>git clone https://github.com/CKTim/BlueTooth.git（https://github.com/CKTim/BlueTooth.git替换成你之前复制的地址）</code></p><p><img src="https://images2015.cnblogs.com/blog/913913/201608/913913-20160823171143980-741152042.png" alt="img"></p><h3 id="6-复制文件到刚出来的文件夹中"><a href="#6-复制文件到刚出来的文件夹中" class="headerlink" title="6.复制文件到刚出来的文件夹中"></a><strong>6.复制文件到刚出来的文件夹中</strong></h3><p><strong>这个步骤以后你的本地项目文件夹下面就会多出个文件夹，该文件夹名即为你github上面的项目名，如图我多出了个Test文件夹，我们把本地项目文件夹下的所有文件（除了新多出的那个文件夹不用），其余都复制到那个新多出的文件夹下，</strong></p><p><img src="https://images2015.cnblogs.com/blog/913913/201608/913913-20160823171209730-2089496483.png" alt="img"></p><h3 id="7-接着继续输入命令-cd-Test，进入Test文件夹"><a href="#7-接着继续输入命令-cd-Test，进入Test文件夹" class="headerlink" title="7.接着继续输入命令 cd Test，进入Test文件夹"></a><strong>7.接着继续输入命令 cd Test，进入Test文件夹</strong></h3><p><img src="https://images2015.cnblogs.com/blog/913913/201608/913913-20160823171454261-10363777.png" alt="img"></p><h3 id="8-接下来依次输入以下代码即可完成其他剩余操作："><a href="#8-接下来依次输入以下代码即可完成其他剩余操作：" class="headerlink" title="8.接下来依次输入以下代码即可完成其他剩余操作："></a><strong>8.接下来依次输入以下代码即可完成其他剩余操作：</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .        （注：别忘记后面的.，此操作是把Test文件夹下面的文件都添加进来）</span><br><span class="line">git commit  -m  "提交信息"  （注：“提交信息”里面换成你需要，如“first commit”）</span><br><span class="line">git push -u origin master   （注：此操作目的是把本地仓库push到github上面，此步骤需要你输入帐号和密码）</span><br></pre></td></tr></table></figure><p> <img src="https://images2015.cnblogs.com/blog/913913/201608/913913-20160823171557823-3863512.png" alt="img"></p><p><img src="https://images2015.cnblogs.com/blog/913913/201608/913913-20160823171651808-1225335136.png" alt="img"></p><p><img src="https://images2015.cnblogs.com/blog/913913/201608/913913-20160823171818933-1506815566.png" alt="img"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;使用git将项目上传到github（最简单方法）&quot;&gt;&lt;a href=&quot;#使用git将项目上传到github（最简单方法）&quot; class=&quot;headerlink&quot; title=&quot;使用git将项目上传到github（最简单方法）&quot;&gt;&lt;/a&gt;使用git将项目上传到git
      
    
    </summary>
    
    
      <category term="git" scheme="https://nymrli.top/tags/git/"/>
    
  </entry>
  
</feed>
