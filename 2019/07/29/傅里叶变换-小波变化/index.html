<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="author" content="果粒橙"><meta name="renderer" content="webkit"><meta name="copyright" content="果粒橙"><meta name="keywords" content="果粒橙的博客"><meta name="description" content="想和你讲，说了会心动 ，缄默会心安。"><meta name="Cache-Control" content="no-cache"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>傅里叶变换-&gt;小波变化 · Mr.li's Blog</title><link rel="stylesheet" href="/css/style.css?v=2018.7.9"><link rel="stylesheet" href="/css/animation.css?v=2018.7.9"><link rel="icon" href="/img/assets/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.6"><!-- scripts--><script>(function( w ){
  "use strict";
  // rel=preload support test
  if( !w.loadCSS ){
    w.loadCSS = function(){};
  }
  // define on the loadCSS obj
  var rp = loadCSS.relpreload = {};
  // rel=preload feature support test
  // runs once and returns a function for compat purposes
  rp.support = (function(){
    var ret;
    try {
      ret = w.document.createElement( "link" ).relList.supports( "preload" );
    } catch (e) {
      ret = false;
    }
    return function(){
      return ret;
    };
  })();

  // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
  // then change that media back to its intended value on load
  rp.bindMediaToggle = function( link ){
    // remember existing media attr for ultimate state, or default to 'all'
    var finalMedia = link.media || "all";

    function enableStylesheet(){
      link.media = finalMedia;
    }

    // bind load handlers to enable media
    if( link.addEventListener ){
      link.addEventListener( "load", enableStylesheet );
    } else if( link.attachEvent ){
      link.attachEvent( "onload", enableStylesheet );
    }

    // Set rel and non-applicable media type to start an async request
    // note: timeout allows this to happen async to let rendering continue in IE
    setTimeout(function(){
      link.rel = "stylesheet";
      link.media = "only x";
    });
    // also enable media after 3 seconds,
    // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
    setTimeout( enableStylesheet, 3000 );
  };

  // loop through link elements in DOM
  rp.poly = function(){
    // double check this to prevent external calls from running
    if( rp.support() ){
      return;
    }
    var links = w.document.getElementsByTagName( "link" );
    for( var i = 0; i < links.length; i++ ){
      var link = links[ i ];
      // qualify links to those with rel=preload and as=style attrs
      if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
        // prevent rerunning on link
        link.setAttribute( "data-loadcss", true );
        // bind listeners to toggle media back
        rp.bindMediaToggle( link );
      }
    }
  };

  // if unsupported, run the polyfill
  if( !rp.support() ){
    // run once at least
    rp.poly();

    // rerun poly on an interval until onload
    var run = w.setInterval( rp.poly, 500 );
    if( w.addEventListener ){
      w.addEventListener( "load", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    } else if( w.attachEvent ){
      w.attachEvent( "onload", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    }
  }


  // commonjs
  if( typeof exports !== "undefined" ){
    exports.loadCSS = loadCSS;
  }
  else {
    w.loadCSS = loadCSS;
  }
}( typeof global !== "undefined" ? global : this ) );</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" defer></script><script src="/js/main.js?v=2018.7.9" defer></script><!-- fancybox--><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script><!-- busuanzi--><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></head><body><section class="profile-close" id="cxo-profile"><div class="profile-avatar"><i class="fa fa-caret-left"></i><img src="https://avatars1.githubusercontent.com/u/31088082?s=400&amp;u=7a99ff83916afb3f4c5312bd78a1be17fe0e34ed&amp;v=4"></div><!--.profile-saying
  i.fa.fa-comment
  .saying--><div class="cxo-profile-inner"><div class="profile-name">Mrli</div><div class="profile-signature">别装作很努力,<br>因为结局不会陪你演戏。</div><div class="contacts"><div>Contacts:</div><span><a href="http://sighttp.qq.com/msgrd?v=1&amp;uin=1063052964" target="_black">QQ</a></span><span><a href="https://www.cnblogs.com/nymrli/" target="_black">博客园</a></span></div><div class="read-progress"></div></div></section><header id="cxo-intro" style="height: 60vh;background-image: url(/img/intro/index-bg.png);"><nav id="cxo-intro-nav"><section><div class="intro-nav-title"><a href="/">Mr.li's Blog</a></div><div class="intro-nav-label-box"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div><i class="fa fa-bars intro-nav-menu"><div class="intro-nav-drop"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div></i><div class="clear"></div></section></nav><h1 class="post-title">傅里叶变换-&gt;小波变化</h1><div class="post-intros"><div class="post-intro-meta"><span class="post-intro-time"><i class="post-intro-calendar fa fa-edit"></i><span>2019/07/29</span></span><span class="busuanzi-pv" id="busuanzi_container_page_pv"><i class="post-intro-calendar fa fa-user-o"></i><span id="busuanzi_value_page_pv"></span></span><span class="post-intro-tags"><a class="intro-tag fa fa-tag" href="javascript:void(0)" date-tags="信号处理"> 信号处理</a></span></div><div class="post-intro-read"><span> Word count: <span class="post-count">6,143</span> | Reading time: <span class="post-count">22</span>min</span></div></div></header><article class="cxo-up" id="cxo-content-outer"><section id="cxo-content-inner"><article class="article-entry" id="post"><h1 id="傅里叶变换-gt-小波变化"><a href="#傅里叶变换-gt-小波变化" class="headerlink" title="傅里叶变换-&gt;小波变化"></a>傅里叶变换-&gt;小波变化</h1><blockquote>
<p>声明:文中大多数内容来自(<a href="https://www.zhihu.com/people/zhi-yuan-ya-77" target="_blank" rel="noopener">知乎1335</a>)[<a href="https://www.zhihu.com/people/zhi-yuan-ya-77],matlab源代码:[1368069096/From_FT_to_WT_examples-](https://link.zhihu.com/?target=https%3A//github.com/1368069096/From_FT_to_WT_examples-),部分为个人理解阐明" target="_blank" rel="noopener">https://www.zhihu.com/people/zhi-yuan-ya-77],matlab源代码:[1368069096/From_FT_to_WT_examples-](https://link.zhihu.com/?target=https%3A//github.com/1368069096/From_FT_to_WT_examples-),部分为个人理解阐明</a></p>
</blockquote>
<p>[TOC]</p>
<h2 id="傅里叶变换FT"><a href="#傅里叶变换FT" class="headerlink" title="傅里叶变换FT"></a>傅里叶变换FT</h2><h3 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h3><blockquote>
<p>（FOURIER TRANSFORM，简称FT）</p>
</blockquote>
<h3 id="为什么傅里叶变换可以把一个信号从时域变换到频域"><a href="#为什么傅里叶变换可以把一个信号从时域变换到频域" class="headerlink" title="为什么傅里叶变换可以把一个信号从时域变换到频域?"></a>为什么傅里叶变换可以把一个信号从时域变换到频域?</h3><p>先给出公式，傅里叶变换的形式为：$X(w)=\int_{-\infty}^{+\infty} x(t) e^{-j w t} d t$</p>
<p>PS：傅里叶变换还存在系数，有的文章写的是 <img src="https://www.zhihu.com/equation?tex=%5Cfrac%7B1%7D%7B2%5Cpi%7D" alt="[公式]"> ，有的文章写的是 <img src="https://www.zhihu.com/equation?tex=%5Csqrt%7B%5Cfrac%7B1%7D%7B2%5Cpi%7D%7D" alt="[公式]"> ，两个系数只要满足正变换系数乘上逆变换系数等于 <img src="https://www.zhihu.com/equation?tex=%5Cfrac%7B1%7D%7B2%5Cpi%7D" alt="[公式]"> 即可。这是为了保证经过一次正变换和反变换之后，得到的信号与原信号幅值相同，与我们接下来的讨论关系不大。</p>
<h3 id="1-理解变换公式"><a href="#1-理解变换公式" class="headerlink" title="1.理解变换公式"></a>1.理解变换公式</h3><p>我们知道，根据欧拉公式，$e^{-j w t}=\cos (w t)-j \sin (w t)$。也就是说，傅里叶变换的本质就是：将原始信号乘上一组<strong>三角函数</strong>（正余弦），之后<strong>在整个时间域上积分</strong>。就这么简单！</p>
<h4 id="y-sin-3t-图"><a href="#y-sin-3t-图" class="headerlink" title="y=sin(3t)图"></a>y=sin(3t)图</h4><p>我们来看一个信号：y = sin(3t)，如下图：</p>
<p><img src="https://pic2.zhimg.com/80/v2-0cd28b5014a967f161a3327a44793ba5_hd.jpg" alt="img"></p>
<p>很好的周期性质，且每个周期的积分值都是0。如果对这个函数在$(-\infty,+\infty)$积分，那就是基本是0，因为 $(-\infty,+\infty)$包含了无数个周期。</p>
<p>PS：虽然这个积分在高数上不可积，但是你应该明白这里我要表达的意思：<strong>因为良好的周期性，且每个周期积分值是0，那么最后在很长的一段时间区间上积分，得到的还是一个很小的数，近似为0。</strong></p>
<p>我们来用一段较长的时间区间计算一下，$\int_{0}^{50} \sin (3 t) d t=0.1002$，结果符合我们的预计。</p>
<h4 id="y-sin-4t-sin-3t-图"><a href="#y-sin-4t-sin-3t-图" class="headerlink" title="y=sin(4t)sin(3t)图"></a>y=sin(4t)sin(3t)图</h4><p>现在，我们来将这个信号乘上一个sin(4t) ，则信号变为y1 = sin(3t)*sin(4t)，如下图：</p>
<p><img src="https://pic3.zhimg.com/80/v2-5f0c8596fe05899d0cb5a1acaec70cfe_hd.jpg" alt="img"></p>
<p>具有一个较短的小幅震动的周期和一个较长的主体周期，对吧？且每个主体周期的积分值都是0。同以上讨论，如果对这个函数在 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%2C%2B%5Cinfty%EF%BC%89" alt="[公式]"> 积分，<strong>基本还接近于0</strong>，因为 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%2C%2B%5Cinfty%29" alt="[公式]"> 包含了无数个主体周期。</p>
<h4 id="y-sin-3-1t-sin-3t-图"><a href="#y-sin-3-1t-sin-3t-图" class="headerlink" title="y=sin(3.1t)sin(3t)图"></a>y=sin(3.1t)sin(3t)图</h4><p>之后呢，我们来将这个信号乘上一个sin(3.1t) ，则信号变为y2 = sin(3t)*sin(3.1t)，如下图：</p>
<p><img src="https://pic3.zhimg.com/80/v2-5af405c36d2d0ef48ab9f91ac7fb1672_hd.jpg" alt="img"></p>
<p>同样是有一个较短的小幅震动的周期和一个较长的主体周期，对吧？可以判断，每个主体周期的积分值都是0（虽然（0，50）这个区间没有完整地展示主题周期）。那么，依然同以上讨论，如果对这个函数在 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%2C%2B%5Cinfty%29" alt="[公式]"> 积分，基本还接近于0，因为 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%2C%2B%5Cinfty%29" alt="[公式]"> 包含了无数个主体周期。</p>
<p>我们来用之前的时间区间计算一下， <img src="https://www.zhihu.com/equation?tex=%5Cint_%7B0%7D%5E%7B50%7D+sin%283t%29%2Asin%283.1t%29+dt+%3D+-4.7731" alt="[公式]"> 。</p>
<p>咦？这一次怎么距离0这么远了呢？</p>
<p>原因就是：<strong>对于sin(3t)*sin(4t)，它的主体周期较短</strong>，（0，50）是包含了好几个主体周期的，也就是说（0，50）在某种程度上是类似于 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%EF%BC%8C%2B%5Cinfty%29" alt="[公式]"> 的。但是，<strong>对于sin(3t)*sin(3.1t)，它的主体周期很长</strong>，（0，50）连它的一个完整的主体周期都没有包含，那么（0，50）是不能类似于 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%EF%BC%8C%2B%5Cinfty%29" alt="[公式]"> 的，积分值自然就比较大。</p>
<p>我们此时可以这样小小总结一下，对于信号y = sin(3t)，它的频率是3rad/s，（如果你喜欢用HZ，那就除以 <img src="https://www.zhihu.com/equation?tex=2%5Cpi+" alt="[公式]"> ，就是 <img src="https://www.zhihu.com/equation?tex=%5Cfrac%7B3%7D%7B2%5Cpi%7D" alt="[公式]"> HZ，这里使用rad/s，是为了与前面的傅里叶变换的公式中的w一致），而sin(4t)的频率是4rad/s，sin(3.1t)的频率是3.1rad/s。</p>
<p>如果在 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%EF%BC%8C%2B%5Cinfty%29" alt="[公式]"> 积分，那么y1 = sin(3t)<em>sin(4t)，y2 = sin(3t)</em>sin(3.1t)的积分值都是0，也就是说，sin(4t)和sin(3.1t)在这里是没差别的。</p>
<p>但是！！！<strong>如果在一个<u>有限区间内</u>积分，由于sin(3.1t)的频率3.1rad/s，距离原信号y = sin(3t)的频率3rad/s更近，那么sin(3.1t)和sin(3t)的乘积，也就是y2 = sin(3t)*sin(3.1t)的积分的绝对值会更大，也就是会离0更远。这里已经显示出一定的频率选择性了。</strong></p>
<p>最后，让我们请出我们今天的主角，将这个信号乘上一个自己同频率的sin(3t) ，则信号变为y3 = sin(3t)*sin(3t)，如图：</p>
<p><img src="https://pic2.zhimg.com/80/v2-639fbf1ab8e20ee318da83b21c641da1_hd.jpg" alt="img"></p>
<p>Amazing！！！发现了什么？良好的周期性？还有呢？<strong>由于乘上了自己，任何时间的幅值都大于等于0了！不再满足周期内积分值为0这个条件了！</strong>那么，此时，我们对这个信号在 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%EF%BC%8C%2B%5Cinfty%29" alt="[公式]"> 积分，就会得到一个非常非常大的数字。<strong>这个很大很大的数字就告诉你，这个信号和你乘的信号是同频率的！这就是可以知道信号中具有哪些频率部分了，不是吗？</strong></p>
<p>我们还是来用之前的时间区间计算一下， $\int_{0}^{50} \sin (3 t) * \sin (3 t) d t=25.0833$。<strong>是不是比其他的积分值都大了好多？</strong></p>
<p>好了，我们已经知道，<strong>▲.将一个信号乘上一个特定频率的sin函数，在 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%EF%BC%8C%2B%5Cinfty%29" alt="[公式]"> 上积分，可以将信号中与sin函数同频率的部分筛选出来。那么，原则上讲，只要乘上所有频率的sin函数，并积分，不就知道原始信号中的所有频率部分了吗？</strong></p>
<p><strong>但是这样做需要把所有频率乘进去，做无数次计算哈！</strong>算不出来的。所以，<strong>我们将所乘的sin函数的频率作为符号变量w，来进行积分，即：</strong></p>
<p>$X(w)=\int_{-\infty}^{+\infty} x(t) \sin (w t) d t$</p>
<p>注意：这里的w只是一个符号变量，这样的话，<strong>就只需要做一次积分，可以计算了。</strong></p>
<p><strong>计算出来X(w)之后，想知道特定的频率w0对应的积分值，直接将w0带入X(w)就立马得到积分值。</strong>，如想知道是否含有w0=3rad/s分量,那么久计算X(3)看结果是否为0，这样就能知道原信号中是否含有这一频率的部分了。</p>
<p>好了，我们推导的这个式子，是不是与傅里叶变换的式子：</p>
<p>$X(w)=\int_{-\infty}^{+\infty} x(t) e^{-j w t} d t=\int_{-\infty}^{+\infty} x(t)(\cos (w t)-j \sin (w t)) d t$</p>
<p>很像了呢？</p>
<p><strong>这就是傅里叶变换的原理！乘上带有符号变量的sin、cos函数，并积分，就知道原始信号中的所有频率部分啦！</strong></p>
<h3 id="2、傅里叶变换（FT）的正交性"><a href="#2、傅里叶变换（FT）的正交性" class="headerlink" title="2、傅里叶变换（FT）的正交性"></a><strong>2、傅里叶变换（FT）的正交性</strong></h3><p>傅里叶变换是一种变换。在变换中，我们<strong>将原始信号乘上的变化信号称为基函数</strong>。</p>
<p>在傅里叶变换中，一系列不同频率的sin、cos等函数称为这个变换的基函数。至于为什么需要既使用sin，又使用cos，这涉及到一点点正交函数的概念。傅里叶变换中的不同频率的<strong>sin、cos等函数是正交函数</strong>，使用正交函数组成的基函数会带给变换一些方便。</p>
<h4 id="什么是正交性"><a href="#什么是正交性" class="headerlink" title="什么是正交性?"></a>什么是正交性?</h4><h5 id="向量正交"><a href="#向量正交" class="headerlink" title="向量正交:"></a>向量正交:</h5><p>我们都知道，向量 <img src="https://www.zhihu.com/equation?tex=a%2Cb" alt="[公式]"> 的内积为<img src="https://www.zhihu.com/equation?tex=a%5Ccdot+b" alt="[公式]"> 。<strong>正交的定义为内积为0</strong>，即 <img src="https://www.zhihu.com/equation?tex=a%5Ccdot+b+%3D+0" alt="[公式]"> 。如 <img src="https://www.zhihu.com/equation?tex=a+%3D+%281%2C0%29" alt="[公式]"> 表示x轴， <img src="https://www.zhihu.com/equation?tex=b+%3D+%280%2C1%29" alt="[公式]"> 表示y轴，则 <img src="https://www.zhihu.com/equation?tex=a%5Ccdot+b+%3D+0" alt="[公式]"> 即意味着x轴与y轴正交。</p>
<p>假设有一个向量 <img src="https://www.zhihu.com/equation?tex=v+%3D+%28x_0%2Cy_0%29" alt="[公式]"> ， <img src="https://www.zhihu.com/equation?tex=x_0" alt="[公式]"> 在x轴上定位v，<img src="https://www.zhihu.com/equation?tex=y_0" alt="[公式]"> 在y轴上定位v。<strong>当x轴与y轴正交时，意味着x坐标和y坐标表示的信息是彼此独立的，两坐标可以完全定位v。</strong></p>
<p>那么，当我们已知向量v，已知x轴a与y轴b，如果知道v的坐标呢？答案就是，<strong>投影/内积</strong>。</p>
<p>将v向x轴a做投影/内积： <img src="https://www.zhihu.com/equation?tex=x_0+%3D+v%5Ccdot+a" alt="[公式]"> ，可以得到<img src="https://www.zhihu.com/equation?tex=x_0" alt="[公式]">；将v向y轴b做投影/内积： <img src="https://www.zhihu.com/equation?tex=y_0+%3D+v%5Ccdot+b" alt="[公式]">，可以得到<img src="https://www.zhihu.com/equation?tex=y_0" alt="[公式]">。</p>
<h5 id="正交基"><a href="#正交基" class="headerlink" title="正交基"></a>正交基</h5><p>类似的，函数 <img src="https://www.zhihu.com/equation?tex=+f_1%28x%29%2C+f_2%28x%29" alt="[公式]"> 的内积定义如下： <img src="https://www.zhihu.com/equation?tex=%5Cint_%7B-%5Cinfty%7D%5E%7B%2B%5Cinfty%7D+f_1%28x%29f_2%28x%29+dx" alt="[公式]">。<strong>函数正交的定义同样为内积为0</strong>，即 <img src="https://www.zhihu.com/equation?tex=%5Cint_%7B-%5Cinfty%7D%5E%7B%2B%5Cinfty%7D+f_1%28x%29f_2%28x%29+dx+%3D+0" alt="[公式]"> 。PS：对于周期函数，定义中的积分区间为一个周期T。</p>
<p>我们来看，<img src="https://www.zhihu.com/equation?tex=%5Cint_%7B0%7D%5E%7BT%7D+sin%28w_1x%29cos%28w_2x%29+dx+%3D+0" alt="[公式]"> ，<img src="https://www.zhihu.com/equation?tex=%5Cint_%7B0%7D%5E%7BT%7D+sin%28w_1x%29sin%28w_2x%29+dx+%3D+0%2C+w_1+%5Cne+w_2" alt="[公式]"> ，<img src="https://www.zhihu.com/equation?tex=%5Cint_%7B0%7D%5E%7BT%7D+cos%28w_1x%29cos%28w_2x%29+dx+%3D+0%2C+w_1+%5Cne+w_2" alt="[公式]"> </p>
<p>▲.因此，傅里叶变换中的不同频率的sin、cos等函数都是正交函数。我们<strong>将cos想象为一个轴，将sin想象为一个轴</strong> ，这两个轴，就张了一个<strong>函数空间</strong>。</p>
<p>我们已经知道， <img src="https://www.zhihu.com/equation?tex=x%28t%29" alt="[公式]"> 的傅里叶变换为：</p>
<p>$X(w)=\int_{-\infty}^{+\infty} x(t)(\cos (w t)-j \sin (w t)) d t=\int_{-\infty}^{+\infty} x(t) \cos (w t) d t-j \int_{-\infty}^{+\infty} x(t) \sin (w t) d t$</p>
<p>我们来看，实部 <img src="https://www.zhihu.com/equation?tex=%5Cint_%7B-%5Cinfty%7D%5E%7B%2B%5Cinfty%7D+x%28t%29cos%28wt%29dt++" alt="[公式]"> 即相当于将 <img src="https://www.zhihu.com/equation?tex=x%28t%29" alt="[公式]"> 与cos做内积，即向cos轴投影，得到的是在这个<strong>函数空间</strong>内的cos坐标，也就是与cos的相似度；虚部<img src="https://www.zhihu.com/equation?tex=%5Cint_%7B-%5Cinfty%7D%5E%7B%2B%5Cinfty%7Dx%28t%29sin%28wt%29dt++" alt="[公式]"> 即相当于将 <img src="https://www.zhihu.com/equation?tex=x%28t%29" alt="[公式]"> 与sin做内积，即向sin轴投影，得到的是在这个函数空间内的sin坐标，也就是与sin的相似度。cos坐标和sin坐标都确定后，该信号就确定了。</p>
<p>因此，傅里叶变换之后，<strong>实部是与cos的相似度，虚部是与sin的相似度</strong>，傅里叶变换也就是与cos的相似度和与sin的相似度的总和，也就表示了相应的频率信息。</p>
<p>相似度的理解：通过相似度，可以将跟本身频率相似的频率挑选出来</p>
<p><strong>3、小例子</strong></p>
<p>最后，我们对于y=sin(3t)做傅里叶变换（这里画图用的matlab的FFT，是FT的离散快速算法，不是积分出来的，但是原理是相同的，仅做展示使用），变换后的图像如下：</p>
<p><img src="https://pic4.zhimg.com/80/v2-ffb3a17723fa1ef528dfc2350a36bd6f_hd.jpg" alt="img"></p>
<p>可以看到，与我们的预期相同，变换之后，在 <img src="https://www.zhihu.com/equation?tex=%5Comega+%3D+3+rad%2Fs" alt="[公式]"> 处，出现了峰值，即表示该信号中包含了 <img src="https://www.zhihu.com/equation?tex=%5Comega+%3D+3+rad%2Fs" alt="[公式]"> 的频率成分。</p>
<h3 id="这里需要说明三点："><a href="#这里需要说明三点：" class="headerlink" title="这里需要说明三点："></a>这里需要说明三点：</h3><p>1、这边的作图结果不是理想FT，如果是理想的FT，即在 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%EF%BC%8C%2B%5Cinfty%29" alt="[公式]"> 上积分，那么除了 <img src="https://www.zhihu.com/equation?tex=%5Comega+%3D+3+rad%2Fs" alt="[公式]"> 的积分值将是 <img src="https://www.zhihu.com/equation?tex=%2B%5Cinfty" alt="[公式]"> 之外，其他任意频率处的值都应该是0，得到的将是一个冲激函数。但是，这里我用的是离散傅里叶变换（详见我的下一篇文章），可以暂时理解为<strong>类似于我们讨论过的有限区间</strong>，当频率靠近3rad/s时（如之前提到的3.1rad/s的例子），也会积分出来一个较大的数值，所以这里不是一个冲击函数，而是一个山峰状的函数；</p>
<p>2、傅里叶变换之后是具有<strong>实部和虚部的</strong>，实部是与cos的相似度，虚部是与sin的相似度。我们要频率信息的时候，不管是与某一频率w的cos的相似还是与某一频率w的sin的相似，都是这一频率w嘛，不需要区分。因此，这里画图取了模，就不存在实部和虚部了。</p>
<p>3、在<img src="https://www.zhihu.com/equation?tex=%5Comega+%3D+3+rad%2Fs" alt="[公式]">处之所以没有出现我们讨论的很大很大很大的值，是因为画图之前对于变换之后的幅值统一除以了信号取样点的个数，统一压缩了一定的倍数。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>1.由于sin和cos是一对正交基，所以所有的信号都可以分解成正弦信号与余弦信号的线性叠加。</p>
<p>2.除了与乘以本身频率w的正余弦相同信号再在$(-\infty,+\infty)$范围上积分的结果会是非0以外，乘以其他频率信号的结果都是0.通过这个特性可以将是否含有w频率信号鉴别出</p>
<p>2.傅里叶变化的基函数$e^{jwt}$由欧拉公式可分解为$e^{-j w t}=\cos (w t)-j \sin (w t)$,所以根据公式:$X(w)=\int_{-\infty}^{+\infty} x(t) \cos (w t) d t-j \int_{-\infty}^{+\infty} x(t) \sin (w t) d t$，前部分乘以cos(wt)能挑出cos成分中的信号频率，后部分乘以的sin(wt)能挑出sin成分中的信号频率。再将挑出的各信号频率线性叠加的结果就是分解信号总的含有各谐波分量的频率</p>
<hr>
<h2 id="傅里叶变换（FT）的缺点与短时傅里叶变换（STFT）"><a href="#傅里叶变换（FT）的缺点与短时傅里叶变换（STFT）" class="headerlink" title="傅里叶变换（FT）的缺点与短时傅里叶变换（STFT）"></a>傅里叶变换（FT）的缺点与短时傅里叶变换（STFT）</h2><h3 id="离散傅里叶变换（DFT）"><a href="#离散傅里叶变换（DFT）" class="headerlink" title="离散傅里叶变换（DFT）"></a>离散傅里叶变换（DFT）</h3><p>在本文正式开始之前，我们需要明确一下实际信号进行的FT的一些特殊之处。实际采集的信号往往是这样的：</p>
<p><img src="https://pic4.zhimg.com/80/v2-fb5df4498e5bd43450ec0476c56129f3_hd.jpg" alt="img"></p>
<p>实际的信号往往具有两个特点：</p>
<p>1、<strong>离散性</strong>，就是采集数据不连续，很容易理解，采集信号肯定是一个一个数据采集的；</p>
<p>2、<strong>有限性</strong>，虽然理想的傅里叶变换是从 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%2C%2B%5Cinfty%29" alt="[公式]"> 进行积分，但是实际信号往往实在一个区间内(a,b)的。</p>
<p>所以，我们要用到离散傅里叶变换（DISCRETE FOURIER TRANSFORM，简称DFT），DFT与FT相比，就是多了两个特征：<strong>1、离散型，2、有限性</strong>。</p>
<p>我们来一起试一试如何推导DFT公式。首先设采集了N个信号点，其时刻为 <img src="https://www.zhihu.com/equation?tex=t_0%2Ct_1%2C...t_%7BN-1%7D" alt="[公式]">，对应时刻采集到的信号值为 <img src="https://www.zhihu.com/equation?tex=x%28t_0%29%2Cx%28t_1%29%2C...x%28t_%7BN-1%7D%29" alt="[公式]"> 。很自然的，原来信号连续，是积分，现在数据离散了，那就是把积分变成累加。于是我们得到： $X(w)=\sum_{i=0}^{N-1} x\left(t_{i}\right) e^{-j w t_{i}}$</p>
<p>这么一来，我们发现，原信号有N个数据点，DFT变换后的信号却变成连续的了，我们将之称为<strong>离散时间傅里叶变换（</strong>DISCRETE TIME FOURIER TRANSFORM，简称<strong>DTFT）</strong>。</p>
<p>DTFT有两个缺点，第一， <img src="https://www.zhihu.com/equation?tex=w+%5Cin+%28-%5Cinfty%2C%2B%5Cinfty%29" alt="[公式]"> 且连续，需要进行无数次计算，计算机无法计算；第二，在进行计算的时候，我们需要已知： <img src="https://www.zhihu.com/equation?tex=t_0%2Ct_1%2C...t_%7BN-1%7D" alt="[公式]"> 和 <img src="https://www.zhihu.com/equation?tex=x%28t_0%29%2Cx%28t_1%29%2C...x%28t_%7BN-1%7D%29" alt="[公式]"> ，但是调用过FFT函数的同学都知道，FFT只需要已知<img src="https://www.zhihu.com/equation?tex=x%28t_0%29%2Cx%28t_1%29%2C...x%28t_%7BN-1%7D%29" alt="[公式]">就可以进行。</p>
<p>这是怎么回事呢？</p>
<p>首先，我们<strong>使用相对采样时间 <img src="https://www.zhihu.com/equation?tex=n+%3D+0%2C1%2C...N-1" alt="[公式]"> 代替真实采样时间 <img src="https://www.zhihu.com/equation?tex=t_0%2Ct_1%2C...t_%7BN-1%7D" alt="[公式]"> ，</strong>可以得到： <img src="https://www.zhihu.com/equation?tex=X%28w%29+%3D+%5Csum_%7Bn%3D0%7D%5E%7BN-1%7Dx%28n%29+e%5E%7B-jwn%7D" alt="[公式]"> 。</p>
<p>此时我们发现， <img src="https://www.zhihu.com/equation?tex=X%28w%29" alt="[公式]"> 变成了以 <img src="https://www.zhihu.com/equation?tex=2%5Cpi" alt="[公式]"> 为周期的函数，即 <img src="https://www.zhihu.com/equation?tex=X%28w%2B2%5Cpi%29+%3D+%5Csum_%7Bn%3D0%7D%5E%7BN-1%7Dx%28n%29+e%5E%7B-j%28w%2B2%5Cpi%29n%7D+%3D++%5Csum_%7Bn%3D0%7D%5E%7BN-1%7Dx%28n%29+e%5E%7B-jwn%7De%5E%7B-j2%5Cpi+n%7D+%3D++%5Csum_%7Bn%3D0%7D%5E%7BN-1%7Dx%28n%29+e%5E%7B-jwn%7D+%3D+X%28w%29" alt="[公式]"></p>
<p>那么，我们只需要计算 <img src="https://www.zhihu.com/equation?tex=w+%5Cin+%280%2C2%5Cpi%29" alt="[公式]"> 区间的 <img src="https://www.zhihu.com/equation?tex=X%28w%29" alt="[公式]"> ，就可以得到 <img src="https://www.zhihu.com/equation?tex=+w+%5Cin%28-%5Cinfty%2C%2B%5Cinfty%29" alt="[公式]"> 区间的<img src="https://www.zhihu.com/equation?tex=X%28w%29" alt="[公式]">了。也就是说，通过使用相对采样时间 <img src="https://www.zhihu.com/equation?tex=n+%3D+0%2C1%2C...N-1" alt="[公式]"> 代替真实采样时间 <img src="https://www.zhihu.com/equation?tex=t_0%2Ct_1%2C...t_%7BN-1%7D" alt="[公式]">，我们将 <img src="https://www.zhihu.com/equation?tex=w" alt="[公式]"> 的范围从 <img src="https://www.zhihu.com/equation?tex=+%28-%5Cinfty%2C%2B%5Cinfty%29" alt="[公式]"> 缩小到了 <img src="https://www.zhihu.com/equation?tex=%280%2C2%5Cpi%29" alt="[公式]"> 。</p>
<p>自然地，我们希望将<img src="https://www.zhihu.com/equation?tex=%280%2C2%5Cpi%29" alt="[公式]"> 离散化称为N个点，这样计算机就可以计算了！则取$w=\frac{2 \pi k}{N}, k=0,1, \ldots N-1$，则有： $X(k)=\sum_{n=0}^{N-1} x(n) e^{-j \frac{2 \pi k}{N} n}, k=0,1 \ldots N-1$</p>
<p>好了，这就是<strong>离散傅里叶变换DFT</strong>了！</p>
<p>接下来，来看DFT的两个性质：</p>
<ul>
<li><p>第一， <img src="https://www.zhihu.com/equation?tex=X%280%29+%3D+%5Csum_%7Bn%3D0%7D%5E%7BN-1%7Dx%28n%29" alt="[公式]"> ，即 <img src="https://www.zhihu.com/equation?tex=X%280%29" alt="[公式]"> 是所有元素的和，通常会比其他的元素大几个数量级。</p>
</li>
<li><p>第二， <img src="https://www.zhihu.com/equation?tex=X%281%29+%3D+%5Csum_%7Bn%3D0%7D%5E%7BN-1%7Dx%28n%29+e%5E%7B-j+2%5Cpi%5Cfrac%7B1%7D%7BN%7D+n%7D" alt="[公式]"> ，<img src="https://www.zhihu.com/equation?tex=X%28N-1%29+%3D+%5Csum_%7Bn%3D0%7D%5E%7BN-1%7Dx%28n%29+e%5E%7B-j+2%5Cpi%5Cfrac%7BN-1%7D%7BN%7D+n%7D" alt="[公式]"> ， <img src="https://www.zhihu.com/equation?tex=X%281%29+%3D+%5Ctilde%7BX%28N-1%29%7D" alt="[公式]"> ，即第二个元素和最后一个元素共轭，同理有<img src="https://www.zhihu.com/equation?tex=X%282%29+%3D+%5Ctilde%7BX%28N-2%29%7D" alt="[公式]"> 等等。</p>
</li>
</ul>
<p>如下图所示，DFT之后的 <img src="https://www.zhihu.com/equation?tex=N" alt="[公式]"> 个元素中，第一个为均值；之后的 <img src="https://www.zhihu.com/equation?tex=N-1" alt="[公式]"> 个元素，只有一半元素是独立的。</p>
<p><img src="https://pic3.zhimg.com/80/v2-7779743b0ad81ce875fe42c0f69adbc2_hd.jpg" alt="img"></p>
<p>需要说明，这里 <img src="https://www.zhihu.com/equation?tex=k" alt="[公式]"> 是一种相对频率，独立元素中，最小相对频域为1，最大相对频率为 <img src="https://www.zhihu.com/equation?tex=%5Cfrac%7BN%7D%7B2%7D" alt="[公式]"> 。<strong>要想把</strong> <img src="https://www.zhihu.com/equation?tex=k" alt="[公式]"> <strong>还原到真实的频率</strong> <img src="https://www.zhihu.com/equation?tex=w" alt="[公式]"> <strong>，只需要 <img src="https://www.zhihu.com/equation?tex=w+%3D+%5Cfrac%7Bk-1%7D%7BN%7DFs" alt="[公式]"> ，将</strong> <img src="https://www.zhihu.com/equation?tex=k%3D1%2C2...%5Cfrac%7BN%7D%7B2%7D" alt="[公式]"> <strong>映射到</strong> <img src="https://www.zhihu.com/equation?tex=%280%2C%5Cfrac%7BFs%7D%7B2%7D%29" alt="[公式]"> <strong>即可</strong>， <img src="https://www.zhihu.com/equation?tex=Fs" alt="[公式]"> <strong>为采样频率。</strong></p>
<p>PS：简单说一下，根据香农采样定理，当采样频率为 <img src="https://www.zhihu.com/equation?tex=Fs" alt="[公式]"> 时，能采到的最大信号频率为<img src="https://www.zhihu.com/equation?tex=%5Cfrac%7BFs%7D%7B2%7D" alt="[公式]">。因此，将相对频率 <img src="https://www.zhihu.com/equation?tex=k%3D1%2C2...%5Cfrac%7BN%7D%7B2%7D" alt="[公式]"> 通过公式 <img src="https://www.zhihu.com/equation?tex=w+%3D+%5Cfrac%7Bk-1%7D%7BN%7DFs" alt="[公式]"> ，得到的 <img src="https://www.zhihu.com/equation?tex=w" alt="[公式]"> 就在区间<img src="https://www.zhihu.com/equation?tex=%280%2C%5Cfrac%7BFs%7D%7B2%7D%29" alt="[公式]">内，也就是真实频率的区间了。</p>
<p>所以DFT公式为： <img src="https://www.zhihu.com/equation?tex=X%28k%29+%3D+%5Csum_%7Bn%3D0%7D%5E%7BN-1%7Dx%28n%29+e%5E%7B-j%5Cfrac%7B2%5Cpi+k%7D%7BN%7Dn%7D%2C+k+%3D+0%2C1...N-1" alt="[公式]"></p>
<p>PS：DFT公式的形式很多，有的是从时域到频域，有的是从空间域到频域，但是本质都是一样的，抓住<strong>离散性</strong>和<strong>有限性</strong>两个特点即可。<strong>离散性是指积分变成了累加，有限性是指积分/累加区间不是 <img src="https://www.zhihu.com/equation?tex=%28-%5Cinfty%2C%2B%5Cinfty%29" alt="[公式]"> 了，而是一个有限区间了。</strong></p>
<h3 id="傅里叶变换（FT）的缺点"><a href="#傅里叶变换（FT）的缺点" class="headerlink" title="傅里叶变换（FT）的缺点"></a><strong>傅里叶变换（FT）的缺点</strong></h3><p>应该说明，虽然本小节的题目是FT的缺点，但是FT和DFT的本质是相同的。由于信号都是有限长度的、离散的，所以接下来进行的都是DFT，不过在某些部分为了方便理解，还是写了FT的公式。在看本文的时候，你不需要刻意区分这两个概念。</p>
<p>我们现在来看两个信号，如下图： <img src="https://www.zhihu.com/equation?tex=y1%3Dsin%285t%29%2A%280%3Ct%3C25%29%2Bsin%28t%29%2A%2825%3Ct%3C50%29" alt="[公式]"> ，<img src="https://www.zhihu.com/equation?tex=y2%3Dsin%28t%29%2A%280%3Ct%3C25%29%2Bsin%285t%29%2A%2825%3Ct%3C50%29" alt="[公式]"> 。</p>
<p><img src="https://pic3.zhimg.com/80/v2-023a9ca6d0985e9dc271a08a199269de_hd.jpg" alt="img"></p>
<p><img src="https://pic1.zhimg.com/80/v2-4ea09915e3f6f18391df410eab709da4_hd.jpg" alt="img"></p>
<p>这两个信号都是由sin(t)和sin(5t)组成的，y1是先出现了sin(5t)，再出现了sin(t)，y2是先出现了sin(t)，再出现了sin(5t)。</p>
<p>我们对它们进行FT，看看他们包含怎么样的频率，如下图：</p>
<p><img src="https://pic3.zhimg.com/80/v2-8a1cd705a0354cb0cbeb067e1f7ce992_hd.jpg" alt="img">                                                                    y1,FT</p>
<p><img src="https://pic1.zhimg.com/80/v2-c95d1c9d11a72b51447425f5fbd0e0c8_hd.jpg" alt="img">                                                                        y2,FT</p>
<p>Amazing！发现了什么？<strong>变换后的结果是一模一样的，都在w=1rad/s和w=5rad/s出现了峰值！这就可以说明FT的缺点了——FT只能提供频域信息，而完全丢失了时域信息！！！</strong></p>
<p><strong>不管某一频率的信号出现的时间是早还是晚，FT都是将它一视同仁地乘上sin和cos(FT的变换基函数)，然后在整个时间区间加和。因此，它不能提供某一频率信号出现的时间。</strong></p>
<p>比如，对于上面两个信号，FT只能告诉我们，它们都有1rad/s和5rad/s的频率，而不能告诉我们1rad/s和5rad/s分别出现在哪个时间段。</p>
<p>所以，怎么办呢？？？</p>
<p><strong>那就是把信号分成左右两半啊！左边进行一次FT，右边进行一次FT，很简单吧！好了，这就是短时傅里叶变换（STFT）的基本原理。</strong></p>
<p>所以，接下来我们要正式开始步入——短时傅里叶变换（STFT），看看它是如何解决这个问题的。</p>
<h3 id="短时傅里叶变换（STFT）"><a href="#短时傅里叶变换（STFT）" class="headerlink" title="短时傅里叶变换（STFT）"></a><strong>短时傅里叶变换（STFT）</strong></h3><p>如上所述，我们将信号从中间截断，左边进行一次FT，右边进行一次FT，分别来看看。</p>
<p><img src="https://pic4.zhimg.com/80/v2-43e0b0a1d3e8758f32fc784a35b00183_hd.jpg" alt="img">y1左</p>
<p><img src="https://pic3.zhimg.com/80/v2-6ccbe7a93f390033d4444a949bcd356e_hd.jpg" alt="img">y1右</p>
<p><img src="https://pic2.zhimg.com/80/v2-271124958efcef10cd9a370d3f5061b9_hd.jpg" alt="img">y2左</p>
<p><img src="https://pic4.zhimg.com/80/v2-417fda7319483f84086bc73b299c5b03_hd.jpg" alt="img">y2右</p>
<p>可以看出，y1的左半部分是5rad/s，右半部分是1rad/s，y2恰好相反。这就说明，在y1中，(0, 25)的信号是5rad/s的频率，(25, 50)的信号是5rad/s的频率，y2恰好相反。<strong>这就是短时傅里叶变换的基本原理。</strong></p>
<p>但是数学嘛，能用一个公式表达的，就别用一段话表达，截断、切开这些语句太不专业了。<strong>截断、切开的操作，更专业的讲叫作分窗，其实是可以通过数学上的处理变成DFT变换的基函数的一部分的。接下来我们来看一看。</strong></p>
<p>首先，你可以想象一下，有一个窗子在这个信号上从左向右滑动，每次你都只能看到这个信号的一部分，<strong>所以我们把这个长度叫作窗长width。</strong></p>
<p>现在我们来定义一个方窗函数： <img src="https://www.zhihu.com/equation?tex=y_%7Bwindow%7D+%3D+1+%2A%28-width%2F2%3Ct%3Cwidth%2F2%29" alt="[公式]"> ，如下图，即是width = 10 的一个方窗函数：</p>
<p><img src="https://pic2.zhimg.com/80/v2-bd998377f53a5dffc8546cf019d119a1_hd.jpg" alt="img"></p>
<p>定义了方窗函数之后，我们<strong>只需要对方窗函数进行平移，再与原信号作乘，就相当于原来的截断、切开的操作，因此这种操作更专业地叫作分窗。</strong></p>
<p>那么，<strong>将方窗函数向右平移了 <img src="https://www.zhihu.com/equation?tex=t_s" alt="[公式]">（s可能是sliding的意思吧），再与原信号相乘，由于方窗函数除了中心的width部分是1外，其他部分都是0，这就相当于提取出了原信号在</strong><img src="https://www.zhihu.com/equation?tex=t+%3D+t_s" alt="[公式]"><strong>处，宽度为width的部分</strong>，这个信号分窗这个操作就可以写成： <img src="https://www.zhihu.com/equation?tex=y_%7Bwindow%7D%28t+-+t_s%29++y%28t%29" alt="[公式]"> 。</p>
<p>如下两图所示，将 <img src="https://www.zhihu.com/equation?tex=y%28t%29%3Dsin%285t%29" alt="[公式]"> 与 <img src="https://www.zhihu.com/equation?tex=y_%7Bwindow%7D%28t+-+25%29" alt="[公式]"> 相乘，就相当于取出来了 <img src="https://www.zhihu.com/equation?tex=y%28t%29%3Dsin%285t%29" alt="[公式]"> 中的(20,30)中的一段。</p>
<p>那么，我们对原信号中被提取出来的这一部分进行FT，就可以写成： <img src="https://www.zhihu.com/equation?tex=X%28w%2Ct_s%29+%3D+%5Cint_%7B-%5Cinfty%7D%5E%7B%2B%5Cinfty%7Dy_%7Bwindow%7D%28t+-+t_s%29++y%28t%29e%5E%7B-jw%28t-t_s%29%7Ddt" alt="[公式]"></p>
<p>PS：这里之所以 <img src="https://www.zhihu.com/equation?tex=e%5E%7B-jwt%7D" alt="[公式]"> 要变成 <img src="https://www.zhihu.com/equation?tex=e%5E%7B-jw%28t-t_s%29%7D" alt="[公式]"> ，是为了保证做FT的时候相乘的基函数具有统一性。</p>
<p>如此，变换后的<img src="https://www.zhihu.com/equation?tex=X%28w%2Ct_s%29" alt="[公式]">代表<strong>原信号在</strong><img src="https://www.zhihu.com/equation?tex=t+%3D+t_s" alt="[公式]"><strong>处、宽度为width的部分的傅里叶变换</strong>，也就可以提取出来<strong>原信号在</strong><img src="https://www.zhihu.com/equation?tex=t+%3D+t_s" alt="[公式]"><strong>处、宽度为width的部分，包含各个频率部分的多少！带入不同的</strong> <img src="https://www.zhihu.com/equation?tex=t_s" alt="[公式]"> <strong>，也就是随着窗子的滑动，就可以知道不同的时间段内频率的成分。</strong></p>
<p>我们采用width为10的方窗函数对<img src="https://www.zhihu.com/equation?tex=y3%3Dsin%2820t%29%2A%280%3Ct%3C25%29%2Bsin%28t%29%2A%2825%3Ct%3C50%29" alt="[公式]"> 进行STFT，如下：</p>
<p>首先，方窗函数位于 <img src="https://www.zhihu.com/equation?tex=t+%3D+5s" alt="[公式]"> 处，与原始信号相乘，选择出(0,10)的信号。</p>
<p><img src="https://pic4.zhimg.com/80/v2-9c184aa29068c665f5ead3439d42cd0b_hd.jpg" alt="img"></p>
<p>对选择出来的信号进行FT。可以看到，当<img src="https://www.zhihu.com/equation?tex=t+%3D+5s" alt="[公式]">时，选择的时间区间为(0,10)，这一部分只包含了 <img src="https://www.zhihu.com/equation?tex=w+%3D+20rad%2Fs" alt="[公式]"> 的频率成分。</p>
<p><img src="https://pic4.zhimg.com/80/v2-ec4cc9c93dc4d7b763ac5843fd02be8b_hd.jpg" alt="img"></p>
<p>之后，方窗函数向右移动，与原始信号相乘，选择出不同时间区间的信号，进行FT。这里选择<img src="https://www.zhihu.com/equation?tex=t+%3D+25s" alt="[公式]">进行展示。</p>
<p><img src="https://pic1.zhimg.com/80/v2-6df4bbf241bd086b20e7db05a31cf7d0_hd.jpg" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-3bd9b031d41ce1e3349d762e74b850fa_hd.jpg" alt="img"></p>
<p>可以看到，当<img src="https://www.zhihu.com/equation?tex=t+%3D+25s" alt="[公式]">时，选择的时间区间为(20,30)，这一部分即包含了 <img src="https://www.zhihu.com/equation?tex=w+%3D+20rad%2Fs" alt="[公式]"> 的频率成分，也包含了 <img src="https://www.zhihu.com/equation?tex=w+%3D+1rad%2Fs" alt="[公式]"> 的频率成分。</p>
<p>重复以上过程，我们可以<strong>将方窗函数选择的不同时间区间的信号的FT的结果拼合起来，形成一张三维图</strong>。由此，我们即可知道，<strong>在 <img src="https://www.zhihu.com/equation?tex=%28t_s-width%2F2%2C+t_s%2Bwidth%2F2%29" alt="[公式]"> 的时间区间内，信号具有怎么样的频率成分。</strong></p>
<p><img src="https://pic4.zhimg.com/80/v2-389958865460686e1d15a0b2f9ddb277_hd.jpg" alt="img"></p>
<p>通过width = 10的方窗的STFT结果，我们可以知道，对于信号：<img src="https://www.zhihu.com/equation?tex=y3%3Dsin%2820t%29%2A%280%3Ct%3C25%29%2Bsin%28t%29%2A%2825%3Ct%3C50%29" alt="[公式]"> ，在(0,10)、(10,20)时间区间内，具有20rad/s的频率成分；在(20,30)时间区间内，具有1rad/s和20rad/s的频率成分；在(30,40)、(40,50)时间区间内，具有1rad/s的频率成分。</p>
<p>最后，进行三点重要的讨论。</p>
<p>第一点，<strong>变换之后的</strong> <img src="https://www.zhihu.com/equation?tex=X%28w%2Ct_s%29" alt="[公式]"> <strong>是一个三维函数，它有两个自变量，</strong> <img src="https://www.zhihu.com/equation?tex=t_s" alt="[公式]"> <strong>和w。</strong><img src="https://www.zhihu.com/equation?tex=t_s" alt="[公式]"> 指的是<strong>原信号在</strong><img src="https://www.zhihu.com/equation?tex=t+%3D+t_s" alt="[公式]"><strong>处，</strong>w上一篇文章我们已经讨论过了，就是频率。所以，STFT提取出来的信息就是：<strong>原信号在</strong><img src="https://www.zhihu.com/equation?tex=t+%3D+t_s" alt="[公式]"><strong>处、宽度为width的部分，包含的频率信息。</strong></p>
<p><strong>原则上讲，可以得到任一<img src="https://www.zhihu.com/equation?tex=+t_s" alt="[公式]">对应的频率成分，如下图。</strong></p>
<p><img src="https://pic2.zhimg.com/80/v2-dccf7c6b239c4777b934a1c871f86aed_hd.jpg" alt="img"></p>
<p><strong>但是</strong> <strong><img src="https://www.zhihu.com/equation?tex=t_s" alt="[公式]"> 是连续的，并不意味着你知道了每个时刻的频率成分，你知道的还只是 <img src="https://www.zhihu.com/equation?tex=%28t_s-width%2F2%2C+t_s%2Bwidth%2F2%29" alt="[公式]">这一段区间内的频率信息。所以一般不需要计算所有的</strong> <img src="https://www.zhihu.com/equation?tex=t_s" alt="[公式]"><strong>，每隔width计算一次即可。</strong></p>
<p>你或许会想，我<strong>把width缩小一些，不就可以知道更精确的时间范围内的频率了吗？</strong>是的，你的猜想很对！但是，<strong>如此做也会带来一些频域分辨率的问题。</strong>这一点涉及到一些时域分辨率和频域分辨率的知识，我们下一篇文章会着重讲。</p>
<h4 id="本质变化"><a href="#本质变化" class="headerlink" title="本质变化:"></a>本质变化:</h4><p>第二点，<strong>方窗函数是可以包含入变换基函数内部的，这组成了新的基函数，同时反映了STFT的本质。</strong></p>
<p>我们来看， 如果定义 <img src="https://www.zhihu.com/equation?tex=%5Cphi+%28t%29+%3D+e%5E%7B-jwt%7D+y_%7Bwindow%7D%28t%29" alt="[公式]"> ，那么<img src="https://www.zhihu.com/equation?tex=%5Cphi+%28t+-+t_s%29+%3D+e%5E%7B-jw%28t-+t_s%29%7D+y_%7Bwindow%7D%28t-+t_s%29" alt="[公式]"></p>
<p>那么，STFT的公式： <img src="https://www.zhihu.com/equation?tex=X%28w%2Ct_s%29+%3D++%5Cint_%7B-%5Cinfty%7D%5E%7B%2B%5Cinfty%7Dy_%7Bwindow%7D%28t+-+t_s%29++y%28t%29e%5E%7B-jw%28t-+t_s%29%7Ddt" alt="[公式]"> 就可以写成： <img src="https://www.zhihu.com/equation?tex=X%28w%2C+t_s%29++%3D++%5Cint_%7B-%5Cinfty%7D%5E%7B%2B%5Cinfty%7Dy%28t%29%5Cphi%28t+-+t_s%29+dt" alt="[公式]"></p>
<p>我们在上一篇文章里说过，<strong>变换就是将原信号乘上一个基函数，再积分的过程，那么，SDFT的基函数就是 <img src="https://www.zhihu.com/equation?tex=%5Cphi%28t%29+%3D+e%5E%7B-jwt%7D+y_%7Bwindow%7D%28t%29" alt="[公式]"> ！</strong></p>
<p>Amazing！所以，STFT的本质是什么呢？</p>
<p><strong>STFT的本质就是将FT的基函数 <img src="https://www.zhihu.com/equation?tex=e%5E%7B-jwt%7D" alt="[公式]"> 乘上一个方窗函数，形成了一个新的基函数<img src="https://www.zhihu.com/equation?tex=%5Cphi%28t%29+%3D+e%5E%7B-jwt%7D+y_%7Bwindow%7D%28t%29" alt="[公式]"> ！</strong>前面说的分窗、截断之类的都是表象，<strong>STFT的本质是基函数的改变！</strong></p>
<p>那么，为什么STFT的基函数可以用于分窗，而FT的基函数不行呢？我们来看，我用正弦函数sin(5t)表示原来的基函数<img src="https://www.zhihu.com/equation?tex=e%5E%7B-jwt%7D" alt="[公式]"> ，那么FT基函数和STFT基函数如下：</p>
<p><img src="https://pic4.zhimg.com/80/v2-9fb003e0c1ca9b79cba81b58a6d06003_hd.jpg" alt="img"></p>
<p><img src="https://pic4.zhimg.com/80/v2-02cb52f656bb597ba81ea90af534044b_hd.jpg" alt="img"></p>
<p>原因就是：FT的基函数是在时域无限延伸的，因此，无论怎么平移，都是任分布在整个时域的，起不到分窗的作用。<strong>而STFT的基函数只在时域一段不为0，在剩下的时域都是0，因此，STFT的基函数的平移，就相当于自动加了窗子啦！</strong></p>
<h4 id="紧支撑性"><a href="#紧支撑性" class="headerlink" title="紧支撑性:"></a>紧支撑性:</h4><p><strong>这种只在时域一段不为0，在剩下的时域都是0的性质被称为“紧支撑性”（compactly supported），具有这种性质的函数，平移之后与一个信号相乘，就相当于分窗操作。这一点很重要，我们之后讲小波变换的基函数的时候还会讲。</strong></p>
<p>第三点，<strong>我们前面对于分窗操作使用的函数一直称为“方窗函数”</strong>，这是一种最理想的窗函数。<strong>还有一些其他的窗函数，比如，汉宁窗、海明窗、高斯窗等</strong>。窗函数本质都是一个窗子而已，原理是一模一样的，上面所有的讨论也都成立，只是这些窗子会让信号稍稍变形一丢丢而已。你就想像方窗函数就是一面平面镜，其他的窗函数就是哈哈镜就行了。</p>
<hr>
<h2 id="短时傅里叶变换（STFT）的缺点与连续小波变换（CWT）"><a href="#短时傅里叶变换（STFT）的缺点与连续小波变换（CWT）" class="headerlink" title="短时傅里叶变换（STFT）的缺点与连续小波变换（CWT）"></a>短时傅里叶变换（STFT）的缺点与连续小波变换（CWT）</h2><hr>
<h2 id="连续小波变换（CWT）的缺点与离散小波变换（DWT）"><a href="#连续小波变换（CWT）的缺点与离散小波变换（DWT）" class="headerlink" title="连续小波变换（CWT）的缺点与离散小波变换（DWT）"></a>连续小波变换（CWT）的缺点与离散小波变换（DWT）</h2></article><!-- lincense--><div class="license-wrapper"><p> <span>Author:  </span><a href="https://nymrli.top">果粒橙</a></p><p> <span>Link:  </span><a href="https://nymrli.top/2019/07/29/傅里叶变换-小波变化/">https://nymrli.top/2019/07/29/傅里叶变换-小波变化/</a></p><p> <span>Copyright:  </span><span>All articles in this blog are licensed under <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/3.0">CC BY-NC-SA 3.0</a> unless stating additionally.</span></p></div><div class="post-paginator"><a class="nextSlogan" href="/2019/07/26/Vim记忆/" title="Vim记忆"><span>NextPost ></span><br><span class="nextTitle">Vim记忆</span></a><div class="clear"></div></div><div id="comment"><div id="container"></div><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
  id: '傅里叶变换->小波变化',
  owner: 'Freedomisgood',
  repo: 'Freedomisgood.github.io',
  oauth: {
    client_id: 'bc5a81fe36017dcd8b63',
    client_secret: '949cec3a1b91742c6249c47259791e4b80a6fa69',
  },
})
gitment.render('container')</script></div></section></article><footer id="cxo-footer-outer"><div id="cxo-footer-inner"><p class="footer-container"><span>Site by </span><a href="http://hexo.io"><span>Hexo</span></a><span> | theme </span><a href="https://github.com/Longlongyu/hexo-theme-Cxo"><span>Cxo</span></a></p><i class="fa fa-user"> </i><span id="busuanzi_value_site_uv"></span><span> | </span><i class="fa fa-eye"> </i><span id="busuanzi_value_site_pv"></span></div></footer><!-- catelog--><div class="toc-wrapper" style="top: 60vh;"><div class="toc-catalog"><i class="fa fa-list"> </i><span>CATALOG</span></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#傅里叶变换-gt-小波变化"><span class="toc-number">1.</span> <span class="toc-text">傅里叶变换-&gt;小波变化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#傅里叶变换FT"><span class="toc-number">1.1.</span> <span class="toc-text">傅里叶变换FT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基础知识"><span class="toc-number">1.1.1.</span> <span class="toc-text">基础知识</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么傅里叶变换可以把一个信号从时域变换到频域"><span class="toc-number">1.1.2.</span> <span class="toc-text">为什么傅里叶变换可以把一个信号从时域变换到频域?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-理解变换公式"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.理解变换公式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#y-sin-3t-图"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">y=sin(3t)图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#y-sin-4t-sin-3t-图"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">y=sin(4t)sin(3t)图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#y-sin-3-1t-sin-3t-图"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">y=sin(3.1t)sin(3t)图</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、傅里叶变换（FT）的正交性"><span class="toc-number">1.1.4.</span> <span class="toc-text">2、傅里叶变换（FT）的正交性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是正交性"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">什么是正交性?</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#向量正交"><span class="toc-number">1.1.4.1.1.</span> <span class="toc-text">向量正交:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#正交基"><span class="toc-number">1.1.4.1.2.</span> <span class="toc-text">正交基</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#这里需要说明三点："><span class="toc-number">1.1.5.</span> <span class="toc-text">这里需要说明三点：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#总结"><span class="toc-number">1.1.6.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#傅里叶变换（FT）的缺点与短时傅里叶变换（STFT）"><span class="toc-number">1.2.</span> <span class="toc-text">傅里叶变换（FT）的缺点与短时傅里叶变换（STFT）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#离散傅里叶变换（DFT）"><span class="toc-number">1.2.1.</span> <span class="toc-text">离散傅里叶变换（DFT）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#傅里叶变换（FT）的缺点"><span class="toc-number">1.2.2.</span> <span class="toc-text">傅里叶变换（FT）的缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#短时傅里叶变换（STFT）"><span class="toc-number">1.2.3.</span> <span class="toc-text">短时傅里叶变换（STFT）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#本质变化"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">本质变化:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#紧支撑性"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">紧支撑性:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#短时傅里叶变换（STFT）的缺点与连续小波变换（CWT）"><span class="toc-number">1.3.</span> <span class="toc-text">短时傅里叶变换（STFT）的缺点与连续小波变换（CWT）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#连续小波变换（CWT）的缺点与离散小波变换（DWT）"><span class="toc-number">1.4.</span> <span class="toc-text">连续小波变换（CWT）的缺点与离散小波变换（DWT）</span></a></li></ol></li></ol></div><!-- top--><i class="fa fa-arrow-up close" id="go-up" aria-hidden="true"></i></body></html>